cm4all-beng-proxy (1.0.24) unstable; urgency=low

  * debian/rules: optimize parallel build
  * cgi: break loop when headers are finished

 -- Max Kellermann <mk@cm4all.com>  Wed, 15 Feb 2012 09:23:22 -0000

cm4all-beng-proxy (1.0.23) unstable; urgency=low

  * cgi: detect large response headers
  * cgi: continue parsing response headers after buffer boundary
  * cgi: bigger response header buffer
  * fcgi-client: detect large response headers

 -- Max Kellermann <mk@cm4all.com>  Thu, 09 Feb 2012 09:27:50 -0000

cm4all-beng-proxy (1.0.22) unstable; urgency=low

  * debian/rules: don't run libtool
  * lb: thread safety for the SSL filter
  * lb: fix crash during shutdown
  * http-server: fix uninitialised variable

 -- Max Kellermann <mk@cm4all.com>  Thu, 02 Feb 2012 13:03:08 -0000

cm4all-beng-proxy (1.0.21) unstable; urgency=low

  * hstock: fix memory leak
  * notify: fix endless busy loop
  * ssl_filter: fix hang while tearing down connection

 -- Max Kellermann <mk@cm4all.com>  Tue, 31 Jan 2012 15:24:50 -0000

cm4all-beng-proxy (1.0.20) unstable; urgency=low

  * ssl: load the whole certificate chain
  * translate: fix PATH+JAILCGI+SITE check
  * translate: fix HOME check
  * resource-address: include all CGI attributes in cache key

 -- Max Kellermann <mk@cm4all.com>  Wed, 25 Jan 2012 12:10:43 -0000

cm4all-beng-proxy (1.0.19) unstable; urgency=low

  * cookie-client: add a missing out-of-memory check

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Jan 2012 08:27:38 -0000

cm4all-beng-proxy (1.0.18) unstable; urgency=low

  * resource-address: support zero-length path_info prefix (for BASE)
  * hashmap: optimize insertions
  * http-server: limit the number of request headers
  * proxy-widget: discard the unused request body on error

 -- Max Kellermann <mk@cm4all.com>  Wed, 04 Jan 2012 14:55:59 -0000

cm4all-beng-proxy (1.0.17) unstable; urgency=low

  * istream-chunked: avoid recursive buffer write, fixes crash

 -- Max Kellermann <mk@cm4all.com>  Wed, 21 Dec 2011 16:37:44 -0000

cm4all-beng-proxy (1.0.16) unstable; urgency=low

  * http-server: disable timeout while waiting for CGI
  * cgi: fix segmentation fault
  * processor: discard child's request body on abort
  * proxy-widget: discard the unused request body on error

 -- Max Kellermann <mk@cm4all.com>  Wed, 14 Dec 2011 11:53:31 +0100

cm4all-beng-proxy (1.0.15) unstable; urgency=low

  * http-client: fix assertion failure on bogus "100 Continue"
  * handler: don't close the request body twice
  * session: add a missing out-of-memory check
  * fcgi-client: check for EV_READ event
  * fcgi-serialize: fix serializing parameter without value

 -- Max Kellermann <mk@cm4all.com>  Mon, 05 Dec 2011 17:47:20 -0000

cm4all-beng-proxy (1.0.14) unstable; urgency=low

  * http-server: don't generate chunked HEAD response
  * http-server: don't override Content-Length for HEAD response
  * lb_http, proxy-widget, response: forward Content-Length after HEAD

 -- Max Kellermann <mk@cm4all.com>  Tue, 08 Nov 2011 18:19:42 +0100

cm4all-beng-proxy (1.0.13) unstable; urgency=low

  * processor: initialize URI rewrite options for <?cm4all-rewrite-uri?>

 -- Max Kellermann <mk@cm4all.com>  Wed, 02 Nov 2011 16:47:48 +0100

cm4all-beng-proxy (1.0.12) unstable; urgency=low

  * http-server, proxy-widget: add missing newline to log message
  * fcgi_client: fix assertion failure on response body error
  * http-cache-choice: fix crash due to wrong filter callback

 -- Max Kellermann <mk@cm4all.com>  Fri, 21 Oct 2011 15:02:42 +0200

cm4all-beng-proxy (1.0.11) unstable; urgency=low

  * lb_config: fix binding to wildcard address
  * rewrite-uri: clarify warning message when widget has no id

 -- Max Kellermann <mk@cm4all.com>  Wed, 19 Oct 2011 09:26:48 +0200

cm4all-beng-proxy (1.0.10) unstable; urgency=low

  * debian/control: beng-lb doesn't need "daemon" anymore
  * http-string: allow space in unquoted cookie values (RFC ignorant)

 -- Max Kellermann <mk@cm4all.com>  Fri, 07 Oct 2011 15:06:32 +0200

cm4all-beng-proxy (1.0.9) unstable; urgency=low

  * tcp-balancer: store a copy of the socket address
  * lb: default log directory is /var/log/cm4all/beng-lb
  * lb: use new built-in watchdog instead of /usr/bin/daemon

 -- Max Kellermann <mk@cm4all.com>  Thu, 29 Sep 2011 16:19:34 +0200

cm4all-beng-proxy (1.0.8) unstable; urgency=low

  * resource-address: copy the delegate JailCGI parameters (crash bug fix)
  * response: use the same URI for storing and dropping widget sessions

 -- Max Kellermann <mk@cm4all.com>  Thu, 22 Sep 2011 13:39:08 +0200

cm4all-beng-proxy (1.0.7) unstable; urgency=low

  * inline-widget: discard request body when class lookup fails

 -- Max Kellermann <mk@cm4all.com>  Fri, 16 Sep 2011 12:16:04 +0200

cm4all-beng-proxy (1.0.6) unstable; urgency=low

  * processor: support short "SCRIPT" tag
  * widget-uri: use the template's view specification

 -- Max Kellermann <mk@cm4all.com>  Tue, 13 Sep 2011 18:14:24 +0200

cm4all-beng-proxy (1.0.5) unstable; urgency=low

  * resource-loader: delete comma when extracting from X-Forwarded-For

 -- Max Kellermann <mk@cm4all.com>  Mon, 05 Sep 2011 17:43:22 +0200

cm4all-beng-proxy (1.0.4) unstable; urgency=low

  * istream-replace: update the buffer reader after new data was added

 -- Max Kellermann <mk@cm4all.com>  Mon, 05 Sep 2011 15:43:17 +0200

cm4all-beng-proxy (1.0.3) unstable; urgency=low

  * merge release 0.9.35
  * control-handler: fix uninitialized variable

 -- Max Kellermann <mk@cm4all.com>  Thu, 18 Aug 2011 15:15:52 +0200

cm4all-beng-proxy (1.0.2) unstable; urgency=low

  * merge release 0.9.34
  * handler: always log translate client errors
  * tcp-balancer: fix memory leak in error handler
  * http-string: allow more characters in cookie values (RFC ignorant)

 -- Max Kellermann <mk@cm4all.com>  Mon, 01 Aug 2011 16:30:05 +0200

cm4all-beng-proxy (1.0.1) unstable; urgency=low

  * session: increase idle timeout to 20 minutes

 -- Max Kellermann <mk@cm4all.com>  Tue, 26 Jul 2011 11:23:36 +0200

cm4all-beng-proxy (1.0) unstable; urgency=low

  * merge release 0.9.33
  * header-forward: eliminate the duplicate "Date" response header
  * proxy-handler: don't pass internal URI arguments to CGI

 -- Max Kellermann <mk@cm4all.com>  Mon, 18 Jul 2011 17:07:42 +0200

cm4all-beng-proxy (0.10.14) unstable; urgency=low

  * merge release 0.9.32

 -- Max Kellermann <mk@cm4all.com>  Tue, 12 Jul 2011 19:02:23 +0200

cm4all-beng-proxy (0.10.13) unstable; urgency=low

  * growing-buffer: reset the position when skipping buffers

 -- Max Kellermann <mk@cm4all.com>  Wed, 06 Jul 2011 10:07:50 +0200

cm4all-beng-proxy (0.10.12) unstable; urgency=low

  * merge release 0.9.31
  * rewrite-uri: log widget base mismatch
  * istream-replace: fix assertion failure with splitted buffer

 -- Max Kellermann <mk@cm4all.com>  Tue, 05 Jul 2011 22:05:44 +0200

cm4all-beng-proxy (0.10.11) unstable; urgency=low

  * merge release 0.9.30
  * lb: add SSL/TLS support

 -- Max Kellermann <mk@cm4all.com>  Mon, 04 Jul 2011 17:14:21 +0200

cm4all-beng-proxy (0.10.10) unstable; urgency=low

  * merge release 0.9.29

 -- Max Kellermann <mk@cm4all.com>  Tue, 28 Jun 2011 17:56:43 +0200

cm4all-beng-proxy (0.10.9) unstable; urgency=low

  * merge release 0.9.28

 -- Max Kellermann <mk@cm4all.com>  Mon, 27 Jun 2011 13:38:03 +0200

cm4all-beng-proxy (0.10.8) unstable; urgency=low

  * lb_http: don't access the connection object after it was closed
  * restart the load balancer automatically

 -- Max Kellermann <mk@cm4all.com>  Wed, 22 Jun 2011 12:38:39 +0200

cm4all-beng-proxy (0.10.7) unstable; urgency=low

  * config: make the session cookie name configurable
  * uri-relative: allow relative base URIs (for CGI)
  * widget-uri: combine existing CGI PATH_INFO and given widget location
  * python/translation/widget: support "path_info" specification

 -- Max Kellermann <mk@cm4all.com>  Mon, 20 Jun 2011 14:54:38 +0200

cm4all-beng-proxy (0.10.6) unstable; urgency=low

  * merge release 0.9.26

 -- Max Kellermann <mk@cm4all.com>  Wed, 15 Jun 2011 09:19:28 +0200

cm4all-beng-proxy (0.10.5) unstable; urgency=low

  * merge release 0.9.26

 -- Max Kellermann <mk@cm4all.com>  Fri, 10 Jun 2011 10:09:09 +0200

cm4all-beng-proxy (0.10.4) unstable; urgency=low

  * doc: add beng-lb documentation
  * lb: implement "fallback" option
  * merge release 0.9.25

 -- Max Kellermann <mk@cm4all.com>  Wed, 08 Jun 2011 14:13:43 +0200

cm4all-beng-proxy (0.10.3) unstable; urgency=low

  * python/translation.widget: support keyword "sticky"
  * lb: implement sticky modes "failover", "cookie"

 -- Max Kellermann <mk@cm4all.com>  Mon, 06 Jun 2011 15:51:36 +0200

cm4all-beng-proxy (0.10.2) unstable; urgency=low

  * debian: fix beng-lb pid file name
  * lb_http: implement sticky sessions
  * merge release 0.9.24

 -- Max Kellermann <mk@cm4all.com>  Tue, 31 May 2011 14:32:03 +0200

cm4all-beng-proxy (0.10.1) unstable; urgency=low

  * lb_http: close request body on error
  * lb_listener: print error message when binding fails
  * merge release 0.9.23

 -- Max Kellermann <mk@cm4all.com>  Fri, 27 May 2011 13:13:55 +0200

cm4all-beng-proxy (0.10) unstable; urgency=low

  * failure: fix inverted logic bug in expiry check
  * tcp-balancer: implement session stickiness
  * lb: new stand-alone load balancer

 -- Max Kellermann <mk@cm4all.com>  Thu, 26 May 2011 14:32:02 +0200

cm4all-beng-proxy (0.9.35) unstable; urgency=low

  * resource-loader: pass the last X-Forwarded-For element to AJP

 -- Max Kellermann <mk@cm4all.com>  Thu, 18 Aug 2011 15:05:02 +0200

cm4all-beng-proxy (0.9.34) unstable; urgency=low

  * request: fix double request body close in errdoc handler
  * handler: close request body on early abort

 -- Max Kellermann <mk@cm4all.com>  Mon, 01 Aug 2011 16:21:43 +0200

cm4all-beng-proxy (0.9.33) unstable; urgency=low

  * {http,ajp}-request, errdoc: check before closing the request body on
    error

 -- Max Kellermann <mk@cm4all.com>  Mon, 18 Jul 2011 16:30:29 +0200

cm4all-beng-proxy (0.9.32) unstable; urgency=low

  * processor: dispose request body when focused widget was not found
  * http-string: allow the slash in cookie values (RFC ignorant)

 -- Max Kellermann <mk@cm4all.com>  Tue, 12 Jul 2011 18:16:01 +0200

cm4all-beng-proxy (0.9.31) unstable; urgency=low

  * growing-buffer: fix assertion failure with empty first buffer

 -- Max Kellermann <mk@cm4all.com>  Tue, 05 Jul 2011 21:58:24 +0200

cm4all-beng-proxy (0.9.30) unstable; urgency=low

  * growing-buffer: fix assertion failure in reader when buffer is empty

 -- Max Kellermann <mk@cm4all.com>  Mon, 04 Jul 2011 16:59:28 +0200

cm4all-beng-proxy (0.9.29) unstable; urgency=low

  * http-string: allow the equality sign in cookie values (RFC ignorant)

 -- Max Kellermann <mk@cm4all.com>  Tue, 28 Jun 2011 17:50:23 +0200

cm4all-beng-proxy (0.9.28) unstable; urgency=low

  * http-string: allow round brackets in cookie values (RFC ignorant)

 -- Max Kellermann <mk@cm4all.com>  Mon, 27 Jun 2011 13:23:58 +0200

cm4all-beng-proxy (0.9.27) unstable; urgency=low

  * handler: don't delete existing session in TRANSPARENT mode

 -- Max Kellermann <mk@cm4all.com>  Wed, 15 Jun 2011 09:08:48 +0200

cm4all-beng-proxy (0.9.26) unstable; urgency=low

  * worker: read "crash" value before destroying shared memory
  * session: fix crash while discarding session

 -- Max Kellermann <mk@cm4all.com>  Fri, 10 Jun 2011 09:54:56 +0200

cm4all-beng-proxy (0.9.25) unstable; urgency=low

  * response: discard the request body before passing to errdoc
  * worker: don't restart all workers after "safe" worker crash
  * cgi: check for end-of-file after splice

 -- Max Kellermann <mk@cm4all.com>  Wed, 08 Jun 2011 15:02:35 +0200

cm4all-beng-proxy (0.9.24) unstable; urgency=low

  * fcgi-client: really discard packets on request id mismatch
  * memcached-client: don't schedule read event when buffer is full
  * session: support beng-lb sticky sessions

 -- Max Kellermann <mk@cm4all.com>  Tue, 31 May 2011 14:23:41 +0200

cm4all-beng-proxy (0.9.23) unstable; urgency=low

  * tcp-balancer: retry connecting to cluster if a node fails

 -- Max Kellermann <mk@cm4all.com>  Fri, 27 May 2011 13:01:31 +0200

cm4all-beng-proxy (0.9.22) unstable; urgency=low

  * failure: fix inverted logic bug in expiry check
  * uri-extract: support AJP URLs, fixes AJP cookies
  * ajp-client: don't schedule read event when buffer is full

 -- Max Kellermann <mk@cm4all.com>  Thu, 26 May 2011 08:32:32 +0200

cm4all-beng-proxy (0.9.21) unstable; urgency=low

  * balancer: re-enable load balancing (regression fix)
  * merge release 0.8.38

 -- Max Kellermann <mk@cm4all.com>  Fri, 20 May 2011 11:03:31 +0200

cm4all-beng-proxy (0.9.20) unstable; urgency=low

  * http-cache: fix assertion failure caused by wrong destructor
  * merge release 0.8.37

 -- Max Kellermann <mk@cm4all.com>  Mon, 16 May 2011 14:03:09 +0200

cm4all-beng-proxy (0.9.19) unstable; urgency=low

  * http-request: don't retry requests with a request body

 -- Max Kellermann <mk@cm4all.com>  Thu, 12 May 2011 11:35:55 +0200

cm4all-beng-proxy (0.9.18) unstable; urgency=low

  * http-body: fix assertion failure on EOF chunk after socket was closed
  * widget-http: fix crash in widget lookup error handler
  * merge release 0.8.36

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 May 2011 18:56:33 +0200

cm4all-beng-proxy (0.9.17) unstable; urgency=low

  * growing-buffer: fix assertion failure after large initial write
  * http-request: retry after connection failure
  * test/t-cgi: fix bashisms in test scripts

 -- Max Kellermann <mk@cm4all.com>  Wed, 04 May 2011 18:54:57 +0200

cm4all-beng-proxy (0.9.16) unstable; urgency=low

  * resource-address: append "transparent" args to CGI path_info
  * tcache: fix crash on FastCGI with BASE

 -- Max Kellermann <mk@cm4all.com>  Mon, 02 May 2011 16:07:21 +0200

cm4all-beng-proxy (0.9.15) unstable; urgency=low

  * configure.ac: check if valgrind/memcheck.h is installed
  * configure.ac: check if libattr is available
  * access-log: log Referer and User-Agent
  * access-log: log the request duration
  * proxy-handler: allow forwarding URI arguments
  * merge release 0.8.35

 -- Max Kellermann <mk@cm4all.com>  Wed, 27 Apr 2011 18:54:17 +0200

cm4all-beng-proxy (0.9.14) unstable; urgency=low

  * processor: don't clear widget pointer at opening tag
  * debian: move ulimit call from init script to *.default
  * merge release 0.8.33

 -- Max Kellermann <mk@cm4all.com>  Wed, 13 Apr 2011 17:03:29 +0200

cm4all-beng-proxy (0.9.13) unstable; urgency=low

  * proxy-widget: apply the widget's response header forward settings
  * response: add option to dump the widget tree
  * widget-class: move header forward settings to view
  * merge release 0.8.30

 -- Max Kellermann <mk@cm4all.com>  Mon, 04 Apr 2011 16:31:26 +0200

cm4all-beng-proxy (0.9.12) unstable; urgency=low

  * widget: internal API refactorization
  * was-control: fix argument order in "abort" call
  * was-client: duplicate the GError object when it is used twice
  * {file,delegate}-handler: add Expires/ETag headers to 304 response
  * cgi: allow setting environment variables

 -- Max Kellermann <mk@cm4all.com>  Thu, 24 Mar 2011 15:12:54 +0100

cm4all-beng-proxy (0.9.11) unstable; urgency=low

  * processor: major API refactorization
  * merge release 0.8.29

 -- Max Kellermann <mk@cm4all.com>  Mon, 21 Mar 2011 19:43:28 +0100

cm4all-beng-proxy (0.9.10) unstable; urgency=low

  * merge release 0.8.27

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Mar 2011 14:11:16 +0100

cm4all-beng-proxy (0.9.9) unstable; urgency=low

  * merge release 0.8.25

 -- Max Kellermann <mk@cm4all.com>  Mon, 14 Mar 2011 16:05:51 +0100

cm4all-beng-proxy (0.9.8) unstable; urgency=low

  * translate: support UNIX domain sockets in ADDRESS_STRING
  * resource-address: support connections to existing FastCGI servers

 -- Max Kellermann <mk@cm4all.com>  Fri, 11 Mar 2011 19:24:33 +0100

cm4all-beng-proxy (0.9.7) unstable; urgency=low

  * merge release 0.8.24

 -- Max Kellermann <mk@cm4all.com>  Fri, 04 Mar 2011 13:07:36 +0100

cm4all-beng-proxy (0.9.6) unstable; urgency=low

  * merge release 0.8.23

 -- Max Kellermann <mk@cm4all.com>  Mon, 28 Feb 2011 11:47:45 +0100

cm4all-beng-proxy (0.9.5) unstable; urgency=low

  * translate: allow SITE without CGI

 -- Max Kellermann <mk@cm4all.com>  Mon, 31 Jan 2011 06:35:24 +0100

cm4all-beng-proxy (0.9.4) unstable; urgency=low

  * widget-class: allow distinct addresses for each view

 -- Max Kellermann <mk@cm4all.com>  Thu, 27 Jan 2011 17:51:21 +0100

cm4all-beng-proxy (0.9.3) unstable; urgency=low

  * istream-catch: log errors
  * proxy-handler: pass the original request URI to (Fast)CGI
  * proxy-handler: pass the original document root to (Fast)CGI
  * fcgi-stock: pass site id to child process
  * translation: new packet "HOME" for JailCGI
  * resource-loader: get remote host from "X-Forwarded-For"
  * cgi, fcgi-client: pass client IP address to application

 -- Max Kellermann <mk@cm4all.com>  Fri, 21 Jan 2011 18:13:38 +0100

cm4all-beng-proxy (0.9.2) unstable; urgency=low

  * merge release 0.8.21
  * http-response: better context for error messages
  * istream: method close() does not invoke handler->abort()
  * istream: better context for error messages
  * ajp-client: destruct properly when request stream fails
  * {delegate,fcgi,was}-stock: use the JailCGI 1.4 wrapper

 -- Max Kellermann <mk@cm4all.com>  Mon, 17 Jan 2011 12:08:04 +0100

cm4all-beng-proxy (0.9.1) unstable; urgency=low

  * http-server: count the number of raw bytes sent and received
  * control-handler: support TCACHE_INVALIDATE with SITE
  * new programs "log-forward", "log-exec" for network logging
  * new program "log-split" for creating per-site log files
  * new program "log-traffic" for creating per-site traffic logs
  * move logging servers to new package cm4all-beng-proxy-logging
  * python/control.client: add parameter "broadcast"

 -- Max Kellermann <mk@cm4all.com>  Thu, 02 Dec 2010 12:07:16 +0100

cm4all-beng-proxy (0.9) unstable; urgency=low

  * merge release 0.8.19
  * was-client: explicitly send 32 bit METHOD payload
  * was-client: explicitly parse STATUS as 32 bit integer
  * was-client: clear control channel object on destruction
  * was-client: reuse child process if state is clean on EOF
  * was-client: abort properly after receiving illegal packet
  * was-client: allow "request STOP" before response completed
  * was-client: postpone the response handler invocation
  * was-control: send packets in bulk
  * python: support WAS widgets
  * http-server: enable "cork" mode only for beginning of response
  * http-cache: don't access freed memory in pool_unref_denotify()
  * http: use libcm4all-http
  * new datagram based binary protocol for access logging
  * main: default WAS stock limit is 16

 -- Max Kellermann <mk@cm4all.com>  Thu, 18 Nov 2010 19:56:17 +0100

cm4all-beng-proxy (0.8.38) unstable; urgency=low

  * failure: update time stamp on existing item
  * errdoc: free the original response body on abort

 -- Max Kellermann <mk@cm4all.com>  Fri, 20 May 2011 10:17:14 +0200

cm4all-beng-proxy (0.8.37) unstable; urgency=low

  * widget-resolver: don't reuse failed resolver
  * http-request: fix NULL pointer dereference on invalid URI
  * config: disable the TCP stock limit by default

 -- Max Kellermann <mk@cm4all.com>  Mon, 16 May 2011 13:41:32 +0200

cm4all-beng-proxy (0.8.36) unstable; urgency=low

  * http-server: check if client closes connection while processing
  * http-client: release the socket before invoking the callback
  * fcgi-client: fix assertion failure on full input buffer
  * memcached-client: re-enable socket event after direct copy
  * istream-file: fix assertion failure on range request
  * test/t-cgi: fix bashisms in test scripts

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 May 2011 18:45:48 +0200

cm4all-beng-proxy (0.8.35) unstable; urgency=low

  * session: fix potential session defragmentation crash
  * ajp-request: use "host:port" as TCP stock key
  * cgi: evaluate the Content-Length response header

 -- Max Kellermann <mk@cm4all.com>  Wed, 27 Apr 2011 13:32:05 +0200

cm4all-beng-proxy (0.8.34) unstable; urgency=low

  * js: replace all '%' with '$'
  * js: check if session_id is null
  * debian: add package cm4all-beng-proxy-tools

 -- Max Kellermann <mk@cm4all.com>  Tue, 19 Apr 2011 18:43:54 +0200

cm4all-beng-proxy (0.8.33) unstable; urgency=low

  * processor: don't quote query string arguments with dollar sign
  * widget-request: safely remove "view" and "path" from argument table
  * debian/control: add "Breaks << 0.8.32" on the JavaScript library

 -- Max Kellermann <mk@cm4all.com>  Tue, 12 Apr 2011 18:21:55 +0200

cm4all-beng-proxy (0.8.32) unstable; urgency=low

  * args: quote arguments with the dollar sign

 -- Max Kellermann <mk@cm4all.com>  Tue, 12 Apr 2011 13:34:42 +0200

cm4all-beng-proxy (0.8.31) unstable; urgency=low

  * proxy-widget: eliminate the duplicate "Server" response header
  * translation: add packet UNTRUSTED_SITE_SUFFIX

 -- Max Kellermann <mk@cm4all.com>  Thu, 07 Apr 2011 16:23:37 +0200

cm4all-beng-proxy (0.8.30) unstable; urgency=low

  * handler: make lower-case realm name from the "Host" header
  * session: copy attribute "realm", fixes segmentation fault

 -- Max Kellermann <mk@cm4all.com>  Tue, 29 Mar 2011 16:47:43 +0200

cm4all-beng-proxy (0.8.29) unstable; urgency=low

  * ajp-client: send query string in an AJP attribute

 -- Max Kellermann <mk@cm4all.com>  Mon, 21 Mar 2011 19:16:16 +0100

cm4all-beng-proxy (0.8.28) unstable; urgency=low

  * resource-loader: use X-Forwarded-For to obtain AJP remote host
  * resource-loader: strip port from AJP remote address
  * resource-loader: don't pass remote host to AJP server
  * resource-loader: parse server port for AJP
  * ajp-client: always send content-length
  * ajp-client: parse the remaining buffer after EAGAIN

 -- Max Kellermann <mk@cm4all.com>  Mon, 21 Mar 2011 11:12:07 +0100

cm4all-beng-proxy (0.8.27) unstable; urgency=low

  * http-request: close the request body on malformed URI
  * ajp-request: AJP translation packet contains ajp://host:port/path

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Mar 2011 14:04:21 +0100

cm4all-beng-proxy (0.8.26) unstable; urgency=low

  * python/response: fix typo in ajp()
  * session: validate sessions only within one realm

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Mar 2011 08:59:41 +0100

cm4all-beng-proxy (0.8.25) unstable; urgency=low

  * widget-http: discard request body on unknown view name
  * inline-widget: discard request body on error
  * {http,fcgi,was}-client: allocate response headers from caller pool
  * cmdline: fcgi_stock_limit defaults to 0 (no limit)

 -- Max Kellermann <mk@cm4all.com>  Mon, 14 Mar 2011 15:53:42 +0100

cm4all-beng-proxy (0.8.24) unstable; urgency=low

  * fcgi-client: release the connection even when padding not consumed
    after empty response

 -- Max Kellermann <mk@cm4all.com>  Wed, 02 Mar 2011 17:39:33 +0100

cm4all-beng-proxy (0.8.23) unstable; urgency=low

  * memcached-client: allocate a new memory pool
  * memcached-client: copy caller_pool reference before freeing the client
  * fcgi-client: check headers!=NULL
  * fcgi-client: release the connection even when padding not consumed

 -- Max Kellermann <mk@cm4all.com>  Mon, 28 Feb 2011 10:50:02 +0100

cm4all-beng-proxy (0.8.22) unstable; urgency=low

  * cgi: fill special variables CONTENT_TYPE, CONTENT_LENGTH
  * memcached-client: remove stray pool_unref() call
  * memcached-client: reuse the socket if the remaining value is buffered
  * http-cache-choice: abbreviate memcached keys
  * *-cache: allocate a parent pool for cache items
  * pool: re-enable linear pools
  * frame: free the request body on error
  * http-cache: free cached body which was dismissed

 -- Max Kellermann <mk@cm4all.com>  Mon, 07 Feb 2011 15:34:09 +0100

cm4all-beng-proxy (0.8.21) unstable; urgency=low

  * merge release 0.7.55
  * jail: translate the document root properly
  * header-forward: forward the "Host" header to CGI/FastCGI/AJP
  * http-error: map ENOTDIR to "404 Not Found"
  * http-server: fix assertion failure on write error
  * fcgi-stock: clear all environment variables

 -- Max Kellermann <mk@cm4all.com>  Thu, 06 Jan 2011 16:04:20 +0100

cm4all-beng-proxy (0.8.20) unstable; urgency=low

  * widget-resolver: add pedantic state assertions
  * async: remember a copy of the operation in !NDEBUG
  * python/translation/response: max_age() returns self

 -- Max Kellermann <mk@cm4all.com>  Mon, 06 Dec 2010 23:02:50 +0100

cm4all-beng-proxy (0.8.19) unstable; urgency=low

  * merge release 0.7.54

 -- Max Kellermann <mk@cm4all.com>  Wed, 17 Nov 2010 16:25:10 +0100

cm4all-beng-proxy (0.8.18) unstable; urgency=low

  * was-client: explicitly send 32 bit METHOD payload
  * was-client: explicitly parse STATUS as 32 bit integer
  * istream: check presence of as_fd() in optimized build

 -- Max Kellermann <mk@cm4all.com>  Fri, 05 Nov 2010 11:00:54 +0100

cm4all-beng-proxy (0.8.17) unstable; urgency=low

  * merged release 0.7.53
  * widget: use colon as widget path separator
  * was-client: check for abort during response handler
  * was-client: implement STOP
  * was-client: release memory pools
  * was-launch: enable non-blocking mode on input and output
  * http-server: don't crash on malformed pipelined request
  * main: free the WAS stock and the UDP listener in the SIGTERM handler

 -- Max Kellermann <mk@cm4all.com>  Thu, 28 Oct 2010 19:50:26 +0200

cm4all-beng-proxy (0.8.16) unstable; urgency=low

  * merged release 0.7.52
  * was-client: support for the WAS protocol

 -- Max Kellermann <mk@cm4all.com>  Wed, 13 Oct 2010 16:45:18 +0200

cm4all-beng-proxy (0.8.15) unstable; urgency=low

  * resource-address: don't skip question mark twice

 -- Max Kellermann <mk@cm4all.com>  Tue, 28 Sep 2010 12:20:33 +0200

cm4all-beng-proxy (0.8.14) unstable; urgency=low

  * processor: schedule "xmlns:c" deletion

 -- Max Kellermann <mk@cm4all.com>  Thu, 23 Sep 2010 14:42:31 +0200

cm4all-beng-proxy (0.8.13) unstable; urgency=low

  * processor: delete "xmlns:c" attributes from link elements
  * istream-{head,zero}: implement method available()
  * merged release 0.7.51

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Aug 2010 09:54:33 +0200

cm4all-beng-proxy (0.8.12) unstable; urgency=low

  * http-cache-memcached: copy resource address
  * debian/control: add missing ${shlibs:Depends}
  * merged release 0.7.50

 -- Max Kellermann <mk@cm4all.com>  Thu, 12 Aug 2010 20:17:52 +0200

cm4all-beng-proxy (0.8.11) unstable; urgency=low

  * delegate-client: fix SCM_RIGHTS check
  * use Linux 2.6 CLOEXEC/NONBLOCK flags
  * tcache: INVALIDATE removes all variants (error documents etc.)
  * control: new UDP based protocol, allows invalidating caches
  * hashmap: fix assertion failure in hashmap_remove_match()
  * merged release 0.7.49

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 Aug 2010 15:48:10 +0200

cm4all-beng-proxy (0.8.10) unstable; urgency=low

  * tcache: copy response.previous

 -- Max Kellermann <mk@cm4all.com>  Mon, 02 Aug 2010 18:03:43 +0200

cm4all-beng-proxy (0.8.9) unstable; urgency=low

  * (f?)cgi-handler: forward query string only if focused
  * ajp-handler: merge into proxy-handler
  * proxy-handler: forward query string if focused
  * cgi, fastcgi-handler: enable the resource cache
  * translation: add packets CHECK and PREVIOUS for authentication
  * python: add Response.max_age()

 -- Max Kellermann <mk@cm4all.com>  Fri, 30 Jul 2010 11:39:22 +0200

cm4all-beng-proxy (0.8.8) unstable; urgency=low

  * prototypes/translate.py: added new ticket-fastcgi programs
  * http-cache: implement FastCGI caching
  * merged release 0.7.47

 -- Max Kellermann <mk@cm4all.com>  Wed, 21 Jul 2010 13:00:43 +0200

cm4all-beng-proxy (0.8.7) unstable; urgency=low

  * istream-delayed: update the "direct" bit mask
  * http-client: send "Expect: 100-continue"
  * response, widget-http: apply istream_pipe to filter input
  * proxy-handler: apply istream_pipe to request body
  * istream-ajp-body: send larger request body packets
  * ajp-client: support splice()
  * merged release 0.7.46

 -- Max Kellermann <mk@cm4all.com>  Fri, 25 Jun 2010 18:52:04 +0200

cm4all-beng-proxy (0.8.6) unstable; urgency=low

  * translation: added support for custom error documents
  * response: convert HEAD to GET if filter follows
  * processor: short-circuit on HEAD request
  * python: depend on python-twisted-core

 -- Max Kellermann <mk@cm4all.com>  Wed, 16 Jun 2010 16:37:42 +0200

cm4all-beng-proxy (0.8.5) unstable; urgency=low

  * istream-tee: allow second output to block
  * widget-http: don't transform error documents
  * response, widget-http: disable filters after widget frame request
  * translation: added packet FILTER_4XX to filter client errors
  * merged release 0.7.45

 -- Max Kellermann <mk@cm4all.com>  Thu, 10 Jun 2010 16:13:14 +0200

cm4all-beng-proxy (0.8.4) unstable; urgency=low

  * python: added missing "Response" import
  * python: resume parsing after deferred call
  * http-client: implement istream method as_fd()
  * merged release 0.7.44

 -- Max Kellermann <mk@cm4all.com>  Mon, 07 Jun 2010 17:01:16 +0200

cm4all-beng-proxy (0.8.3) unstable; urgency=low

  * file-handler: implement If-Range (RFC 2616 14.27)
  * merged release 0.7.42

 -- Max Kellermann <mk@cm4all.com>  Tue, 01 Jun 2010 16:17:13 +0200

cm4all-beng-proxy (0.8.2) unstable; urgency=low

  * cookie-client: verify the cookie path
  * python: use Twisted's logging library
  * python: added a widget registry class
  * merged release 0.7.41

 -- Max Kellermann <mk@cm4all.com>  Wed, 26 May 2010 13:08:16 +0200

cm4all-beng-proxy (0.8.1) unstable; urgency=low

  * http-cache-memcached: delete entity records on POST

 -- Max Kellermann <mk@cm4all.com>  Tue, 18 May 2010 12:21:55 +0200

cm4all-beng-proxy (0.8) unstable; urgency=low

  * istream: added method as_fd() to convert istream to file descriptor
  * fork: support passing stdin istream fd to child process
  * http-cache: discard only matching entries on POST
  * istream-html-escape: escape single and double quote
  * rewrite-uri: escape the result with XML entities

 -- Max Kellermann <mk@cm4all.com>  Thu, 13 May 2010 12:34:46 +0200

cm4all-beng-proxy (0.7.55) unstable; urgency=low

  * pool: reparent pools in optimized build
  * istream-deflate: add missing pool reference while reading
  * istream-deflate: fix several error handlers

 -- Max Kellermann <mk@cm4all.com>  Thu, 06 Jan 2011 12:59:39 +0100

cm4all-beng-proxy (0.7.54) unstable; urgency=low

  * http-server: fix crash on deferred chunked request body
  * parser: fix crash on malformed SCRIPT element

 -- Max Kellermann <mk@cm4all.com>  Wed, 17 Nov 2010 16:13:09 +0100

cm4all-beng-proxy (0.7.53) unstable; urgency=low

  * http-server: don't crash on malformed pipelined request
  * sink-header: fix assertion failure on empty trailer

 -- Max Kellermann <mk@cm4all.com>  Thu, 28 Oct 2010 18:39:01 +0200

cm4all-beng-proxy (0.7.52) unstable; urgency=low

  * fcgi-client: fix send timeout handler
  * fork: finish the buffer after pipe was drained

 -- Max Kellermann <mk@cm4all.com>  Wed, 13 Oct 2010 16:39:26 +0200

cm4all-beng-proxy (0.7.51) unstable; urgency=low

  * http-client: clear response body pointer before forwarding EOF event
  * processor: fix assertion failure for c:mode in c:widget

 -- Max Kellermann <mk@cm4all.com>  Mon, 16 Aug 2010 17:01:48 +0200

cm4all-beng-proxy (0.7.50) unstable; urgency=low

  * header-forward: don't forward the "Host" header to HTTP servers
  * resource-address: use uri_relative() for CGI
  * uri-relative: don't lose host name in uri_absolute()
  * uri-relative: don't fail on absolute URIs
  * http-cache-heap: don't use uninitialized item size

 -- Max Kellermann <mk@cm4all.com>  Thu, 12 Aug 2010 20:03:49 +0200

cm4all-beng-proxy (0.7.49) unstable; urgency=low

  * hashmap: fix assertion failure in hashmap_remove_value()

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 Aug 2010 15:37:12 +0200

cm4all-beng-proxy (0.7.48) unstable; urgency=low

  * pipe-stock: add assertions on file descriptors

 -- Max Kellermann <mk@cm4all.com>  Mon, 09 Aug 2010 14:56:54 +0200

cm4all-beng-proxy (0.7.47) unstable; urgency=low

  * cmdline: add option "--group"

 -- Max Kellermann <mk@cm4all.com>  Fri, 16 Jul 2010 18:39:53 +0200

cm4all-beng-proxy (0.7.46) unstable; urgency=low

  * handler: initialize all translate_response attributes
  * http-client: consume buffer before header length check
  * istream-pipe: clear "direct" flags in constructor
  * istream-pipe: return gracefully when handler blocks
  * ajp-client: hold pool reference to reset TCP_CORK

 -- Max Kellermann <mk@cm4all.com>  Mon, 21 Jun 2010 17:53:21 +0200

cm4all-beng-proxy (0.7.45) unstable; urgency=low

  * istream-tee: separate "weak" values for the two outputs
  * fcache: don't close output when caching has been canceled
  * tcache: copy the attribute "secure_cookie"

 -- Max Kellermann <mk@cm4all.com>  Thu, 10 Jun 2010 15:21:34 +0200

cm4all-beng-proxy (0.7.44) unstable; urgency=low

  * http-client: check response header length
  * http-server: check request header length

 -- Max Kellermann <mk@cm4all.com>  Mon, 07 Jun 2010 16:51:57 +0200

cm4all-beng-proxy (0.7.43) unstable; urgency=low

  * http-cache: fixed NULL pointer dereference when storing empty response
    body on the heap

 -- Max Kellermann <mk@cm4all.com>  Tue, 01 Jun 2010 18:52:45 +0200

cm4all-beng-proxy (0.7.42) unstable; urgency=low

  * fork: check "direct" flag again after buffer flush
  * pool: pool_unref_denotify() remembers the code location
  * sink-{buffer,gstring}: don't invoke callback in abort()
  * async: added another debug flag to verify correctness

 -- Max Kellermann <mk@cm4all.com>  Mon, 31 May 2010 21:15:58 +0200

cm4all-beng-proxy (0.7.41) unstable; urgency=low

  * http-cache: initialize response status and headers on empty body

 -- Max Kellermann <mk@cm4all.com>  Tue, 25 May 2010 16:27:25 +0200

cm4all-beng-proxy (0.7.40) unstable; urgency=low

  * http-cache: fixed NULL pointer dereference when storing empty response
    body in memcached

 -- Max Kellermann <mk@cm4all.com>  Tue, 25 May 2010 15:04:44 +0200

cm4all-beng-proxy (0.7.39) unstable; urgency=low

  * memcached-stock: close value on connect failure
  * http: implement remaining status codes
  * http-cache: allow caching empty response body
  * http-cache: cache status codes 203, 206, 300, 301, 410
  * http-cache: don't cache authorized resources

 -- Max Kellermann <mk@cm4all.com>  Fri, 21 May 2010 17:37:29 +0200

cm4all-beng-proxy (0.7.38) unstable; urgency=low

  * http-server: send HTTP/1.1 declaration with "100 Continue"
  * connection: initialize "site_name", fixes crash bug
  * translation: added packet SECURE_COOKIE

 -- Max Kellermann <mk@cm4all.com>  Thu, 20 May 2010 15:40:34 +0200

cm4all-beng-proxy (0.7.37) unstable; urgency=low

  * *-client: implement a socket leak detector
  * handler: initialize response header without translation server

 -- Max Kellermann <mk@cm4all.com>  Tue, 18 May 2010 12:05:11 +0200

cm4all-beng-proxy (0.7.36) unstable; urgency=low

  * http-client: fixed NULL pointer dereference
  * handler, response: removed duplicate request body destruction calls

 -- Max Kellermann <mk@cm4all.com>  Tue, 11 May 2010 17:16:36 +0200

cm4all-beng-proxy (0.7.35) unstable; urgency=low

  * {http,fcgi,ajp}-request: close the request body on abort
  * handler: set fake translation response on malformed URI

 -- Max Kellermann <mk@cm4all.com>  Mon, 10 May 2010 11:22:23 +0200

cm4all-beng-proxy (0.7.34) unstable; urgency=low

  * translate: check the UNTRUSTED packet
  * translation: added packet UNTRUSTED_PREFIX

 -- Max Kellermann <mk@cm4all.com>  Fri, 30 Apr 2010 19:14:37 +0200

cm4all-beng-proxy (0.7.33) unstable; urgency=low

  * merged release 0.7.27.1
  * fcache: don't continue storing in background
  * fcgi-client: re-add event after some input data has been read

 -- Max Kellermann <mk@cm4all.com>  Fri, 30 Apr 2010 11:31:08 +0200

cm4all-beng-proxy (0.7.32) unstable; urgency=low

  * response: generate the "Server" response header
  * response: support the Authentication-Info response header
  * response: support custom authentication pages
  * translation: support custom response headers

 -- Max Kellermann <mk@cm4all.com>  Tue, 27 Apr 2010 17:09:59 +0200

cm4all-beng-proxy (0.7.31) unstable; urgency=low

  * support HTTP authentication (RFC 2617)

 -- Max Kellermann <mk@cm4all.com>  Mon, 26 Apr 2010 17:26:42 +0200

cm4all-beng-proxy (0.7.30) unstable; urgency=low

  * fcgi-client: support responses without a body
  * {http,fcgi}-client: hold caller pool reference during callback

 -- Max Kellermann <mk@cm4all.com>  Fri, 23 Apr 2010 14:41:05 +0200

cm4all-beng-proxy (0.7.29) unstable; urgency=low

  * http-cache: added missing pool_unref() in memcached_miss()
  * pool: added checked pool references

 -- Max Kellermann <mk@cm4all.com>  Thu, 22 Apr 2010 15:45:48 +0200

cm4all-beng-proxy (0.7.28) unstable; urgency=low

  * fcgi-client: support response status
  * translate: malformed packets are fatal
  * http-cache: don't cache resources with very long URIs
  * memcached-client: increase the maximum key size to 32 kB

 -- Max Kellermann <mk@cm4all.com>  Thu, 15 Apr 2010 15:06:51 +0200

cm4all-beng-proxy (0.7.27.1) unstable; urgency=low

  * http-cache: added missing pool_unref() in memcached_miss()
  * http-cache: don't cache resources with very long URIs
  * memcached-client: increase the maximum key size to 32 kB
  * fork: properly handle partially filled output buffer
  * fork: re-add event after some input data has been read

 -- Max Kellermann <mk@cm4all.com>  Thu, 29 Apr 2010 15:30:21 +0200

cm4all-beng-proxy (0.7.27) unstable; urgency=low

  * session: use GLib's PRNG to generate session ids
  * session: seed the PRNG with /dev/random
  * response: log UNTRUSTED violation attempts
  * response: drop widget sessions when there is no focus

 -- Max Kellermann <mk@cm4all.com>  Fri, 09 Apr 2010 12:04:18 +0200

cm4all-beng-proxy (0.7.26) unstable; urgency=low

  * memcached-client: schedule read event before callback
  * istream-tee: continue with second output if first is closed

 -- Max Kellermann <mk@cm4all.com>  Sun, 28 Mar 2010 18:08:11 +0200

cm4all-beng-proxy (0.7.25) unstable; urgency=low

  * memcached-client: don't poll if socket is closed
  * fork: close file descriptor on input error
  * pool: don't check attachments in pool_trash()

 -- Max Kellermann <mk@cm4all.com>  Thu, 25 Mar 2010 13:28:01 +0100

cm4all-beng-proxy (0.7.24) unstable; urgency=low

  * memcached-client: release socket after splice

 -- Max Kellermann <mk@cm4all.com>  Mon, 22 Mar 2010 11:29:45 +0100

cm4all-beng-proxy (0.7.23) unstable; urgency=low

  * sink-header: support splice
  * memcached-client: support splice (response)
  * fcgi-client: recover correctly after send error
  * fcgi-client: support chunked request body
  * fcgi-client: basic splice support for the request body
  * http-cache: duplicate headers
  * {http,memcached}-client: check "direct" mode after buffer flush
  * cmdline: added option "fcgi_stock_limit"
  * python: auto-export function write_packet()
  * python: Response methods return self

 -- Max Kellermann <mk@cm4all.com>  Fri, 19 Mar 2010 13:28:35 +0100

cm4all-beng-proxy (0.7.22) unstable; urgency=low

  * python: re-add function write_packet()

 -- Max Kellermann <mk@cm4all.com>  Fri, 12 Mar 2010 12:27:21 +0100

cm4all-beng-proxy (0.7.21) unstable; urgency=low

  * ajp-client: handle EAGAIN from send()
  * python: install the missing sources

 -- Max Kellermann <mk@cm4all.com>  Thu, 11 Mar 2010 16:58:25 +0100

cm4all-beng-proxy (0.7.20) unstable; urgency=low

  * http-client: don't reinstate event when socket is closed
  * access-log: log the site name
  * python: removed unused function write_packet()
  * python: split the module beng_proxy.translation
  * python: allow overriding query string and param in absolute_uri()
  * python: moved absolute_uri() to a separate library

 -- Max Kellermann <mk@cm4all.com>  Thu, 11 Mar 2010 09:48:52 +0100

cm4all-beng-proxy (0.7.19) unstable; urgency=low

  * client-socket: translate EV_TIMEOUT to ETIMEDOUT
  * fork: refill the input buffer as soon as possible
  * delegate-client: implement an abortable event
  * pool: added assertions for libevent leaks
  * direct: added option "-s enable_splice=no"

 -- Max Kellermann <mk@cm4all.com>  Thu, 04 Mar 2010 17:34:56 +0100

cm4all-beng-proxy (0.7.18) unstable; urgency=low

  * args: reserve memory for the trailing null byte

 -- Max Kellermann <mk@cm4all.com>  Tue, 23 Feb 2010 17:46:04 +0100

cm4all-beng-proxy (0.7.17) unstable; urgency=low

  * translation: added the BOUNCE packet (variant of REDIRECT)
  * translation: change widget packet HOST to UNTRUSTED
  * translation: pass internal URI arguments to the translation server
  * handler: use the specified status with REDIRECT
  * python: added method Request.absolute_uri()

 -- Max Kellermann <mk@cm4all.com>  Tue, 23 Feb 2010 16:15:22 +0100

cm4all-beng-proxy (0.7.16) unstable; urgency=low

  * processor: separate trusted from untrusted widgets by host name
  * processor: mode=partition is deprecated
  * translate: fix DOCUMENT_ROOT handler for CGI/FASTCGI
  * fcgi-request: added JailCGI support

 -- Max Kellermann <mk@cm4all.com>  Fri, 19 Feb 2010 14:29:29 +0100

cm4all-beng-proxy (0.7.15) unstable; urgency=low

  * processor: unreference the caller pool in abort()
  * tcache: clear BASE on mismatch
  * fcgi-client: generate the Content-Length request header
  * fcgi-client: send the CONTENT_TYPE parameter
  * prototypes/translate.py: use FastCGI to run PHP

 -- Max Kellermann <mk@cm4all.com>  Thu, 11 Feb 2010 14:43:21 +0100

cm4all-beng-proxy (0.7.14) unstable; urgency=low

  * connection: drop connections when the limit is exceeded
  * resource-address: added BASE support
  * fcgi-client: check the request ID in response packets
  * http-client: check response body when request body is closed
  * html-escape: use the last ampersand before the semicolon
  * html-escape: support &apos;
  * processor: unescape widget parameter values

 -- Max Kellermann <mk@cm4all.com>  Fri, 29 Jan 2010 17:49:43 +0100

cm4all-beng-proxy (0.7.13) unstable; urgency=low

  * fcgi-request: duplicate socket path
  * fcgi-request: support ACTION
  * fcgi-client: provide SCRIPT_FILENAME
  * fcgi-client: append empty PARAMS packet
  * fcgi-client: try to read response before request is finished
  * fcgi-client: implement the STDERR packet
  * fcgi-client: support request headers and body
  * fcgi-stock: manage one socket per child process
  * fcgi-stock: unlink socket path after connect
  * fcgi-stock: redirect fd 1,2 to /dev/null
  * fcgi-stock: kill FastCGI processes after 5 minutes idle
  * translation: new packet PAIR for passing parameters to FastCGI

 -- Max Kellermann <mk@cm4all.com>  Thu, 14 Jan 2010 13:36:48 +0100

cm4all-beng-proxy (0.7.12) unstable; urgency=low

  * http-cache: unlock the cache item after successful revalidation
  * http-cache-memcached: pass the expiration time to memcached
  * sink-header: comprise pending data in method available()
  * header-forward: forward the Expires response header

 -- Max Kellermann <mk@cm4all.com>  Tue, 22 Dec 2009 16:18:49 +0100

cm4all-beng-proxy (0.7.11) unstable; urgency=low

  * {ajp,memcached}-client: fix dis\appearing event for duplex socket
  * memcached-client: handle EAGAIN after send()
  * memcached-client: release socket as early as possible
  * header-forward: don't forward Accept-Encoding if transformation is
    enabled
  * widget-http, inline-widget: check Content-Encoding before processing
  * file-handler: send "Vary: Accept-Encoding" for compressed response
  * header-forward: support duplicate headers
  * fcache: implemented a 60 seconds timeout
  * fcache: copy pointer to local variable before callback
  * event2: refresh timeout after event has occurred

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Dec 2009 16:45:24 +0100

cm4all-beng-proxy (0.7.10) unstable; urgency=low

  * http-{server,client}: fix disappearing event for duplex socket

 -- Max Kellermann <mk@cm4all.com>  Mon, 14 Dec 2009 15:46:25 +0100

cm4all-beng-proxy (0.7.9) unstable; urgency=low

  * http: "Expect" is a hop-by-hop header
  * http-server: send "100 Continue" unless request body closed
  * http-client: poll socket after splice
  * http-server: handle EAGAIN after splice
  * http-server: send a 417 response on unrecognized "Expect" request
  * response, widget-http: append filter id to resource tag
  * resource-tag: check for "Cache-Control: no-store"

 -- Max Kellermann <mk@cm4all.com>  Mon, 14 Dec 2009 13:05:15 +0100

cm4all-beng-proxy (0.7.8) unstable; urgency=low

  * http-body: support partial response in method available()
  * file-handler: support pre-compressed static files
  * fcache: honor the "Cache-Control: no-store" response header

 -- Max Kellermann <mk@cm4all.com>  Wed, 09 Dec 2009 15:49:25 +0100

cm4all-beng-proxy (0.7.7) unstable; urgency=low

  * parser: allow underscore in attribute names
  * processor: check "type" attribute before URI rewriting
  * http-client: start receiving before request is sent
  * http-client: try to read response after write error
  * http-client: deliver response body after headers are finished
  * http-client: release socket as early as possible
  * http-client: serve buffer after socket has been closed
  * istream-chunked: clear input stream in abort handler
  * growing-buffer: fix crash after close in "data" callback

 -- Max Kellermann <mk@cm4all.com>  Thu, 03 Dec 2009 13:09:57 +0100

cm4all-beng-proxy (0.7.6) unstable; urgency=low

  * istream-hold: return -2 if handler is not available yet
  * http, ajp, fcgi: use istream_hold on request body
  * http-client: implemented splicing the request body
  * response: added missing URI substitution

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Nov 2009 15:25:35 +0100

cm4all-beng-proxy (0.7.5) unstable; urgency=low

  * session: 64 bit session ids
  * session: allow arbitrary session id size (at compile-time)
  * debian: larger default log file (16 * 4MB)
  * debian: added package cm4all-beng-proxy-toi

 -- Max Kellermann <mk@cm4all.com>  Mon, 16 Nov 2009 15:51:24 +0100

cm4all-beng-proxy (0.7.4) unstable; urgency=low

  * measure the latency of external resources
  * widget-http: partially revert "don't query session if !stateful"

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 Nov 2009 15:06:03 +0100

cm4all-beng-proxy (0.7.3) unstable; urgency=low

  * uri-verify: don't reject double slash after first segment
  * hostname: allow the hyphen character
  * processor: allow processing without session
  * widget-http: don't query session if !stateful
  * request: disable session management for known bots
  * python: fixed AttributeError in __getattr__()
  * python: added method Response.process()
  * translation: added the response packets URI, HOST, SCHEME
  * translation: added header forward packets

 -- Max Kellermann <mk@cm4all.com>  Mon, 09 Nov 2009 16:40:27 +0100

cm4all-beng-proxy (0.7.2) unstable; urgency=low

  * fcache: close all caching connections on exit
  * istream-file: retry reading after EAGAIN
  * direct, istream-pipe: re-enable SPLICE_F_NONBLOCK
  * direct, istream-pipe: disable the SPLICE_F_MORE flag
  * http-client: handle EAGAIN after splice
  * http-client, header-writer: remove hop-by-hop response headers
  * response: optimized transformed response headers
  * handler: mangle CGI and FastCGI headers
  * header-forward: generate the X-Forwarded-For header
  * header-forward: add local host name to "Via" request header

 -- Max Kellermann <mk@cm4all.com>  Fri, 30 Oct 2009 13:41:02 +0100

cm4all-beng-proxy (0.7.1) unstable; urgency=low

  * file-handler: close the stream on "304 Not Modified"
  * pool: use assembler code only on gcc
  * cmdline: added option "--set tcp_stock_limit"
  * Makefile.am: enable the "subdir-objects" option

 -- Max Kellermann <mk@cm4all.com>  Thu, 22 Oct 2009 12:17:11 +0200

cm4all-beng-proxy (0.7) unstable; urgency=low

  * ajp-client: check if connection was closed during response callback
  * header-forward: log session id
  * istream: separate TCP splicing checks
  * istream-pipe: fix segmentation fault after incomplete direct transfer
  * istream-pipe: implement the "available" method
  * istream-pipe: allocate pipe only if handler supports it
  * istream-pipe: flush the pipe before reading from input
  * istream-pipe: reuse pipes in a stock
  * direct: support splice() from TCP socket to pipe
  * istream: direct() returns -3 if stream has been closed
  * hstock: don't destroy stocks while items are being created
  * tcp-stock: limit number of connections per host to 256
  * translate, http-client, ajp-client, cgi, http-cache: verify the HTTP
    response status
  * prototypes/translate.py: disallow "/../" and null bytes
  * prototypes/translate.py: added "/jail-delegate/" location
  * uri-parser: strict RFC 2396 URI verification
  * uri-parser: don't unescape the URI path
  * http-client, ajp-client: verify the request URI
  * uri-escape: unescape each character only once
  * http-cache: never use the memcached stock if caching is disabled
  * allow 8192 connections by default
  * allow 65536 file handles by default
  * added package cm4all-jailed-beng-proxy-delegate-helper

 -- Max Kellermann <mk@cm4all.com>  Wed, 21 Oct 2009 15:00:56 +0200

cm4all-beng-proxy (0.6.23) unstable; urgency=low

  * header-forward: log session information
  * prototypes/translate.py: added /cgi-bin/ location
  * http-server: disable keep-alive for HTTP/1.0 clients
  * http-server: don't send "Connection: Keep-Alive"
  * delegate-stock: clear the environment
  * delegate-stock: added jail support
  * delegate-client: reuse helper process after I/O error

 -- Max Kellermann <mk@cm4all.com>  Mon, 12 Oct 2009 17:29:35 +0200

cm4all-beng-proxy (0.6.22) unstable; urgency=low

  * istream-tee: clear both "enabled" flags in the eof/abort handler
  * istream-tee: fall back to first data() return value if second stream
    closed itself
  * http-cache: don't log body_abort after close

 -- Max Kellermann <mk@cm4all.com>  Thu, 01 Oct 2009 19:19:37 +0200

cm4all-beng-proxy (0.6.21) unstable; urgency=low

  * http-client: log more error messages
  * delegate-stock: added the DOCUMENT_ROOT environment variable
  * response, widget: accept "application/xhtml+xml"
  * cookie-server: allow square brackets in unquoted cookie values
    (violating RFC 2109 and RFC 2616)

 -- Max Kellermann <mk@cm4all.com>  Thu, 01 Oct 2009 13:55:40 +0200

cm4all-beng-proxy (0.6.20) unstable; urgency=low

  * stock: clear stock after 60 seconds idle
  * hstock: remove empty stocks
  * http-server, http-client, cgi: fixed off-by-one bug in header parser
  * istream-pipe: fix the direct() return value on error
  * istream-pipe: fix formula in range assertion
  * http-cache-memcached: implemented "remove"
  * handler: added FastCGI handler
  * fcgi-client: unref caller pool after socket release
  * fcgi-client: implemented response headers

 -- Max Kellermann <mk@cm4all.com>  Tue, 29 Sep 2009 14:07:13 +0200

cm4all-beng-proxy (0.6.19) unstable; urgency=low

  * http-client: release caller pool after socket release
  * memcached-client: release socket on marshalling error
  * stock: unref caller pool in abort handler
  * stock: lazy cleanup
  * http-cache: copy caller_pool to local variable

 -- Max Kellermann <mk@cm4all.com>  Thu, 24 Sep 2009 16:02:17 +0200

cm4all-beng-proxy (0.6.18) unstable; urgency=low

  * delegate-handler: support conditional GET and ranges
  * file-handler: fix suffix-byte-range-spec parser
  * delegate-helper: call open() with O_CLOEXEC|O_NOCTTY
  * istream-file: don't set FD_CLOEXEC if O_CLOEXEC is available
  * stock: hold caller pool during "get" operation
  * main: free balancer object during shutdown
  * memcached-client: enable socket timeout
  * delegate-stock: set FD_CLOEXEC on socket

 -- Max Kellermann <mk@cm4all.com>  Thu, 24 Sep 2009 10:50:53 +0200

cm4all-beng-proxy (0.6.17) unstable; urgency=low

  * tcp-stock: implemented a load balancer
  * python: accept address list in the ajp() method
  * http-server: added timeout for the HTTP request headers
  * response: close template when the content type is wrong
  * delegate-get: implemented response headers
  * delegate-get: provide status codes and error messages

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Sep 2009 15:36:57 +0200

cm4all-beng-proxy (0.6.16) unstable; urgency=low

  * tcp-stock: added support for bulldog-tyke
  * sink-buffer: close input if it's not used in the constructor
  * http-cache-memcached: close response body when deserialization fails
  * serialize: fix regression in serialize_uint64()

 -- Max Kellermann <mk@cm4all.com>  Tue, 15 Sep 2009 19:26:07 +0200

cm4all-beng-proxy (0.6.15) unstable; urgency=low

  * http-cache-choice: find more duplicates during cleanup
  * handler: added AJP handler
  * ajp-request: unref pool only on tcp_stock failure
  * ajp-client: prevent parser recursion
  * ajp-client: free request body when response is closed
  * ajp-client: reuse connection after END_RESPONSE packet
  * ajp-client: enable TCP_CORK while sending
  * istream-ajp-body: added a second "length" header field
  * ajp-client: auto-send empty request body chunk
  * ajp-client: register "write" event after GET_BODY_CHUNK packet
  * ajp-client: implemented request and response headers
  * http-cache-rfc: don't rewind tpool if called recursively

 -- Max Kellermann <mk@cm4all.com>  Fri, 11 Sep 2009 16:04:06 +0200

cm4all-beng-proxy (0.6.14) unstable; urgency=low

  * istream-tee: don't restart reading if already in progress

 -- Max Kellermann <mk@cm4all.com>  Thu, 03 Sep 2009 13:21:06 +0200

cm4all-beng-proxy (0.6.13) unstable; urgency=low

  * cookie-server: fix parsing multiple cookies
  * http-cache-memcached: clean up expired "choice" items
  * sink-gstring: use callback instead of public struct
  * istream-tee: restart reading when one output is closed

 -- Max Kellermann <mk@cm4all.com>  Wed, 02 Sep 2009 17:02:53 +0200

cm4all-beng-proxy (0.6.12) unstable; urgency=low

  * http-cache: don't attempt to remove cache items when the cache is disabled

 -- Max Kellermann <mk@cm4all.com>  Fri, 28 Aug 2009 15:40:48 +0200

cm4all-beng-proxy (0.6.11) unstable; urgency=low

  * http-cache-memcached: store HTTP status and response headers
  * http-cache-memcached: implemented flush (SIGHUP)
  * http-cache-memcached: support "Vary"
  * http-client: work around assertion failure in response_stream_close()

 -- Max Kellermann <mk@cm4all.com>  Thu, 27 Aug 2009 12:33:17 +0200

cm4all-beng-proxy (0.6.10) unstable; urgency=low

  * parser: finish tag before bailing out
  * http-request: allow URLs without path component
  * fork: clear event in read() method
  * istream-file: pass options O_CLOEXEC|O_NOCTTY to open()
  * response: check if the "Host" request header is valid

 -- Max Kellermann <mk@cm4all.com>  Tue, 18 Aug 2009 16:37:19 +0200

cm4all-beng-proxy (0.6.9) unstable; urgency=low

  * direct: disable SPLICE_F_NONBLOCK (temporary NFS EAGAIN workaround)

 -- Max Kellermann <mk@cm4all.com>  Mon, 17 Aug 2009 13:52:49 +0200

cm4all-beng-proxy (0.6.8) unstable; urgency=low

  * widget-http: close response body in error code path
  * http-cache: implemented memcached backend (--memcached-server)
  * processor: &c:base; returns the URI without scheme and host

 -- Max Kellermann <mk@cm4all.com>  Mon, 17 Aug 2009 12:29:19 +0200

cm4all-beng-proxy (0.6.7) unstable; urgency=low

  * file-handler: generate Expires from xattr user.MaxAge
  * cmdline: added option --set to configure:
    - max_connections
    - http_cache_size
    - filter_cache_size
    - translate_cache_size
  * flush caches on SIGHUP

 -- Max Kellermann <mk@cm4all.com>  Fri, 07 Aug 2009 11:41:10 +0200

cm4all-beng-proxy (0.6.6) unstable; urgency=low

  * added missing GLib build dependency
  * cgi-handler: set the "body_consumed" flag

 -- Max Kellermann <mk@cm4all.com>  Tue, 04 Aug 2009 09:53:01 +0200

cm4all-beng-proxy (0.6.5) unstable; urgency=low

  * shm: pass MAP_NORESERVE to mmap()
  * proxy-handler: support cookies
  * translation: added DISCARD_SESSION packet

 -- Max Kellermann <mk@cm4all.com>  Wed, 15 Jul 2009 18:00:33 +0200

cm4all-beng-proxy (0.6.4) unstable; urgency=low

  * http-client: don't read response body in HEAD requests
  * ajp-client: invoke the "abort" handler on error
  * filter-cache: lock cache items while they are served

 -- Max Kellermann <mk@cm4all.com>  Thu, 09 Jul 2009 14:36:14 +0200

cm4all-beng-proxy (0.6.3) unstable; urgency=low

  * http-server: implemented the DELETE method
  * http-server: refuse HTTP/0.9 requests
  * proxy-handler: send request body to template when no widget is focused
  * widget-request: pass original HTTP method to widget
  * session: automatically defragment sessions

 -- Max Kellermann <mk@cm4all.com>  Tue, 07 Jul 2009 16:57:22 +0200

cm4all-beng-proxy (0.6.2) unstable; urgency=low

  * lock: fixed race condition in debug flag updates
  * session: use rwlock for the session manager
  * proxy-handler: pass request headers to the remote HTTP server
  * proxy-handler: forward original Accept-Charset if processor is disabled
  * pipe: don't filter resources without a body
  * fcache: forward original HTTP status over "pipe" filter
  * cgi: support the "Status" line

 -- Max Kellermann <mk@cm4all.com>  Mon, 06 Jul 2009 16:38:26 +0200

cm4all-beng-proxy (0.6.1) unstable; urgency=low

  * session: consistently lock all session objects
  * rewrite-uri: check if widget_external_uri() returns NULL
  * widget-uri: don't generate the "path" argument when it's NULL
  * widget-uri: strip superfluous question mark from widget_base_address()
  * widget-uri: append parameters from the template first
  * widget-uri: re-add configured query string in widget_absolute_uri()
  * widget-uri: eliminate configured query string in widget_external_uri()
  * processor: don't consider session data for base=child and base=parent

 -- Max Kellermann <mk@cm4all.com>  Fri, 03 Jul 2009 15:52:01 +0200

cm4all-beng-proxy (0.6) unstable; urgency=low

  * inline-widget: check the widget HTTP response status
  * response: don't apply transformation on failed response
  * resource-address: include pipe arguments in filter cache key
  * handler: removed session redirect on the first request
  * http-cache: accept ETag response header instead of Last-Modified
  * filter-cache: don't require Last-Modified or Expires
  * file-handler: disable ETag only when processor comes first
  * file-handler: read ETag from xattr
  * pipe: generate new ETag for piped resource
  * session: purge sessions when shared memory is full
  * handler: don't enforce sessions for filtered responses

 -- Max Kellermann <mk@cm4all.com>  Tue, 30 Jun 2009 17:48:20 +0200

cm4all-beng-proxy (0.5.14) unstable; urgency=low

  * ajp-client: implemented request body
  * cookie-client: obey "max-age=0" properly
  * processor: forward the original HTTP status
  * response, widget-http: don't allow processing resource without body
  * widget-http: check the Content-Type before invoking processor
  * response: pass the "Location" response header
  * debian: added a separate -optimized-dbg package
  * added init script support for multiple ports (--port) and multiple listen
    (--listen) command line argumnents
  * translation: added the "APPEND" packet for command line arguments
  * pipe: support command line arguments

 -- Max Kellermann <mk@cm4all.com>  Mon, 29 Jun 2009 16:51:16 +0200

cm4all-beng-proxy (0.5.13) unstable; urgency=low

  * widget-registry: clear local_address in translate request
  * cmdline: added the "--listen" option

 -- Max Kellermann <mk@cm4all.com>  Wed, 24 Jun 2009 12:27:17 +0200

cm4all-beng-proxy (0.5.12) unstable; urgency=low

  * response: pass the "Location" response handler
  * added support for multiple listener ports

 -- Max Kellermann <mk@cm4all.com>  Tue, 23 Jun 2009 23:34:55 +0200

cm4all-beng-proxy (0.5.11) unstable; urgency=low

  * build with autotools
  * use libcm4all-socket, GLib
  * Makefile.am: support out-of-tree builds
  * added optimized Debian package
  * tcache: fixed wrong assignment in VARY=HOST
  * translation: added request packet LOCAL_ADDRESS

 -- Max Kellermann <mk@cm4all.com>  Tue, 23 Jun 2009 15:42:12 +0200

cm4all-beng-proxy (0.5.10) unstable; urgency=low

  * widget-http: assign the "address" variable

 -- Max Kellermann <mk@cm4all.com>  Mon, 15 Jun 2009 18:38:58 +0200

cm4all-beng-proxy (0.5.9) unstable; urgency=low

  * tcache: fixed typo in tcache_string_match()
  * tcache: support VARY=SESSION
  * translate: added the INVALIDATE response packet
  * cache, session: higher size limits
  * widget-uri: separate query_string from path_info
  * widget-uri: ignore widget parameters in widget_external_uri()

 -- Max Kellermann <mk@cm4all.com>  Mon, 15 Jun 2009 17:06:11 +0200

cm4all-beng-proxy (0.5.8) unstable; urgency=low

  * handler: fixed double free bug in translate_callback()

 -- Max Kellermann <mk@cm4all.com>  Sun, 14 Jun 2009 19:05:09 +0200

cm4all-beng-proxy (0.5.7) unstable; urgency=low

  * forward the Content-Disposition header
  * handler: assign new session to local variable, fix segfault
  * handler: don't dereference the NULL session

 -- Max Kellermann <mk@cm4all.com>  Sun, 14 Jun 2009 13:01:52 +0200

cm4all-beng-proxy (0.5.6) unstable; urgency=low

  * widget-http: send the "Via" request header instead of "X-Forwarded-For"
  * proxy-handler: send the "Via" request header
  * widget-request: check the "path" argument before calling uri_compress()

 -- Max Kellermann <mk@cm4all.com>  Tue, 09 Jun 2009 12:21:00 +0200

cm4all-beng-proxy (0.5.5) unstable; urgency=low

  * processor: allow specifying relative URI in c:base=child
  * widget-request: verify the "path" argument
  * widget: allocate address from widget's pool
  * widget-http: support multiple Set-Cookie response headers

 -- Max Kellermann <mk@cm4all.com>  Thu, 04 Jun 2009 15:10:15 +0200

cm4all-beng-proxy (0.5.4) unstable; urgency=low

  * implemented delegation of open() to a helper program
  * added the BASE translation packet, supported by the translation cache
  * deprecated c:mode=proxy
  * rewrite-uri: always enable focus in mode=partial
  * http-cache: don't cache resources with query string (RFC 2616 13.9)
  * http-cache: lock cache items while they are served

 -- Max Kellermann <mk@cm4all.com>  Thu, 28 May 2009 11:44:01 +0200

cm4all-beng-proxy (0.5.3) unstable; urgency=low

  * cgi: close request body on fork() failure
  * fork: added workaround for pipe-to-pipe splice()
  * http-cache: use cache entry when response ETag matches
  * cgi: loop in istream_cgi_read() to prevent blocking
  * cache: check for expired items once a minute
  * cache: optimize search for oldest item

 -- Max Kellermann <mk@cm4all.com>  Wed, 06 May 2009 13:23:46 +0200

cm4all-beng-proxy (0.5.2) unstable; urgency=low

  * added filter cache
  * header-parser: added missing range check in header_parse_line()
  * fork: added event for writing to the child process
  * fork: don't splice() from a pipe
  * response: don't pass request body to unfocused processor
  * added filter type "pipe"

 -- Max Kellermann <mk@cm4all.com>  Wed, 29 Apr 2009 13:24:26 +0200

cm4all-beng-proxy (0.5.1) unstable; urgency=low

  * processor: fixed base=child assertion failure
  * handler: close request body if it was not consumed
  * static-file: generate Last-Modified and ETag response headers
  * static-file: obey the Content-Type provided by the translation server
  * static-file: get Content-Type from extended attribute
  * http-cache: use istream_null when cached resource is empty

 -- Max Kellermann <mk@cm4all.com>  Mon, 27 Apr 2009 10:00:20 +0200

cm4all-beng-proxy (0.5) unstable; urgency=low

  * processor: accept c:mode/c:base attributes in any order
  * processor: removed alternative (anchor) rewrite syntax

 -- Max Kellermann <mk@cm4all.com>  Mon, 20 Apr 2009 22:04:19 +0200

cm4all-beng-proxy (0.4.10) unstable; urgency=low

  * processor: lift length limitation for widget parameters
  * translate: abort if a packet is too large
  * translate: support MAX_AGE for the whole response
  * hashmap: fix corruption of slot chain in hashmap_remove_value()

 -- Max Kellermann <mk@cm4all.com>  Fri, 17 Apr 2009 13:02:50 +0200

cm4all-beng-proxy (0.4.9) unstable; urgency=low

  * http-cache: explicitly start reading into cache
  * cgi: clear "headers" variable before publishing the response
  * translate: use DOCUMENT_ROOT as CGI parameter

 -- Max Kellermann <mk@cm4all.com>  Mon, 06 Apr 2009 16:21:57 +0200

cm4all-beng-proxy (0.4.8) unstable; urgency=low

  * translate: allow ADDRESS packets in AJP addresses
  * translate: initialize all fields of a FastCGI address
  * http-cache: close all caching connections on exit
  * processor: don't rewrite SCRIPT SRC attribute when proxying

 -- Max Kellermann <mk@cm4all.com>  Thu, 02 Apr 2009 15:45:46 +0200

cm4all-beng-proxy (0.4.7) unstable; urgency=low

  * http-server: use istream_null for empty request body
  * parser: check for trailing slash only in TAG_OPEN tags
  * parser: added support for XML Processing Instructions
  * processor: implemented XML Processing Instruction "cm4all-rewrite-uri"
  * uri-escape: escape the slash character
  * cache: remove all matching items in cache_remove()
  * http-cache: lock cache items while holding a reference

 -- Max Kellermann <mk@cm4all.com>  Thu, 02 Apr 2009 12:02:53 +0200

cm4all-beng-proxy (0.4.6) unstable; urgency=low

  * file_handler: fixed logic error in If-Modified-Since check
  * date: return UTC time stamp in http_date_parse()
  * cache: continue search after item was invalidated
  * cache: remove the correct cache item
  * istream-chunked: work around invalid assertion failure
  * istream-subst: fixed corruption after partial match

 -- Max Kellermann <mk@cm4all.com>  Wed, 25 Mar 2009 15:03:10 +0100

cm4all-beng-proxy (0.4.5) unstable; urgency=low

  * http-server: assume keep-alive is enabled on HTTP 1.1
  * http-client: unregister EV_READ when the buffer is full
  * translation: added QUERY_STRING packet
  * processor: optionally parse base/mode from URI

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Mar 2009 13:04:25 +0100

cm4all-beng-proxy (0.4.4) unstable; urgency=low

  * forward Accept-Language request header to the translation server
  * translate: added the USER_AGENT request packet
  * session: obey the USER/MAX_AGE setting
  * use libcm4all-inline-dev in libcm4all-beng-proxy-dev
  * added pkg-config file for libcm4all-beng-proxy-dev
  * updated python-central dependencies
  * processor: parse c:base/c:mode attributes in PARAM tags

 -- Max Kellermann <mk@cm4all.com>  Wed, 11 Mar 2009 09:43:48 +0100

cm4all-beng-proxy (0.4.3) unstable; urgency=low

  * processor: rewrite URI in LINK tags
  * processor: rewrite URI in PARAM tags
  * use splice() from glibc 2.7
  * translate: added VARY response packet
  * build documentation with texlive

 -- Max Kellermann <mk@cm4all.com>  Wed, 04 Mar 2009 09:53:56 +0100

cm4all-beng-proxy (0.4.2) unstable; urgency=low

  * hashmap: fix corruption in slot chain
  * use monotonic clock to calculate expiry times
  * processor: rewrite URIs in the EMBED, VIDEO, AUDIO tags

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Feb 2009 17:14:48 +0100

cm4all-beng-proxy (0.4.1) unstable; urgency=low

  * translate: clear client->transformation
  * handler: check for translation errors
  * http-server: fixed assertion failure during shutdown
  * http-server: send "Keep-Alive" response header
  * worker: after fork(), call event_reinit() in the parent process
  * added valgrind build dependency
  * build with Debian's libevent-1.4 package

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 Feb 2009 11:48:53 +0100

cm4all-beng-proxy (0.4) unstable; urgency=low

  * added support for transformation views
    - in the JavaScript API, mode=proxy is now deprecated
  * http-cache: fix segfault when request_headers==NULL
  * http-cache: store multiple (varying) versions of a resource
  * http-cache: use the "max-age" cache-control response

 -- Max Kellermann <mk@cm4all.com>  Fri, 30 Jan 2009 13:29:43 +0100

cm4all-beng-proxy (0.3.9) unstable; urgency=low

  * http-client: assume keep-alive is enabled on HTTP 1.1
  * processor: use configured/session path-info for mode=child URIs

 -- Max Kellermann <mk@cm4all.com>  Tue, 27 Jan 2009 13:07:51 +0100

cm4all-beng-proxy (0.3.8) unstable; urgency=low

  * processor: pass Content-Type and Content-Language headers from
    template
  * http-client: allow chunked response body without keep-alive

 -- Max Kellermann <mk@cm4all.com>  Fri, 23 Jan 2009 13:02:42 +0100

cm4all-beng-proxy (0.3.7) unstable; urgency=low

  * istream_subst: exit the loop if state==INSERT
  * istream_iconv: check if the full buffer could be flushed
  * worker: don't reinitialize session manager during shutdown

 -- Max Kellermann <mk@cm4all.com>  Thu, 15 Jan 2009 10:39:47 +0100

cm4all-beng-proxy (0.3.6) unstable; urgency=low

  * processor: ignore closing </header>
  * widget-http: now really don't check content-type in frame parents
  * parser: skip comments
  * processor: implemented c:base="parent"
  * processor: added "c:" prefix to c:widget child elements
  * processor: renamed the "c:param" element to "c:parameter"

 -- Max Kellermann <mk@cm4all.com>  Thu, 08 Jan 2009 11:17:29 +0100

cm4all-beng-proxy (0.3.5) unstable; urgency=low

  * widget-http: don't check content-type in frame parents
  * istream-subst: allow null bytes in the input stream
  * js: added the "translate" parameter for passing values to the
    translation server
  * rewrite-uri: refuse to rewrite a frame URI without widget id

 -- Max Kellermann <mk@cm4all.com>  Mon, 05 Jan 2009 16:46:32 +0100

cm4all-beng-proxy (0.3.4) unstable; urgency=low

  * processor: added support for custom widget request headers
  * http-cache: obey the "Vary" response header
  * http-cache: pass the new http_cache_info object when testing a cache
    item

 -- Max Kellermann <mk@cm4all.com>  Tue, 30 Dec 2008 15:46:44 +0100

cm4all-beng-proxy (0.3.3) unstable; urgency=low

  * processor: grew widget parameter buffer to 512 bytes
  * widget-resolver: clear widget->resolver on abort
  * cgi: clear the input's handler in cgi_async_abort()
  * widget-stream: use istream_hold (reverts r4171)

 -- Max Kellermann <mk@cm4all.com>  Fri, 05 Dec 2008 14:43:05 +0100

cm4all-beng-proxy (0.3.2) unstable; urgency=low

  * processor: free memory before calling embed_frame_widget()
  * processor: allocate query string from the widget pool
  * processor: removed the obsolete widget attributes "tag" and "style"
  * parser: hold a reference to the pool

 -- Max Kellermann <mk@cm4all.com>  Mon, 01 Dec 2008 14:15:38 +0100

cm4all-beng-proxy (0.3.1) unstable; urgency=low

  * http-client: remove Transfer-Encoding and Content-Length from response
    headers
  * http-client: don't read body after invoke_response()
  * fork: retry splice() after EAGAIN
  * fork: don't close input when splice() fails
  * cgi: abort the response handler when the stdin stream fails
  * istream_file, istream_pipe, fork, client_socket, listener: fixed file
    descriptor leaks
  * processor: hold a reference to the caller's pool
  * debian/rules: enabled test suite

 -- Max Kellermann <mk@cm4all.com>  Thu, 27 Nov 2008 16:01:16 +0100

cm4all-beng-proxy (0.3) unstable; urgency=low

  * implemented widget filters
  * translate: initialize all fields of a CGI address
  * fork: read request body on EAGAIN
  * fork: implemented the direct() method with splice()
  * python: added class Response
  * prototypes/translate.py:
    - support "filter"
    - support "content_type"
  * demo: added widget filter demo

 -- Max Kellermann <mk@cm4all.com>  Wed, 26 Nov 2008 16:27:29 +0100

cm4all-beng-proxy (0.2) unstable; urgency=low

  * don't quote text/xml widgets
  * widget-resolver: pass widget_pool to widget_class_lookup()
  * widget-registry: allocate widget_class from widget_pool
  * widget-stream: eliminated the async operation proxy, because the
    operation cannot be aborted before the constructor returns
  * widget-stream: don't clear the "delayed" stream in the response() callback
  * rewrite-uri: trigger istream_read(delayed) after istream_delayed_set()
  * doc: clarified XSLT integration

 -- Max Kellermann <mk@cm4all.com>  Tue, 25 Nov 2008 15:28:54 +0100

cm4all-beng-proxy (0.1) unstable; urgency=low

  * initial release

 -- Max Kellermann <mk@cm4all.com>  Mon, 17 Nov 2008 11:59:36 +0100
