cm4all-beng-proxy (17.0.23) unstable; urgency=low

  * 

 --   

cm4all-beng-proxy (17.0.22) unstable; urgency=low

  * was: optimistic wait for response length
  * was: fix memory leak

 -- Max Kellermann <mk@cm4all.com>  Wed, 09 Sep 2020 11:05:22 +0200

cm4all-beng-proxy (17.0.21) unstable; urgency=low

  * merge release 16.25
  * bp: fix crash on invalid range request

 -- Max Kellermann <mk@cm4all.com>  Mon, 07 Sep 2020 15:42:23 +0200

cm4all-beng-proxy (17.0.20) unstable; urgency=low

  * merge release 16.23
  * bp: fix BREAK_CHAIN crash bug
  * bp: fix FILTER_NO_BODY crash bug

 -- Max Kellermann <mk@cm4all.com>  Tue, 01 Sep 2020 16:28:13 +0200

cm4all-beng-proxy (17.0.19) unstable; urgency=low

  * bp: support CHAIN with FILTER
  * bp: support CHAIN with STATUS/MESSAGE
  * translation: add packet FILTER_NO_BODY

 -- Max Kellermann <mk@cm4all.com>  Mon, 24 Aug 2020 16:26:21 +0200

cm4all-beng-proxy (17.0.18) unstable; urgency=low

  * translation: add packets CHAIN, CHAIN_HEADER, BREAK_CHAIN
  * spawn: fix seccomp regression

 -- Max Kellermann <mk@cm4all.com>  Fri, 21 Aug 2020 14:48:46 +0200

cm4all-beng-proxy (17.0.17) unstable; urgency=low

  * merge release 16.22
  * http_server: fix stall bug
  * was: fix stall bug
  * spawn: enable NO_NEW_PRIVS only if enabled by translation server

 -- Max Kellermann <mk@cm4all.com>  Tue, 18 Aug 2020 19:01:25 +0200

cm4all-beng-proxy (17.0.16) unstable; urgency=low

  * merge release 16.21
  * bp: improve error message on unexpected DEFER
  * spawn: allow multiple MOUNT_TMPFS

 -- Max Kellermann <mk@cm4all.com>  Thu, 23 Jul 2020 12:29:37 +0200

cm4all-beng-proxy (17.0.15) unstable; urgency=low

  * merge release 16.20
  * certdb: import-account obtains contact email address

 -- Max Kellermann <mk@cm4all.com>  Thu, 09 Jul 2020 17:53:39 +0200

cm4all-beng-proxy (17.0.14) unstable; urgency=low

  * bp: fix REQUEST_URI_VERBATIM
  * certdb: fix compatibility with jsoncpp 1.9
  * certdb: add command "import-account"
  * OpenSSL 3.0.0 compatibility

 -- Max Kellermann <mk@cm4all.com>  Mon, 22 Jun 2020 20:08:59 +0200

cm4all-beng-proxy (17.0.13) unstable; urgency=low

  * debian: link libc++ statically
  * use std::filesystem instead of Boost

 -- Max Kellermann <mk@cm4all.com>  Mon, 15 Jun 2020 19:08:38 +0200

cm4all-beng-proxy (17.0.12) unstable; urgency=low

  * merge release 16.18
  * bp: remove support for multiple worker processes
  * translation: fix bogus "Invalid base address" error
  * remove several obsolete command-line options
  * debian: build with clang-10 and enable C++20 coroutines

 -- Max Kellermann <mk@cm4all.com>  Mon, 15 Jun 2020 14:25:36 +0200

cm4all-beng-proxy (17.0.11) unstable; urgency=low

  * merge release 16.17
  * switch to C++20
  * bp: support SSL client certificates (setting "ssl_verify")
  * bp: fix crash when closing HTTP/2 connection
  * translation: add option to enable/disable the child_error_logger
  * spawn: drop JailCGI/Refence support
  * certdb: allow --workshop-control before --progress
  * certdb: rename "new-reg" to "new-account"
  * certdb: manage ACME account keys in a new database table

 -- Max Kellermann <mk@cm4all.com>  Mon, 08 Jun 2020 18:19:21 +0200

cm4all-beng-proxy (17.0.10) unstable; urgency=low

  * lb: fix assertion failure
  * fcgi: fix STDERR_PATH_JAILED with child_error_logger
  * fcgi: redirect the FastCGI error stream into STDERR_PATH_JAILED

 -- Max Kellermann <mk@cm4all.com>  Tue, 26 May 2020 16:17:21 +0200

cm4all-beng-proxy (17.0.9) unstable; urgency=low

  * fcgi: fix STDERR_PATH_JAILED
  * spawn: allow configuring an open-ended "allow_user" range

 -- Max Kellermann <mk@cm4all.com>  Sun, 24 May 2020 12:01:56 +0200

cm4all-beng-proxy (17.0.8) unstable; urgency=low

  * certdb: print only the account location in `acme new-reg`

 -- Max Kellermann <mk@cm4all.com>  Thu, 21 May 2020 09:53:09 +0200

cm4all-beng-proxy (17.0.7) unstable; urgency=low

  * merge release 16.16
  * bp: use RESOLVE_BENEATH to restrict symlinks to the base directory
  * translation: add packet DEFER to support multiple translation servers
  * certdb: don't require beng-lb configuration for "acme new-reg"
  * certdb: add command "acme get-account"
  * certdb: print ACME account status

 -- Max Kellermann <mk@cm4all.com>  Wed, 20 May 2020 19:10:35 +0200

cm4all-beng-proxy (17.0.6) unstable; urgency=low

  * merge release 16.15
  * require Linux kernel 4.11 (Debian Buster)
  * bp: read from files using io_uring
  * certdb: fix dns-01 key authorization bug
  * certdb: fix concurrent authorizations on same domain
  * certdb: changed the `--dns-txt-program` interface

 -- Max Kellermann <mk@cm4all.com>  Mon, 11 May 2020 14:52:51 +0200

cm4all-beng-proxy (17.0.5) unstable; urgency=low

  * merge release 16.14

 -- Max Kellermann <mk@cm4all.com>  Wed, 29 Apr 2020 16:04:02 +0200

cm4all-beng-proxy (17.0.4) unstable; urgency=low

  * merge release 16.12
  * certdb: support ACME wild card requests using dns-01

 -- Max Kellermann <mk@cm4all.com>  Tue, 28 Apr 2020 19:16:52 +0200

cm4all-beng-proxy (17.0.3) unstable; urgency=low

  * merge release 16.11

 -- Max Kellermann <mk@cm4all.com>  Wed, 22 Apr 2020 17:58:14 +0200

cm4all-beng-proxy (17.0.2) unstable; urgency=low

  * fix two HTTP/2 related crashes
  * bp: support incoming HTTP/2 connections via TLS-ALPN
  * processor: fix assertion failure

 -- Max Kellermann <mk@cm4all.com>  Thu, 19 Mar 2020 20:19:58 +0100

cm4all-beng-proxy (17.0.1) unstable; urgency=low

  * bp: advertise Zeroconf IPv6 wildcard listeners as IPv4 as well
  * lb: allow limiting Zeroconf search to an interface
  * lb: support incoming HTTP/2 connections via TLS-ALPN
  * certdb: remove obsolete challenge method "sni-01"
  * certdb: implement ACMEv2

 -- Max Kellermann <mk@cm4all.com>  Wed, 18 Mar 2020 16:54:20 +0100

cm4all-beng-proxy (16.26) unstable; urgency=low

  * bp: fix assertion failure

 -- Max Kellermann <mk@cm4all.com>  Tue, 08 Sep 2020 22:13:57 +0200

cm4all-beng-proxy (16.25) unstable; urgency=low

  * was: fix assertion failure
  * http_client: fix crash bug

 -- Max Kellermann <mk@cm4all.com>  Mon, 07 Sep 2020 15:25:06 +0200

cm4all-beng-proxy (16.24) unstable; urgency=low

  * bp: fix assertion failure

 -- Max Kellermann <mk@cm4all.com>  Wed, 02 Sep 2020 12:07:03 +0200

cm4all-beng-proxy (16.23) unstable; urgency=low

  * cgi: fix use-after-free bug
  * http2: fix four stall bugs
  * http2: fix use-after-free bug

 -- Max Kellermann <mk@cm4all.com>  Tue, 01 Sep 2020 13:45:30 +0200

cm4all-beng-proxy (16.22) unstable; urgency=low

  * fcgi: fix use-after-free bug
  * was: fix endless busy loop after cancellation

 -- Max Kellermann <mk@cm4all.com>  Tue, 18 Aug 2020 13:31:39 +0200

cm4all-beng-proxy (16.21) unstable; urgency=low

  * was: fix crash bug
  * lhttp: fix widget support

 -- Max Kellermann <mk@cm4all.com>  Tue, 21 Jul 2020 13:50:10 +0200

cm4all-beng-proxy (16.20) unstable; urgency=low

  * fcache: fix use-after-free bug
  * http_cache: fix two use-after-free bugs
  * was: fix use-after-free bug
  * was: fix recovery after receiving PREMATURE

 -- Max Kellermann <mk@cm4all.com>  Thu, 09 Jul 2020 17:39:17 +0200

cm4all-beng-proxy (16.19) unstable; urgency=low

  * http_client: fix crash bug
  * OpenSSL 3.0.0 compatibility

 -- Max Kellermann <mk@cm4all.com>  Tue, 30 Jun 2020 16:38:47 +0200

cm4all-beng-proxy (16.18) unstable; urgency=low

  * http2: fix two stall bugs

 -- Max Kellermann <mk@cm4all.com>  Mon, 15 Jun 2020 14:14:33 +0200

cm4all-beng-proxy (16.17) unstable; urgency=low

  * spawn: fix crash bug
  * fcgi: fix STDERR_PATH_JAILED
  * lb/certdb: fix cache update bug

 -- Max Kellermann <mk@cm4all.com>  Wed, 03 Jun 2020 12:49:42 +0200

cm4all-beng-proxy (16.16) unstable; urgency=low

  * http_cache: update expiry from "304" responses
  * http_cache: support multiple "Vary" response headers
  * bp: fix memory leak after UNTRUSTED error

 -- Max Kellermann <mk@cm4all.com>  Wed, 20 May 2020 14:56:17 +0200

cm4all-beng-proxy (16.15) unstable; urgency=low

  * http_server: fix crash when garbage is received after end chunk

 -- Max Kellermann <mk@cm4all.com>  Wed, 06 May 2020 15:49:53 +0200

cm4all-beng-proxy (16.14) unstable; urgency=low

  * http_client: fix use-after-free bug (16.12 regression)

 -- Max Kellermann <mk@cm4all.com>  Wed, 29 Apr 2020 14:05:43 +0200

cm4all-beng-proxy (16.13) unstable; urgency=low

  * spawn: fix compatibility with kernels without clone3()
  * http_client: fix missing request headers (16.12 regression)

 -- Max Kellermann <mk@cm4all.com>  Wed, 29 Apr 2020 13:27:17 +0200

cm4all-beng-proxy (16.12) unstable; urgency=low

  * lhttp: retry after temporary failures
  * spawn: forbid the clone3() system call

 -- Max Kellermann <mk@cm4all.com>  Tue, 28 Apr 2020 18:50:47 +0200

cm4all-beng-proxy (16.11) unstable; urgency=low

  * bp: discard LHTTP processes on memory shortage
  * bp: fix memory leak
  * bp: fix "Malformed URI" response status (and don't log it)
  * bp: retry after I/O error on outgoing HTTP connection
  * lb: lower log level for translation server errors
  * lb/systemd: implement "reload"
  * spawn: higher OOM score adjustment for jailed processes

 -- Max Kellermann <mk@cm4all.com>  Wed, 22 Apr 2020 14:17:23 +0200

cm4all-beng-proxy (16.10) unstable; urgency=low

  * add listener option "v6only"

 -- Max Kellermann <mk@cm4all.com>  Tue, 24 Mar 2020 17:01:12 +0100

cm4all-beng-proxy (16.9) unstable; urgency=low

  * merge release 15.35

 -- Max Kellermann <mk@cm4all.com>  Mon, 16 Mar 2020 17:08:00 +0100

cm4all-beng-proxy (16.8) unstable; urgency=low

  * control: fix "stats" reply
  * ssl: fix busy loop during stalled read

 -- Max Kellermann <mk@cm4all.com>  Wed, 04 Mar 2020 14:08:06 +0100

cm4all-beng-proxy (16.7) unstable; urgency=low

  * stopwatch: show time since root initialization
  * translation: record connect event (stopwatch)
  * http_server: record cancel event (stopwatch)
  * bp: fix three crash bugs
  * http_client: fix two crash bugs

 -- Max Kellermann <mk@cm4all.com>  Tue, 03 Mar 2020 11:57:18 +0100

cm4all-beng-proxy (16.6) unstable; urgency=low

  * bp: advertise Zeroconf IPv6 wildcard listeners as IPv4 as well
  * lb: fix crash bug

 -- Max Kellermann <mk@cm4all.com>  Wed, 26 Feb 2020 14:25:16 +0100

cm4all-beng-proxy (16.5) unstable; urgency=low

  * bp: fix seven use-after-free crash bugs

 -- Max Kellermann <mk@cm4all.com>  Wed, 19 Feb 2020 17:05:44 +0100

cm4all-beng-proxy (16.4) unstable; urgency=low

  * bp/CssProcessor: fix use-after-free crash bug

 -- Max Kellermann <mk@cm4all.com>  Fri, 14 Feb 2020 19:48:38 +0100

cm4all-beng-proxy (16.3) unstable; urgency=low

  * merge release 15.33
  * fix resolver bug causing "Address already in use"
  * fix two crash bugs
  * fix "spawner gone, emergency"
  * bp: reduce FastCGI and LHTTP idle process limits
  * was, fcgi, lhttp: increase idle timeouts for non-jailed processes

 -- Max Kellermann <mk@cm4all.com>  Thu, 30 Jan 2020 23:18:17 +0100

cm4all-beng-proxy (16.2) unstable; urgency=low

  * bp: fix use-after-free bug

 -- Max Kellermann <mk@cm4all.com>  Wed, 29 Jan 2020 12:38:55 +0100

cm4all-beng-proxy (16.1) unstable; urgency=low

  * bp: limit widget request concurrency to 32
  * bp/processor: fix use-after-free buf

 -- Max Kellermann <mk@cm4all.com>  Fri, 24 Jan 2020 20:12:43 +0100

cm4all-beng-proxy (16.0.8) unstable; urgency=low

  * merge release 15.31
  * bp: convert SSL/TLS errors to "502 Bad Gateway"
  * bp/filter: fix use-after-free bug
  * control: rename STOPWATCH to STOPWATCH_PIPE
  * make Zeroconf, HTTP2, NFS, systemd and WAS build-time optional

 -- Max Kellermann <mk@cm4all.com>  Thu, 16 Jan 2020 18:34:58 +0100

cm4all-beng-proxy (16.0.7) unstable; urgency=low

  * merge release 15.29
  * use getrandom() instead of /dev/urandom if available
  * HTTP/2 client
  * ssl: support logging session keys for Wireshark
  * bp/processor: fix use-after-free bug

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 Dec 2019 14:25:40 +0100

cm4all-beng-proxy (16.0.6) unstable; urgency=low

  * python/control/client: fix typo
  * python: add Python 3 package
  * debian/control: add missing dependency on python-future

 -- Max Kellermann <mk@cm4all.com>  Tue, 12 Nov 2019 20:20:36 +0100

cm4all-beng-proxy (16.0.5) unstable; urgency=low

  * merge release 15.26
  * spawn: support Memory{Min,Low,High,SwapMax}

 -- Max Kellermann <mk@cm4all.com>  Wed, 06 Nov 2019 14:12:53 +0100

cm4all-beng-proxy (16.0.4) unstable; urgency=low

  * bp: support the "SameSite" attribute in the session cookie

 -- Max Kellermann <mk@cm4all.com>  Thu, 17 Oct 2019 22:23:55 +0200

cm4all-beng-proxy (16.0.3) unstable; urgency=low

  * bp: optimized widget class cache
  * http_client: fix use-after-free bug
  * was_client: fix use-after-free bug
  * translation: fix use-after-free crash bug

 -- Max Kellermann <mk@cm4all.com>  Thu, 17 Oct 2019 13:16:31 +0200

cm4all-beng-proxy (16.0.2) unstable; urgency=low

  * fix several crash bugs

 -- Max Kellermann <mk@cm4all.com>  Mon, 07 Oct 2019 12:03:31 +0200

cm4all-beng-proxy (16.0.1) unstable; urgency=low

  * remove the obsolete Bulldog support
  * bp: move the spawner into cm4all.slice
  * bp: support time units in session_idle_timeout
  * bp: add setting "http_cache_obey_no_cache"
  * bp: write the session file atomically
  * bp: add Cross-Site Request Forgery blocker
  * bp: structured stopwatch output
  * bp: read stopwatch output using control client,
    deprecating the "stopwatch" setting
  * control: add packet FLUSH_FILTER_CACHE
  * control: new control client
  * translation: add packet CACHE_TAG
  * log: rate limit option for the child error logger
  * systemd: don't create /var/run/cm4all
  * debian: remove packages cm4all-beng-proxy-optimized, cm4all-beng-proxy-toi
  * debian: use debhelper 12

 -- Max Kellermann <mk@cm4all.com>  Fri, 27 Sep 2019 14:09:41 +0200

cm4all-beng-proxy (15.35) unstable; urgency=low

  * ssl: require TLS 1.2 or newer
  * ssl: disable insecure CBC ciphers

 -- Max Kellermann <mk@cm4all.com>  Mon, 16 Mar 2020 16:39:51 +0100

cm4all-beng-proxy (15.34) unstable; urgency=low

  * bot: add AspiegelBot (Huawei)
  * ssl: fix busy loop during stalled read
  * http_client: fix two crash bugs

 -- Max Kellermann <mk@cm4all.com>  Fri, 13 Mar 2020 13:37:48 +0100

cm4all-beng-proxy (15.33) unstable; urgency=low

  * bp/processor: escape substituted entity values using the URI syntax

 -- Max Kellermann <mk@cm4all.com>  Thu, 30 Jan 2020 16:29:36 +0100

cm4all-beng-proxy (15.32) unstable; urgency=low

  * bp/processor: escape "&c:XXX;" entity values

 -- Max Kellermann <mk@cm4all.com>  Thu, 30 Jan 2020 09:40:09 +0100

cm4all-beng-proxy (15.31) unstable; urgency=low

  * lhttp: use the configured concurrency for the listener backlog
  * fcache: cache "204 No Content" responses
  * fcache: fix memory leak

 -- Max Kellermann <mk@cm4all.com>  Tue, 14 Jan 2020 14:03:35 +0100

cm4all-beng-proxy (15.30) unstable; urgency=low

  * certdb: fix use-after-free bug after database disconnect
  * certdb: schedule database reconnect after reconnect failure

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Dec 2019 19:58:06 +0100

cm4all-beng-proxy (15.29) unstable; urgency=low

  * js: use `let` instead of `var` for local variables
  * spawn: show cgroup in init process name
  * remove "session" URI parameter, require cookies

 -- Max Kellermann <mk@cm4all.com>  Fri, 06 Dec 2019 12:00:01 +0100

cm4all-beng-proxy (15.28) unstable; urgency=low

  * bot: add adscanner, DotBot, serpstatbot
  * {http,was,fcgi,cgi}_client: validate response headers
  * "Base mismatch" throws status 502, not 400
  * fix assertion failure after base mismatch with INTERNAL_REDIRECT

 -- Max Kellermann <mk@cm4all.com>  Tue, 03 Dec 2019 20:13:36 +0100

cm4all-beng-proxy (15.27) unstable; urgency=low

  * ssl: fix crash due to race condition after "close notify" alert
  * debian: remove package cm4all-beng-proxy-optimized
  * debian: use debhelper 12

 -- Max Kellermann <mk@cm4all.com>  Wed, 20 Nov 2019 14:02:28 +0100

cm4all-beng-proxy (15.26) unstable; urgency=low

  * bp: allow Content-Length response header in HEAD requests
  * was: fix busy loop
  * ssl: fix race condition

 -- Max Kellermann <mk@cm4all.com>  Wed, 06 Nov 2019 13:54:22 +0100

cm4all-beng-proxy (15.25) unstable; urgency=low

  * spawn: fix orphaned LHTTP processes after EAGAIN on spawner socket
  * lb/certdb: don't reconnect to database after non-fatal error

 -- Max Kellermann <mk@cm4all.com>  Mon, 28 Oct 2019 14:19:52 +0100

cm4all-beng-proxy (15.24) unstable; urgency=low

  * lb: show listener name in SSL setup errors
  * lb: check if configured SSL certificate matches the key
  * control: recognize unbound local clients

 -- Max Kellermann <mk@cm4all.com>  Mon, 21 Oct 2019 17:26:32 +0200

cm4all-beng-proxy (15.23) unstable; urgency=low

  * certdb: fix path vulnerability in ACME "http-01" implementation

 -- Max Kellermann <mk@cm4all.com>  Fri, 27 Sep 2019 13:27:01 +0200

cm4all-beng-proxy (15.22) unstable; urgency=low

  * lb: fix TLS session resumption with client certificate

 -- Max Kellermann <mk@cm4all.com>  Fri, 06 Sep 2019 13:40:53 +0200

cm4all-beng-proxy (15.21) unstable; urgency=low

  * was: fix memory leak

 -- Max Kellermann <mk@cm4all.com>  Wed, 26 Jun 2019 13:04:13 +0200

cm4all-beng-proxy (15.20) unstable; urgency=low

  * was: fix memory leak

 -- Max Kellermann <mk@cm4all.com>  Fri, 07 Jun 2019 12:40:24 +0200

cm4all-beng-proxy (15.19) unstable; urgency=low

  * systemd: raise TasksMax to 50%

 -- Max Kellermann <mk@cm4all.com>  Tue, 04 Jun 2019 13:36:31 +0200

cm4all-beng-proxy (15.18) unstable; urgency=low

  * http_client: fix assertion failure

 -- Max Kellermann <mk@cm4all.com>  Wed, 08 May 2019 11:45:05 +0200

cm4all-beng-proxy (15.17) unstable; urgency=low

  * bp/mod_auth_easy: support the "apr1" password hash

 -- Max Kellermann <mk@cm4all.com>  Wed, 08 May 2019 09:31:09 +0200

cm4all-beng-proxy (15.16) unstable; urgency=low

  * debian/postinst: reload on trigger "cm4all-apps-changed" only if active

 -- Max Kellermann <mk@cm4all.com>  Wed, 13 Mar 2019 08:07:45 +0100

cm4all-beng-proxy (15.15) unstable; urgency=low

  * certdb: fix broken "tail" command
  * lb/certdb: reuse the database connection more often
  * lb/certdb: set schema after database reconnect
  * http_client: fix rare assertion failure on cancellation
  * bp: SIGHUP fades out child processes
  * debian: trigger "cm4all-apps-changed" fades out child processes

 -- Max Kellermann <mk@cm4all.com>  Mon, 11 Mar 2019 18:28:19 +0100

cm4all-beng-proxy (15.14) unstable; urgency=low

  * http_server: fix crash bug (15.12 regression)

 -- Max Kellermann <mk@cm4all.com>  Wed, 06 Mar 2019 10:35:38 +0100

cm4all-beng-proxy (15.13) unstable; urgency=low

  * balancer: fix crash bug (15.12 regression)

 -- Max Kellermann <mk@cm4all.com>  Wed, 06 Mar 2019 09:50:45 +0100

cm4all-beng-proxy (15.12) unstable; urgency=low

  * balancer: wait for consecutive failures before disabling node
  * http_client: continue receiving pending data after server closed the
    connection
  * http_server: preserve connection after discarding short request body
  * spawn/client: retry sending after EAGAIN

 -- Max Kellermann <mk@cm4all.com>  Wed, 06 Mar 2019 00:08:34 +0100

cm4all-beng-proxy (15.11) unstable; urgency=low

  * was, fcgi: truncate long stderr lines before sending to Pond
  * lb/control: log TCACHE_INVALIDATE packets
  * lb/certdb: fix shutdown hang

 -- Max Kellermann <mk@cm4all.com>  Tue, 26 Feb 2019 23:54:43 +0100

cm4all-beng-proxy (15.10) unstable; urgency=low

  * merge release 14.23

 -- Max Kellermann <mk@cm4all.com>  Wed, 13 Feb 2019 09:04:33 +0100

cm4all-beng-proxy (15.9) unstable; urgency=low

  * merge release 14.22
  * bot: add Applebot

 -- Max Kellermann <mk@cm4all.com>  Mon, 11 Feb 2019 08:57:30 +0100

cm4all-beng-proxy (15.8) unstable; urgency=low

  * lhttp: increase listener backlog
  * bp/mod_auth_easy: protect all files with .access

 -- Max Kellermann <mk@cm4all.com>  Wed, 06 Feb 2019 11:48:31 +0100

cm4all-beng-proxy (15.7) unstable; urgency=low

  * bp/mod_auth_easy: fix inverted check in .access file check
  * bp/processor: don't allow empty widget class name
  * debian: migrate from "-dbg" to "-dbgsym" packages
  * fix the pkg-config include directory

 -- Max Kellermann <mk@cm4all.com>  Mon, 28 Jan 2019 12:58:31 +0100

cm4all-beng-proxy (15.6) unstable; urgency=low

  * bp/mod_auth_easy: user name check is case insensitive
  * bp/mod_auth_easy: implement .access files

 -- Max Kellermann <mk@cm4all.com>  Tue, 22 Jan 2019 22:43:33 +0100

cm4all-beng-proxy (15.5) unstable; urgency=low

  * bp: add option to emulate mod_auth_easy

 -- Max Kellermann <mk@cm4all.com>  Mon, 21 Jan 2019 14:56:51 +0100

cm4all-beng-proxy (15.4) unstable; urgency=low

  * processor: rewrite empty form action URIs

 -- Max Kellermann <mk@cm4all.com>  Thu, 10 Jan 2019 11:11:45 +0100

cm4all-beng-proxy (15.3) unstable; urgency=low

  * merge release 14.21

 -- Max Kellermann <mk@cm4all.com>  Thu, 03 Jan 2019 11:28:35 +0100

cm4all-beng-proxy (15.2) unstable; urgency=low

  * merge release 14.20

 -- Max Kellermann <mk@cm4all.com>  Sun, 30 Dec 2018 13:52:14 +0100

cm4all-beng-proxy (15.1) unstable; urgency=low

  * feature freeze

 -- Max Kellermann <mk@cm4all.com>  Mon, 17 Dec 2018 15:10:07 +0100

cm4all-beng-proxy (15.0.14) unstable; urgency=low

  * merge release 14.19

 -- Max Kellermann <mk@cm4all.com>  Thu, 13 Dec 2018 10:46:26 +0100

cm4all-beng-proxy (15.0.13) unstable; urgency=low

  * spawn: configurable resource limits CPUWeight, TasksMax, MemoryMax
  * lhttp, fcgi: kill idle processes after 15 minutes
  * filter: use the previous status if filter returns "200 OK"
  * require OpenSSL 1.1

 -- Max Kellermann <mk@cm4all.com>  Mon, 10 Dec 2018 15:13:14 +0100

cm4all-beng-proxy (15.0.12) unstable; urgency=low

  * istream: fix two assertion failures

 -- Max Kellermann <mk@cm4all.com>  Mon, 03 Dec 2018 09:37:21 +0100

cm4all-beng-proxy (15.0.11) unstable; urgency=low

  * widget: widget tag headers replace existing headers

 -- Max Kellermann <mk@cm4all.com>  Thu, 29 Nov 2018 20:31:17 +0100

cm4all-beng-proxy (15.0.10) unstable; urgency=low

  * subst/yaml: use "{%name%}" and allow switching to "{[name]}" with
    SUBST_ALT_SYNTAX

 -- Max Kellermann <mk@cm4all.com>  Thu, 29 Nov 2018 13:14:59 +0100

cm4all-beng-proxy (15.0.9) unstable; urgency=low

  * fix EBADFD
  * subst/yaml: use "{[name]}" instead of "{{name}}"
  * subst/yaml: use the dot as a YAML path separator
  * subst/yaml: allow traversing child maps
  * bp/headers: optimize
  * bp/headers: add group "AUTH"

 -- Max Kellermann <mk@cm4all.com>  Tue, 27 Nov 2018 16:57:41 +0100

cm4all-beng-proxy (15.0.8) unstable; urgency=low

  * processor: don't rewrite "data:" links
  * processor: fix use-after-free crash bug in URI rewriter

 -- Max Kellermann <mk@cm4all.com>  Thu, 22 Nov 2018 09:24:35 +0100

cm4all-beng-proxy (15.0.7) unstable; urgency=low

  * translation: fix assertion failure
  * translation: fix use-after-free bug in PROBE_SUFFIX handler
  * certdb: add option --account-key

 -- Max Kellermann <mk@cm4all.com>  Wed, 21 Nov 2018 20:19:10 +0100

cm4all-beng-proxy (15.0.6) unstable; urgency=low

  * translation: fix bogus error "malformed MOUNT_UTS_NAMESPACE packet"
  * translation: add packet ALT_HOST

 -- Max Kellermann <mk@cm4all.com>  Fri, 16 Nov 2018 13:35:20 +0100

cm4all-beng-proxy (15.0.5) unstable; urgency=low

  * translation: add packet SUBST_YAML_FILE

 -- Max Kellermann <mk@cm4all.com>  Wed, 31 Oct 2018 12:38:58 +0100

cm4all-beng-proxy (15.0.4) unstable; urgency=low

  * merge release 14.18
  * bp: optimize the number of concurrent filter processes
  * translation: size optimizations
  * dev: convert headers to C++
  * ajp: remove unused AJPv13 protocol implementation
  * spawn: fix warning "... died from signal 31"

 -- Max Kellermann <mk@cm4all.com>  Mon, 22 Oct 2018 17:58:19 +0200

cm4all-beng-proxy (15.0.3) unstable; urgency=low

  * merge release 14.13

 -- Max Kellermann <mk@cm4all.com>  Mon, 01 Oct 2018 12:24:46 +0200

cm4all-beng-proxy (15.0.2) unstable; urgency=low

  * merge release 14.12
  * spawn: add fallback PATH

 -- Max Kellermann <mk@cm4all.com>  Thu, 27 Sep 2018 12:55:56 +0200

cm4all-beng-proxy (15.0.1) unstable; urgency=low

  * spawn: support reassociating with PID namespaces
  * http_{client,server}: remove HTTP/1.0 support
  * eliminate dependency on libevent

 -- Max Kellermann <mk@cm4all.com>  Mon, 03 Sep 2018 12:14:18 +0200

cm4all-beng-proxy (14.23) unstable; urgency=low

  * merge release 13.16

 -- Max Kellermann <mk@cm4all.com>  Wed, 13 Feb 2019 08:32:30 +0100

cm4all-beng-proxy (14.22) unstable; urgency=low

  * merge release 13.15

 -- Max Kellermann <mk@cm4all.com>  Mon, 11 Feb 2019 08:46:49 +0100

cm4all-beng-proxy (14.21) unstable; urgency=low

  * lhttp: fix crash bug (14.20 regression)

 -- Max Kellermann <mk@cm4all.com>  Thu, 03 Jan 2019 11:12:48 +0100

cm4all-beng-proxy (14.20) unstable; urgency=low

  * pipe: remove excess fcntl() system calls in the debug build
  * http_client: fix two crash bugs
  * http_client: fix stall bug with SSL
  * http_client: fix "Peer closed the socket prematurely" error with SSL

 -- Max Kellermann <mk@cm4all.com>  Sun, 30 Dec 2018 13:40:44 +0100

cm4all-beng-proxy (14.19) unstable; urgency=low

  * certdb: fix "std::bad_alloc" error after database connection loss
  * widget: fix missing request body for focused inline widget

 -- Max Kellermann <mk@cm4all.com>  Wed, 12 Dec 2018 22:23:06 +0100

cm4all-beng-proxy (14.18) unstable; urgency=low

  * was: fix use-after-free bug
  * enlarge I/O buffers to 32 for faster bulk transfers

 -- Max Kellermann <mk@cm4all.com>  Tue, 16 Oct 2018 19:05:34 +0200

cm4all-beng-proxy (14.17) unstable; urgency=low

  * translation, http_cache: fix use-after-free bugs

 -- Max Kellermann <mk@cm4all.com>  Mon, 15 Oct 2018 22:27:39 +0200

cm4all-beng-proxy (14.16) unstable; urgency=low

  * http_client: fix assertion failure due to unexpected recursion

 -- Max Kellermann <mk@cm4all.com>  Mon, 15 Oct 2018 17:03:13 +0200

cm4all-beng-proxy (14.15) unstable; urgency=low

  * spawn: fix error "Failed to create systemd scope: Unit
    cm4all-beng-spawn.scope not loaded"

 -- Max Kellermann <mk@cm4all.com>  Wed, 10 Oct 2018 11:49:25 +0200

cm4all-beng-proxy (14.14) unstable; urgency=low

  * merge release 13.13

 -- Max Kellermann <mk@cm4all.com>  Fri, 05 Oct 2018 14:10:08 +0200

cm4all-beng-proxy (14.13) unstable; urgency=low

  * spawn: fix "signalfd() failed: Bad file descriptor"
  * translation: fix crash bug
  * session: fix data loss after defragmentation

 -- Max Kellermann <mk@cm4all.com>  Fri, 28 Sep 2018 15:24:19 +0200

cm4all-beng-proxy (14.12) unstable; urgency=low

  * improved memory leak detector
  * add listener options "ack_timeout", "keepalive"
  * support HTTP method "REPORT"

 -- Max Kellermann <mk@cm4all.com>  Thu, 27 Sep 2018 10:55:50 +0200

cm4all-beng-proxy (14.11) unstable; urgency=low

  * merge release 13.12

 -- Max Kellermann <mk@cm4all.com>  Sat, 01 Sep 2018 19:46:50 +0200

cm4all-beng-proxy (14.10) unstable; urgency=low

  * http: don't require "Connection" header for WebSocket upgrade
  * bp/http: fix WebSocket header duplication

 -- Max Kellermann <mk@cm4all.com>  Wed, 22 Aug 2018 11:11:50 -0000

cm4all-beng-proxy (14.9) unstable; urgency=low

  * bp/http: abolish the forced "Connection:keep-alive" request header
  * spawn: work around LXC/systemd bug causing spawner failures

 -- Max Kellermann <mk@cm4all.com>  Thu, 16 Aug 2018 15:21:58 -0000

cm4all-beng-proxy (14.8) unstable; urgency=low

  * http_cache, fcache: fix use-after-free crash bug
  * spawn: support the systemd hybrid cgroup hierarchy

 -- Max Kellermann <mk@cm4all.com>  Tue, 19 Jun 2018 14:46:39 -0000

cm4all-beng-proxy (14.7) unstable; urgency=low

  * certdb: DELETE old name before INSERT to avoid constraint violation

 -- Max Kellermann <mk@cm4all.com>  Tue, 05 Jun 2018 20:12:17 -0000

cm4all-beng-proxy (14.6) unstable; urgency=low

  * http_client: fix use-after-free data corruption bug
  * fcache: fix use-after-free crash bug upon cancellation
  * access_log: fix crash after sendmsg() failure
  * istream/replace: fix stall bug
  * istream/subst: optimize mismatch check

 -- Max Kellermann <mk@cm4all.com>  Mon, 04 Jun 2018 10:22:47 -0000

cm4all-beng-proxy (14.5) unstable; urgency=low

  * access_log: fix CRC errors due to stack corruption

 -- Max Kellermann <mk@cm4all.com>  Mon, 14 May 2018 14:34:18 -0000

cm4all-beng-proxy (14.4) unstable; urgency=low

  * lb: fix "pivot_root" problem during start on kernel 4.9-
  * enable core dumps (PR_SET_DUMPABLE)
  * debian: don't start daemon during initial installation

 -- Max Kellermann <mk@cm4all.com>  Mon, 14 May 2018 10:42:12 -0000

cm4all-beng-proxy (14.3) unstable; urgency=low

  * bp: allow configuring child error logger without access logger
  * log: fix datagram corruption due to wrong attribute code
  * log-json: escape control characters

 -- Max Kellermann <mk@cm4all.com>  Thu, 26 Apr 2018 11:00:05 -0000

cm4all-beng-proxy (14.2) unstable; urgency=low

  * lb: fix use-after-free crash after using translation response
  * http_cache: fix use-after-free crash on request cancellation
  * http_client: fix assertion failure upon discarding large request body

 -- Max Kellermann <mk@cm4all.com>  Tue, 24 Apr 2018 11:11:36 -0000

cm4all-beng-proxy (14.1) unstable; urgency=low

  * feature freeze
  * lhttp: fix memory leak
  * lhttp: pass URI and site name to error logger
  * fcgi: implement "forward_child_errors" for STDERR payloads
  * pipe: fix assertion failure
  * cgi: fix crash bug
  * bp: SIGHUP flushes the NFS cache
  * control: add packet FLUSH_NFS_CACHE

 -- Max Kellermann <mk@cm4all.com>  Thu, 19 Apr 2018 08:43:23 -0000

cm4all-beng-proxy (14.0.9) unstable; urgency=low

  * translation: allow disabling the HTTP cache with "UNCACHED"
  * http_cache: remove the memcached backend
  * access_log: use protocol version 2
  * fcgi, was, lhttp: option "forward_child_errors" forwards stderr to logger

 -- Max Kellermann <mk@cm4all.com>  Mon, 26 Mar 2018 09:42:46 -0000

cm4all-beng-proxy (14.0.8) unstable; urgency=low

  * merge release 13.11
  * bp: add SSL/TLS support to the HTTP server
  * fix bogus assertion failure

 -- Max Kellermann <mk@cm4all.com>  Mon, 12 Mar 2018 10:38:35 -0000

cm4all-beng-proxy (14.0.7) unstable; urgency=low

  * merge release 13.10
  * header-forward: include "Content-Location" in header group "LINK"
  * http_client: enable keep-alive on HTTPS connections
  * ssl/client: send client certificates on server request
  * ssl/client: translation packet CERTIFICATE chooses client certificate
  * ssl/client: enable SNI

 -- Max Kellermann <mk@cm4all.com>  Thu, 01 Mar 2018 11:59:04 -0000

cm4all-beng-proxy (14.0.6) unstable; urgency=low

  * http_server: generate Content-Length for empty response (14.0.1
    regression)

 -- Max Kellermann <mk@cm4all.com>  Fri, 02 Feb 2018 10:54:19 -0000

cm4all-beng-proxy (14.0.5) unstable; urgency=low

  * bp: fix forwarding headers for request body

 -- Max Kellermann <mk@cm4all.com>  Thu, 25 Jan 2018 11:48:09 -0000

cm4all-beng-proxy (14.0.4) unstable; urgency=low

  * merge release 13.8
  * certdb: create ACME CSRs without subject, only subjectAltName

 -- Max Kellermann <mk@cm4all.com>  Tue, 23 Jan 2018 15:04:11 -0000

cm4all-beng-proxy (14.0.3) unstable; urgency=low

  * merge release 13.5
  * bp: fix nullptr dereference bug

 -- Max Kellermann <mk@cm4all.com>  Thu, 18 Jan 2018 18:24:29 -0000

cm4all-beng-proxy (14.0.2) unstable; urgency=low

  * access_log: support protocol version 2 (with CRC)
  * processor: rewrite URIs in META/property="og:{image,url}"
  * certdb: eliminate duplicate authz request
  * certdb: add ACME option "--debug"
  * certdb: implement ACME "http-01", option "--challenge-directory"

 -- Max Kellermann <mk@cm4all.com>  Fri, 12 Jan 2018 11:07:14 -0000

cm4all-beng-proxy (14.0.1) unstable; urgency=low

  * lb: forward HTTP from Lua to dynamic server (development feature)
  * certdb: retry ACME requests after status 5xx (server error)
  * certdb: support the Workshop control channel
  * log-json: generate JSONL (JSON Lines)

 -- Max Kellermann <mk@cm4all.com>  Fri, 05 Jan 2018 11:47:08 -0000

cm4all-beng-proxy (13.16) unstable; urgency=low

  * processor: fix crash due to malformed XML attribute
  * http_client: fix crash bug
  * ssl/cache: fix two crash bugs

 -- Max Kellermann <mk@cm4all.com>  Tue, 12 Feb 2019 21:39:41 +0100

cm4all-beng-proxy (13.15) unstable; urgency=low

  * was: send PREMATURE after client canceled the request

 -- Max Kellermann <mk@cm4all.com>  Mon, 11 Feb 2019 08:37:20 +0100

cm4all-beng-proxy (13.14) unstable; urgency=low

  * http_client: fix assertion failure due to unexpected recursion
  * lhttp: increase listener backlog
  * pipe: remove excess fcntl() system calls in the debug build
  * bp/processor: don't allow empty widget class name

 -- Max Kellermann <mk@cm4all.com>  Mon, 11 Feb 2019 07:40:00 +0100

cm4all-beng-proxy (13.13) unstable; urgency=low

  * was: fix memory leak
  * was: force pipe buffers to 256 kB
  * session: fix data loss after defragmentation

 -- Max Kellermann <mk@cm4all.com>  Fri, 05 Oct 2018 12:23:09 +0200

cm4all-beng-proxy (13.12) unstable; urgency=low

  * bp/http: abolish the forced "Connection:keep-alive" request header
  * session: fix two assertion failures
  * fcgi, lhttp: fix race condition with socket permissions
  * cgi: fix crash bug
  * pipe: fix assertion failure
  * fcache: fix crash due to mistakenly detected memory leak
  * lb: fix "pivot_root" problem during start on kernel 4.9-
  * enable core dumps (PR_SET_DUMPABLE)
  * debian: don't start daemon during initial installation

 -- Max Kellermann <mk@cm4all.com>  Sat, 01 Sep 2018 17:23:30 -0000

cm4all-beng-proxy (13.11) unstable; urgency=low

  * lb: ssl_cert_db and ssl_verify are mutually exclusive
  * log-json: fix crash bug with unknown type value
  * log: support type "SSH"

 -- Max Kellermann <mk@cm4all.com>  Fri, 09 Mar 2018 09:15:14 -0000

cm4all-beng-proxy (13.10) unstable; urgency=low

  * access_log: support record attribute "type"

 -- Max Kellermann <mk@cm4all.com>  Wed, 07 Feb 2018 08:27:48 -0000

cm4all-beng-proxy (13.9) unstable; urgency=low

  * spawn: fix kernel warning "oom_adj is deprecated, please use
    oom_score_adj instead"
  * lb/config: check whether sticky_mode is compatible with Zeroconf
  * access_log: fix crash on connect failure

 -- Max Kellermann <mk@cm4all.com>  Tue, 06 Feb 2018 09:23:23 -0000

cm4all-beng-proxy (13.8) unstable; urgency=low

  * lb/http: fix use-after-free bug

 -- Max Kellermann <mk@cm4all.com>  Tue, 23 Jan 2018 14:46:15 -0000

cm4all-beng-proxy (13.7) unstable; urgency=low

  * lb/tcp: fix use-after-free bug when outbound connect fails early
  * spawn: fix resource limits problem with user namespaces
  * spawn: increase the OOM score of child processes

 -- Max Kellermann <mk@cm4all.com>  Tue, 23 Jan 2018 11:54:03 -0000

cm4all-beng-proxy (13.6) unstable; urgency=low

  * http_server: fix two crash bugs with "417 Expectation failed"
  * lb: fix crash bug when POSTing to global_http_check
  * lb/tcp: fix double free bug when outbound is not yet connected

 -- Max Kellermann <mk@cm4all.com>  Mon, 22 Jan 2018 10:18:58 -0000

cm4all-beng-proxy (13.5) unstable; urgency=low

  * lb/tcp: fix crash with empty Zeroconf pool
  * nfs: fix memory leak
  * certdb: eliminate duplicate authz request
  * certdb: retry ACME nonce request after status 500
  * certdb: update the Let's Encrypt agreement URL to v1.2
  * certdb: add ACME option "--debug"
  * ssl: fix three transfer stall bugs
  * shrink I/O buffers back to 8 kB
  * access_log: support protocol version 2 (with CRC)

 -- Max Kellermann <mk@cm4all.com>  Thu, 18 Jan 2018 17:59:13 -0000

cm4all-beng-proxy (13.4) unstable; urgency=low

  * fcache: fix use-after-free crash bug

 -- Max Kellermann <mk@cm4all.com>  Wed, 03 Jan 2018 09:31:05 -0000

cm4all-beng-proxy (13.3) unstable; urgency=low

  * merge release 12.9

 -- Max Kellermann <mk@cm4all.com>  Mon, 18 Dec 2017 10:16:28 -0000

cm4all-beng-proxy (13.2) unstable; urgency=low

  * widget: case insensitive check for UNTRUSTED_SITE_SUFFIX and
    UNTRUSTED_RAW_SITE_SUFFIX

 -- Max Kellermann <mk@cm4all.com>  Fri, 01 Dec 2017 14:54:24 -0000

cm4all-beng-proxy (13.1) unstable; urgency=low

  * feature freeze

 -- Max Kellermann <mk@cm4all.com>  Thu, 30 Nov 2017 12:05:07 -0000

cm4all-beng-proxy (13.0.12) unstable; urgency=low

  * merge release 12.8
  * http_cache: handle If-None-Match, If-Modified-Since etc.
  * spawn: raise the command-line argument limit
  * log internal server errors even without --verbose

 -- Max Kellermann <mk@cm4all.com>  Tue, 21 Nov 2017 11:58:58 -0000

cm4all-beng-proxy (13.0.11) unstable; urgency=low

  * bp: map EACCES/EPERM to "403 Forbidden"
  * log-cat: use the local time zone

 -- Max Kellermann <mk@cm4all.com>  Mon, 06 Nov 2017 09:29:22 -0000

cm4all-beng-proxy (13.0.10) unstable; urgency=low

  * avahi: make services visible initially (13.0.9 regression)
  * lb: add client address filter for global_http_check
  * python/control/client: add methods send_{en,dis}able_zeroconf()

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 Oct 2017 21:51:40 -0000

cm4all-beng-proxy (13.0.9) unstable; urgency=low

  * lb: support monitors in Zeroconf clusters
  * lb/config: require certificate even if ssl_cert_db is used
  * lb/monitor/expect: fix memory leak
  * certdb: retry ACME "new-authz" after "unauthorized"
  * certdb: generate a new private key for each "new-cert"
  * certdb: fix collisions with ACME challenge certificates
  * certdb: allow altNames longer than 64 characters with ACME
  * log: add attribute "FORWARDED_TO"
  * control: add packets "DISABLE_ZEROCONF", "ENABLE_ZEROCONF"

 -- Max Kellermann <mk@cm4all.com>  Fri, 06 Oct 2017 11:20:15 -0000

cm4all-beng-proxy (13.0.8.1) unstable; urgency=low

  * fix assertion failure when sending large HTTP headers
  * http_server: disallow request headers larger than 8 kB

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Oct 2017 09:49:47 -0000

cm4all-beng-proxy (13.0.8) unstable; urgency=low

  * certdb: check for database commit errors
  * certdb: repeat after PostgreSQL serialization failure

 -- Max Kellermann <mk@cm4all.com>  Tue, 26 Sep 2017 19:59:53 -0000

cm4all-beng-proxy (13.0.7) unstable; urgency=low

  * fcache: fix bogus memory leak test
  * handler: change "Translation server failed" to "Configuration server ..."
  * spawn: wait & try again after "Unit cm4all-beng-spawn.scope already exists"

 -- Max Kellermann <mk@cm4all.com>  Mon, 25 Sep 2017 13:16:21 -0000

cm4all-beng-proxy (13.0.6) unstable; urgency=low

  * merge release 12.5
  * widget/inline: fix memory leak on canceled POST
  * widget/inline: implement a response header timeout of 5s
  * certdb: fix notifications in non-default PostgreSQL schema

 -- Max Kellermann <mk@cm4all.com>  Wed, 20 Sep 2017 20:56:04 -0000

cm4all-beng-proxy (13.0.5) unstable; urgency=low

  * merge release 12.4
  * lb/http: fix several memory leaks with POST requests
  * lb: fix shutdown crash bug
  * lb: CONTROL_STATS returns translation cache size
  * log/lua: add a "filter" mode

 -- Max Kellermann <mk@cm4all.com>  Thu, 14 Sep 2017 18:39:12 -0000

cm4all-beng-proxy (13.0.4) unstable; urgency=low

  * lb: fix request headers in access logger (affects
    "ignore_localhost_200" and "User-Agent", "Referer", "Host",
    "X-Forwarded-For")

 -- Max Kellermann <mk@cm4all.com>  Mon, 11 Sep 2017 20:04:23 -0000

cm4all-beng-proxy (13.0.3) unstable; urgency=low

  * fix crash bug in CSS processor
  * lb: print the site name in access logs
  * log: add attribute MESSAGE

 -- Max Kellermann <mk@cm4all.com>  Mon, 11 Sep 2017 17:43:57 -0000

cm4all-beng-proxy (13.0.2) unstable; urgency=low

  * log translation server failures even without --verbose
  * translation: allow arbitrary non-zero characters in CHILD_TAG
  * control: add listener option "interface"
  * control: disable the "V6ONLY" flag on all IPv6 wildcard listeners
  * control: switch to IPv4 if joining IPv6 wildcard to IPv4 multicast group

 -- Max Kellermann <mk@cm4all.com>  Fri, 08 Sep 2017 12:24:04 -0000

cm4all-beng-proxy (13.0.1) unstable; urgency=low

  * remove libdaemon dependency
  * lhttp: FADE_CHILDEN prevents reusing existing busy processes
  * bp: allow CONTROL_FADE_CHILDREN with tag as payload

 -- Max Kellermann <mk@cm4all.com>  Tue, 29 Aug 2017 10:40:13 -0000

cm4all-beng-proxy (12.9) unstable; urgency=low

  * was: fix crash after malformed HEAD response
  * http_client: fix retry after error
  * lb/lua: allow building with LuaJIT 2.1

 -- Max Kellermann <mk@cm4all.com>  Mon, 18 Dec 2017 10:03:34 -0000

cm4all-beng-proxy (12.8) unstable; urgency=low

  * file: emit "Last-Modified" header in "304" responses
  * file: improved support for the user.ETag xattr
  * http_cache: update "Expires" from "304" responses

 -- Max Kellermann <mk@cm4all.com>  Fri, 17 Nov 2017 11:41:02 -0000

cm4all-beng-proxy (12.7) unstable; urgency=low

  * file: ignore If-Modified-Since after successful If-None-Match
  * file: emit cache headers in "304" responses (v11 regression)
  * file: failed If-None-Match emits "304" response, not "412"

 -- Max Kellermann <mk@cm4all.com>  Thu, 16 Nov 2017 12:19:44 -0000

cm4all-beng-proxy (12.6) unstable; urgency=low

  * fix assertion failure when sending large HTTP headers
  * http_server: disallow request headers larger than 8 kB
  * spawn: wait & try again after "Unit cm4all-beng-spawn.scope already exists"
  * widget/inline: fix memory leak on canceled POST
  * control: add listener option "interface"
  * control: disable the "V6ONLY" flag on all IPv6 wildcard listeners
  * control: switch to IPv4 if joining IPv6 wildcard to IPv4 multicast group
  * lb: print the site name in access logs
  * lb: fix request headers in access logger (affects
    "ignore_localhost_200" and "User-Agent", "Referer", "Host",
    "X-Forwarded-For")
  * lb/monitor/expect: fix memory leak
  * certdb: fix notifications in non-default PostgreSQL schema

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Oct 2017 10:58:40 -0000

cm4all-beng-proxy (12.5) unstable; urgency=low

  * lb/http: fix another memory leak with POST requests
  * lb: fix shutdown crash bug
  * certdb: fix crash after PostgreSQL host lookup failure

 -- Max Kellermann <mk@cm4all.com>  Wed, 20 Sep 2017 10:30:52 -0000

cm4all-beng-proxy (12.4) unstable; urgency=low

  * lb/http: fix several memory leaks with POST requests
  * fix crash bug in CSS processor

 -- Max Kellermann <mk@cm4all.com>  Wed, 13 Sep 2017 13:58:06 -0000

cm4all-beng-proxy (12.3) unstable; urgency=low

  * remove libhttp dependency
  * logger: fix off-by-one bug in log level check
  * http_server: fix crash bug

 -- Max Kellermann <mk@cm4all.com>  Tue, 29 Aug 2017 09:44:27 -0000

cm4all-beng-proxy (12.2) unstable; urgency=low

  * spawn: use the "systemd" controller
  * debian/control: move from "non-free" to "main"

 -- Max Kellermann <mk@cm4all.com>  Wed, 23 Aug 2017 09:35:27 -0000

cm4all-beng-proxy (12.1) unstable; urgency=low

  * all code is now covered by the Simplified BSD License (BSD-2-Clause)

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Aug 2017 08:53:52 -0000

cm4all-beng-proxy (12.0.44) unstable; urgency=low

  * lb: retry after connect error to Zeroconf member
  * spawn: make /proc writable if user namespaces are allowed

 -- Max Kellermann <mk@cm4all.com>  Thu, 17 Aug 2017 11:26:34 -0000

cm4all-beng-proxy (12.0.43) unstable; urgency=low

  * spawn: fix MOUNT_ROOT_TMPFS failure with USER_NAMESPACE
  * lb/control: allow TCACHE_INVALIDATE on SITE
  * systemd: no "-v" by default

 -- Max Kellermann <mk@cm4all.com>  Tue, 15 Aug 2017 21:41:04 -0000

cm4all-beng-proxy (12.0.42) unstable; urgency=low

  * spawn: fix bogus pivot_root() error message
  * translation: add packet MOUNT_ROOT_TMPFS

 -- Max Kellermann <mk@cm4all.com>  Tue, 15 Aug 2017 09:39:08 -0000

cm4all-beng-proxy (12.0.41) unstable; urgency=low

  * spawn: fix NETWORK_NAMESPACE_NAME corruption
  * spawn: work around USER_NAMESPACE + NETWORK_NAMESPACE_NAME conflict

 -- Max Kellermann <mk@cm4all.com>  Fri, 04 Aug 2017 16:15:09 -0000

cm4all-beng-proxy (12.0.40) unstable; urgency=low

  * spawn: attach to existing network namespace with NETWORK_NAMESPACE_NAME
  * spawn: allow unshare(), mount(), umount(), pivot_root()

 -- Max Kellermann <mk@cm4all.com>  Fri, 04 Aug 2017 09:42:44 -0000

cm4all-beng-proxy (12.0.39) unstable; urgency=low

  * net: resolving "*" prefers the IPv6 wildcard "::"
  * spawn: run the PID namespace init process as root
  * spawn: tight system call whitelist for init process
  * spawn: forbid fanotify_*, nfsservctl, syslog
  * lb/translation: fix false cache misses
  * lb/control: TCACHE_INVALIDATE flushes all translation caches
  * lb/cluster: improve consistent hashing distribution
  * control: support more commands in TCACHE_INVALIDATE payload
  * translation: fix the FORBID_MULTICAST setting
  * translation: add packet FORBID_BIND

 -- Max Kellermann <mk@cm4all.com>  Tue, 01 Aug 2017 14:03:03 -0000

cm4all-beng-proxy (12.0.38) unstable; urgency=low

  * fcgi: fix crash bug

 -- Max Kellermann <mk@cm4all.com>  Wed, 26 Jul 2017 17:43:05 -0000

cm4all-beng-proxy (12.0.37) unstable; urgency=low

  * bp: check HTTPS_ONLY before anything else

 -- Max Kellermann <mk@cm4all.com>  Thu, 20 Jul 2017 15:00:37 -0000

cm4all-beng-proxy (12.0.36) unstable; urgency=low

  * translation: add packet HTTPS_ONLY

 -- Max Kellermann <mk@cm4all.com>  Thu, 20 Jul 2017 13:26:49 -0000

cm4all-beng-proxy (12.0.35) unstable; urgency=low

  * bp: translation REQUEST_HEADER overrides existing request headers
  * bp: never forward the "X-CM4all-DocRoot" header
  * lb: set the "X-CM4all-HTTPS" header
  * cgi, fcgi: set HTTPS=on if the "X-CM4all-HTTPS" header is set

 -- Max Kellermann <mk@cm4all.com>  Wed, 19 Jul 2017 12:36:36 -0000

cm4all-beng-proxy (12.0.34) unstable; urgency=low

  * http_client: disable the read timeout

 -- Max Kellermann <mk@cm4all.com>  Wed, 19 Jul 2017 08:16:09 -0000

cm4all-beng-proxy (12.0.33) unstable; urgency=low

  * log-exec: allow multiple multicast processes on same host
  * headers: rename "X-CM4all-BENG-SSL" to "X-CM4all-HTTPS"
  * access_log: add option "send_to" which replaces log-forward

 -- Max Kellermann <mk@cm4all.com>  Tue, 18 Jul 2017 09:51:01 -0000

cm4all-beng-proxy (12.0.32) unstable; urgency=low

  * lb/translation: fix bogus wildcard cache entries
  * lb/translation: obey MAX_AGE=0
  * logger: fix log level
  * access_log: use microsecond precision in "timestamp" attribute
  * log-json: enclose output in "[]" and put commas between records
  * log-json: add "logger_client" attribute
  * log-lua: new access logger which calls a Lua script
  * config: make "access_logger" a block
  * config: add "access_logger" options "trust_xff", "ignore_localhost_200"
  * headers: add "X-CM4all-BENG-SSL" to group "SSL"

 -- Max Kellermann <mk@cm4all.com>  Mon, 17 Jul 2017 20:33:46 -0000

cm4all-beng-proxy (12.0.31) unstable; urgency=low

  * translation: add packet FORBID_MULTICAST
  * spawn: system call filter errors are fatal if explicitly enabled
  * spawn: apply cgroup namespace again after moving to new cgroup
  * net: support interface name as scope id in IPv6 addresses
  * config: support per-"control" setting "multicast_group"
  * log-exec: fix binding to wildcard address via "*"

 -- Max Kellermann <mk@cm4all.com>  Fri, 14 Jul 2017 08:19:05 -0000

cm4all-beng-proxy (12.0.30) unstable; urgency=low

  * bp: rename zeroconf_type to zeroconf_service
  * bp: control server supports IPv6 multicast
  * config: check Zeroconf service names
  * config: allow zeroconf_service with raw service name
  * log-exec: multicast support
  * translation: add packet REDIRECT_FULL_URI

 -- Max Kellermann <mk@cm4all.com>  Thu, 13 Jul 2017 12:13:19 -0000

cm4all-beng-proxy (12.0.29) unstable; urgency=low

  * lb: use consistent hashing to pick Zeroconf members
  * lhttp: fix bogus assertion failure during shutdown

 -- Max Kellermann <mk@cm4all.com>  Mon, 10 Jul 2017 21:49:23 -0000

cm4all-beng-proxy (12.0.28) unstable; urgency=low

  * config: add listener option "free_bind"
  * don't confuse child processes with different BIND_MOUNT settings
  * lb: add sticky_mode "xhost"'

 -- Max Kellermann <mk@cm4all.com>  Mon, 10 Jul 2017 10:20:26 -0000

cm4all-beng-proxy (12.0.27) unstable; urgency=low

  * access_log: reduce system calls in all access loggers
  * translation: add packet CGROUP_NAMESPACE
  * translation: allow underscore in cgroup controller name

 -- Max Kellermann <mk@cm4all.com>  Fri, 07 Jul 2017 15:19:28 -0000

cm4all-beng-proxy (12.0.26) unstable; urgency=low

  * spawn: abort the process immediately after uid/gid_map failure
  * spawn: create STDERR_PATH with mode 0600
  * spawn: fix socket family filter
  * translation: add packets UMASK, STDERR_PATH_JAILED

 -- Max Kellermann <mk@cm4all.com>  Tue, 04 Jul 2017 16:16:07 -0000

cm4all-beng-proxy (12.0.25) unstable; urgency=low

  * eliminate dependency on GLib
  * spawn: mount a new /proc for the PID namespace
  * spawn: implement user namespaces properly
  * spawn: fix seccomp filters on old kernels
  * spawn: fix journal for jailed processes
  * spawn: allow only local, IPv4 and IPv6 sockets
  * spawn: rename the PID namespace init process to "init"

 -- Max Kellermann <mk@cm4all.com>  Thu, 29 Jun 2017 20:10:24 -0000

cm4all-beng-proxy (12.0.24) unstable; urgency=low

  * spawn: unblock signals
  * http_server: fix memory leak
  * log: send the "Host" request header to the access logger
  * log-json: new access logger which dumps JSON
  * spawn: implement an init process for PID namespaces

 -- Max Kellermann <mk@cm4all.com>  Tue, 27 Jun 2017 11:21:19 -0000

cm4all-beng-proxy (12.0.23) unstable; urgency=low

  * lb: show the IP address of Zeroconf members in log messages
  * lb: disable failing Zeroconf members temporarily
  * config: add "spawn" section, replacing --allow-user and --allow-group

 -- Max Kellermann <mk@cm4all.com>  Wed, 21 Jun 2017 20:41:34 -0000

cm4all-beng-proxy (12.0.22) unstable; urgency=low

  * lb: suppress log message "malformed request URI"
  * was: fix assertion failure
  * translation: add packets SHELL, TOKEN

 -- Max Kellermann <mk@cm4all.com>  Tue, 20 Jun 2017 21:59:58 -0000

cm4all-beng-proxy (12.0.21) unstable; urgency=low

  * lower log level for "Peer closed the socket prematurely"
  * widget: set Request/LINK=no by default
  * translation: fix "std::exception" error messages

 -- Max Kellermann <mk@cm4all.com>  Tue, 20 Jun 2017 11:17:56 -0000

cm4all-beng-proxy (12.0.20) unstable; urgency=low

  * merge release 11.26
  * move the delegate-helper to a non-jailed package
  * translation: ignore whitespace in RLIMITS packet
  * headers: add "Referer" to group "LINK", off by default

 -- Max Kellermann <mk@cm4all.com>  Sat, 17 Jun 2017 09:49:46 -0000

cm4all-beng-proxy (12.0.19) unstable; urgency=low

  * lb: fix assertion failure with translated POST requests
  * lb: add "tag" setting to "listener" (translation packet LISTENER_TAG)

 -- Max Kellermann <mk@cm4all.com>  Mon, 12 Jun 2017 21:46:25 -0000

cm4all-beng-proxy (12.0.18) unstable; urgency=low

  * lb: SIGHUP flushes all translate_handler caches
  * certdb: command "names" obeys the "deleted" flag
  * certdb: command "find" prints column headers only with "--headers"
  * certdb: remove obsolete option "--all"

 -- Max Kellermann <mk@cm4all.com>  Tue, 06 Jun 2017 20:46:15 -0000

cm4all-beng-proxy (12.0.17) unstable; urgency=low

  * translation: add packet CANONICAL_HOST
  * lb: implement a translation_handler cache

 -- Max Kellermann <mk@cm4all.com>  Fri, 02 Jun 2017 11:25:35 -0000

cm4all-beng-proxy (12.0.16) unstable; urgency=low

  * lb: create monitors referenced only by {lua,translation}_handler
  * lb: allow the translation server to refer to branches and other types
  * lb/monitor: fix shutdown hang due to event leak
  * lb: add sticky mode "host"
  * lb: fix assertion failure with Zeroconf and sticky
  * lb: fix crash bug when Zeroconf cluster is empty
  * bp: fix crash bug

 -- Max Kellermann <mk@cm4all.com>  Wed, 31 May 2017 22:21:38 -0000

cm4all-beng-proxy (12.0.15) unstable; urgency=low

  * merge release 11.25
  * certdb: fix column "issuer_common_name" management
  * certdb: add column "handle"
    - new commands "names", "set-handle"
    - commands "load" requires handle parameter
    - command "delete" uses handle
    - commands "monitor" and "tail" print handles
    - acme commands "new-cert" and "new-authz-cert" require handle parameter
    - new acme command "renew-cert", replacing "new-authz-cert --all"
  * certdb: add command "get"
  * certdb: command "find" prints a list of matching certificates
  * certdb: add option "--progress" for Workshop
  * translation: add packet MESSAGE

 -- Max Kellermann <mk@cm4all.com>  Tue, 30 May 2017 21:42:23 -0000

cm4all-beng-proxy (12.0.14) unstable; urgency=low

  * merge release 11.24
  * certdb: add column "issuer_common_name"

 -- Max Kellermann <mk@cm4all.com>  Wed, 24 May 2017 10:27:17 -0000

cm4all-beng-proxy (12.0.13) unstable; urgency=low

  * merge release 11.23
  * lb/lua: catch "panics" and report error
  * lb/lua: fix Lua stack leaks
  * lb: allow a translation server to pick a cluster
  * fix use-after-free bug in HTTP request handler
  * spawn: forbid more dangerous system calls
  * spawn: activate system call filter for all architectures
  * translation: add packet FORBID_USER_NS

 -- Max Kellermann <mk@cm4all.com>  Sat, 20 May 2017 11:40:50 -0000

cm4all-beng-proxy (12.0.12) unstable; urgency=low

  * bp: pass the listener "interface" setting to Avahi
  * lb: fix crash with --check
  * lb: allow Lua scripts to handle HTTP requests

 -- Max Kellermann <mk@cm4all.com>  Thu, 27 Apr 2017 21:50:32 -0000

cm4all-beng-proxy (12.0.11) unstable; urgency=low

  * certdb: fix crash after PostgreSQL host lookup failure
  * transformation: fix crash due to compiler optimization
  * lb: fix crash while waiting for the Avahi resolver

 -- Max Kellermann <mk@cm4all.com>  Wed, 26 Apr 2017 11:49:48 -0000

cm4all-beng-proxy (12.0.10) unstable; urgency=low

  * merge release 11.22
  * lb: implement "sticky" in ZeroConf TCP pools
  * improved uid/gid verify error messages
  * certdb: update the Let's Encrypt agreement URL
  * certdb: add option "--agreement"

 -- Max Kellermann <mk@cm4all.com>  Tue, 18 Apr 2017 11:00:29 -0000

cm4all-beng-proxy (12.0.9) unstable; urgency=low

  * fix error "Failed to accept connection: Invalid argument"
  * lb: implement "sticky" in ZeroConf pools

 -- Max Kellermann <mk@cm4all.com>  Tue, 21 Mar 2017 09:38:04 -0000

cm4all-beng-proxy (12.0.8) unstable; urgency=low

  * merge release 11.21
  * build with Meson and Ninja
  * lb/certdb: fix assertion failure during shutdown

 -- Max Kellermann <mk@cm4all.com>  Wed, 15 Mar 2017 16:20:50 -0000

cm4all-beng-proxy (12.0.7) unstable; urgency=low

  * merge release 11.17
  * lb/http: add "redirect" as a possible destination for "branch"
  * ssl: fix memory leak
  * certdb: use $http_proxy
  * certdb: exclude *.acme.invalid from --all

 -- Max Kellermann <mk@cm4all.com>  Mon, 06 Feb 2017 22:22:08 -0000

cm4all-beng-proxy (12.0.6) unstable; urgency=low

  * lb/http: add "status" as a possible destination for "branch"
  * translation: add packet EXECUTE

 -- Max Kellermann <mk@cm4all.com>  Wed, 25 Jan 2017 21:11:58 -0000

cm4all-beng-proxy (12.0.5) unstable; urgency=low

  * merge release 11.15
  * lb/tcp: fix crash bug after connect failure
  * lb/tcp: connect outbound after SSL handshake is finished

 -- Max Kellermann <mk@cm4all.com>  Fri, 20 Jan 2017 14:12:25 -0000

cm4all-beng-proxy (12.0.4) unstable; urgency=low

  * merge release 11.13
  * spawn: forbid ptrace() and other dangerous system calls
  * certdb: add "--all" option to "new-cert" and "new-authz-cert"

 -- Max Kellermann <mk@cm4all.com>  Mon, 16 Jan 2017 19:47:31 -0000

cm4all-beng-proxy (12.0.3) unstable; urgency=low

  * config: add "access_logger", replacing the *.default setting
  * translation: add packets BIND_MOUNT_EXEC, STDERR_NULL

 -- Max Kellermann <mk@cm4all.com>  Thu, 08 Dec 2016 10:35:47 -0000

cm4all-beng-proxy (12.0.2) unstable; urgency=low

  * merge release 11.12
  * http_client: fix use-after-free bug on request cancellation
  * processor: fix buffer corruption bug
  * spawn/Systemd: fix hang while creating systemd scope
  * config: fix session_save_path corruption

 -- Max Kellermann <mk@cm4all.com>  Tue, 06 Dec 2016 11:01:26 -0000

cm4all-beng-proxy (12.0.1) unstable; urgency=low

  * move various buffers from the pool allocator to the slice allocator
  * translation: add packet CRON

 -- Max Kellermann <mk@cm4all.com>  Wed, 23 Nov 2016 14:57:02 -0000

cm4all-beng-proxy (11.26) unstable; urgency=low

  * was: added kludge to avoid killing process after STOP
  * lb/monitor: fix shutdown hang due to event leak

 -- Max Kellermann <mk@cm4all.com>  Fri, 16 Jun 2017 20:53:29 -0000

cm4all-beng-proxy (11.25) unstable; urgency=low

  * lb: fix error "Too many members"

 -- Max Kellermann <mk@cm4all.com>  Tue, 30 May 2017 18:17:53 -0000

cm4all-beng-proxy (11.24) unstable; urgency=low

  * {http,ajp}_client: fix crash after malformed URI without Keep-Alive

 -- Max Kellermann <mk@cm4all.com>  Wed, 24 May 2017 10:15:04 -0000

cm4all-beng-proxy (11.23) unstable; urgency=low

  * lb/tcp: fix stall bug
  * ssl: fix two stall bugs

 -- Max Kellermann <mk@cm4all.com>  Tue, 09 May 2017 16:25:08 -0000

cm4all-beng-proxy (11.22) unstable; urgency=low

  * bp: allow '=' in listener tag after --listen
  * was: fix crash bug
  * was: fix assertion failure

 -- Max Kellermann <mk@cm4all.com>  Thu, 13 Apr 2017 08:39:38 -0000

cm4all-beng-proxy (11.21) unstable; urgency=low

  * strmap: fix off-by-one bug
  * ssl: fix assertion failure
  * filter_cache: fix assertion failure
  * widget: detailed error message after untrusted host name mismatch
  * session: always apply SESSION_SITE

 -- Max Kellermann <mk@cm4all.com>  Wed, 15 Mar 2017 15:53:29 -0000

cm4all-beng-proxy (11.20) unstable; urgency=low

  * was: fix crash due to recursive error while sending STOP
  * was: fix crash if BODY is immediately followed by STATUS
  * widget: remove warning "... didn't send a response body"
  * filter_cache: fix assertion failure during shutdown
  * fcgi: fix assertion failure during shutdown

 -- Max Kellermann <mk@cm4all.com>  Mon, 13 Mar 2017 21:32:02 -0000

cm4all-beng-proxy (11.19) unstable; urgency=low

  * fix crash bug (assertion failure)
  * debian: remove unnecessary dependency on cm4all-certdb-sql

 -- Max Kellermann <mk@cm4all.com>  Mon, 13 Mar 2017 17:12:25 -0000

cm4all-beng-proxy (11.18) unstable; urgency=low

  * merge release 10.37

 -- Max Kellermann <mk@cm4all.com>  Tue, 28 Feb 2017 13:22:25 -0000

cm4all-beng-proxy (11.17) unstable; urgency=low

  * ssl: check for early PostgreSQL errors (e.g. DNS lookup failures)
  * certdb: set line-buffering mode
  * certdb: show HTTP status code in error message

 -- Max Kellermann <mk@cm4all.com>  Mon, 06 Feb 2017 17:08:23 -0000

cm4all-beng-proxy (11.16) unstable; urgency=low

  * http_{server,client}: reduce memory pool sizes
  * lb: SIGHUP flushes the certdb SSL session cache as well
  * lb: flush expired OpenSSL sessions every 10 minutes
  * lb: expire unused OpenSSL certificates after 24 hours
  * widget: enable Location header forwarding by default
  * translation: split header group "SSL" from "SECURE"
  * debian: move SQL scripts to package cm4all-certdb-sql

 -- Max Kellermann <mk@cm4all.com>  Mon, 30 Jan 2017 07:45:50 -0000

cm4all-beng-proxy (11.15) unstable; urgency=low

  * ssl: fix stall bug

 -- Max Kellermann <mk@cm4all.com>  Thu, 19 Jan 2017 20:56:55 -0000

cm4all-beng-proxy (11.14) unstable; urgency=low

  * http_client: fix assertion failure on chunked response cancellation
  * lb/tcp: fix assertion failure
  * ssl/filter: detect full input buffer, fail instead of stalling
  * enlarge I/O buffers to 16 kB to make large TLS fragments work

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Jan 2017 20:21:00 -0000

cm4all-beng-proxy (11.13) unstable; urgency=low

  * merge release 10.36
  * certdb: prefer certificates which expire later

 -- Max Kellermann <mk@cm4all.com>  Thu, 12 Jan 2017 20:18:08 -0000

cm4all-beng-proxy (11.12) unstable; urgency=low

  * merge release 10.35

 -- Max Kellermann <mk@cm4all.com>  Tue, 06 Dec 2016 08:03:09 -0000

cm4all-beng-proxy (11.11) unstable; urgency=low

  * fix theoretical data corruption bug in the header buffer
  * was: wait longer for PREMATURE after sending STOP
  * was: ignore in-flight packets during STOP recovery
  * was: implement early STOP recovery (before response headers)

 -- Max Kellermann <mk@cm4all.com>  Wed, 16 Nov 2016 19:47:11 -0000

cm4all-beng-proxy (11.10) unstable; urgency=low

  * merge release 10.34
  * systemd: override the locale, fixes "_S_create_c_locale" error

 -- Max Kellermann <mk@cm4all.com>  Tue, 25 Oct 2016 11:51:18 -0000

cm4all-beng-proxy (11.9) unstable; urgency=low

  * merge release 10.33

 -- Max Kellermann <mk@cm4all.com>  Wed, 19 Oct 2016 20:04:13 -0000

cm4all-beng-proxy (11.8) unstable; urgency=low

  * tcp_stock: fix crash during cancellation
  * config: fix memory leak

 -- Max Kellermann <mk@cm4all.com>  Sun, 09 Oct 2016 15:53:22 -0000

cm4all-beng-proxy (11.7) unstable; urgency=low

  * merge release 10.32
  * enforce Zeroconf/avahi-daemon browser notify after restarting beng-proxy

 -- Max Kellermann <mk@cm4all.com>  Tue, 04 Oct 2016 21:59:34 -0000

cm4all-beng-proxy (11.6) unstable; urgency=low

  * was: fix use-after-free bug

 -- Max Kellermann <mk@cm4all.com>  Thu, 29 Sep 2016 14:26:50 -0000

cm4all-beng-proxy (11.5) unstable; urgency=low

  * avahi: fix interface and protocol published via Zeroconf
  * lb: fix collision in Zeroconf node lookups
  * lb: support IPv6 link-local addresses from Zeroconf
  * lb: work around avahi-daemon IPv4/IPv6 mixup bug
  * config: allow space after '=' in @set
  * doc: remove bogus semicolons from configuration examples

 -- Max Kellermann <mk@cm4all.com>  Wed, 28 Sep 2016 21:42:43 -0000

cm4all-beng-proxy (11.4) unstable; urgency=low

  * merge release 10.31
  * bp: fix Zeroconf with automatic port

 -- Max Kellermann <mk@cm4all.com>  Tue, 27 Sep 2016 19:29:24 -0000

cm4all-beng-proxy (11.3) unstable; urgency=low

  * delegate: fix memory leak after clone() failure
  * avahi/client: fix shutdown hang due to event leak
  * config: add listener options "interface", "reuse_port"
  * lb: fix dbus connect failure due to process isolation
  * config: rename "include" to "@include"
  * config: introduce variables

 -- Max Kellermann <mk@cm4all.com>  Mon, 26 Sep 2016 20:28:47 -0000

cm4all-beng-proxy (11.2) unstable; urgency=low

  * disable the "V6ONLY" flag on all IPv6 wildcard listeners
  * fix crash bug due to uninitialized memory
  * etc: include conf.d/*.conf
  * debian: re-add dh_installinit to install the *.default files

 -- Max Kellermann <mk@cm4all.com>  Mon, 12 Sep 2016 11:32:14 -0000

cm4all-beng-proxy (11.1) unstable; urgency=low

  * merge release 10.30

 -- Max Kellermann <mk@cm4all.com>  Fri, 09 Sep 2016 09:28:23 -0000

cm4all-beng-proxy (11.0.3) unstable; urgency=low

  * config: allow shell wildcard after "include"
  * fcgi: fix "Connection refused" error
  * widget: improve error message when there is no address

 -- Max Kellermann <mk@cm4all.com>  Fri, 02 Sep 2016 12:55:19 -0000

cm4all-beng-proxy (11.0.2) unstable; urgency=low

  * spawn: fix clone=ENOMEM due to broken PID namespace
  * control: allow only TCACHE_INVALIDATE, STATS and NODE_STATUS via IP
  * config: add command "include_optional"

 -- Max Kellermann <mk@cm4all.com>  Wed, 31 Aug 2016 13:32:35 -0000

cm4all-beng-proxy (11.0.1) unstable; urgency=low

  * spawn: switch to a new systemd scope
  * spawn: create new PID namespace
  * spawn: create systemd journal identifier
  * translation: add packets CGROUP, CGROUP_SET, EXTERNAL_SESSION_MANAGER,
    EXTERNAL_SESSION_KEEPALIVE
  * session: allow multiple realms per session
  * ssl: free more drained I/O buffers
  * ssl: reduce memory usage
  * SlicePool: reduce fragmentation
  * enable TCP_DEFER_ACCEPT for HTTP listeners
  * remove the "args_escape_char" kludge after 5 years of transition
  * support kB, MB, GB suffixes in cache size specifications
  * bp: add configuration file
  * bp: allow multiple control listeners
  * lb: allow including configuration files
  * debian/lb.postinst: move user "cm4all-beng-lb" to group "nogroup"
  * remove obsolete sysv init scripts, depend on systemd instead
  * ZeroConf publish support

 -- Max Kellermann <mk@cm4all.com>  Tue, 30 Aug 2016 22:24:03 -0000

cm4all-beng-proxy (10.37) unstable; urgency=low

  * translation: expand REDIRECT with BASE

 -- Max Kellermann <mk@cm4all.com>  Tue, 28 Feb 2017 13:16:57 -0000

cm4all-beng-proxy (10.36) unstable; urgency=low

  * certdb: fix crash bug
  * lb: allow core dumps from within the isolated process

 -- Max Kellermann <mk@cm4all.com>  Thu, 12 Jan 2017 20:08:07 -0000

cm4all-beng-proxy (10.35) unstable; urgency=low

  * ssl: OpenSSL 1.1 compatibility
  * bot: add another Majestic bot user agent string
  * systemd: depend on network-online.target

 -- Max Kellermann <mk@cm4all.com>  Tue, 06 Dec 2016 07:42:56 -0000

cm4all-beng-proxy (10.34) unstable; urgency=low

  * lb: adapt to Linux 4.8 user namespace API change

 -- Max Kellermann <mk@cm4all.com>  Tue, 25 Oct 2016 11:35:30 -0000

cm4all-beng-proxy (10.33) unstable; urgency=low

  * spawn: create systemd journal identifier
  * spawn: no signal interruption while waiting for client to become ready
  * spawn: allow numeric uids/gids after --allow-user / --allow-group
  * was: add stopwatch support

 -- Max Kellermann <mk@cm4all.com>  Wed, 19 Oct 2016 19:38:21 -0000

cm4all-beng-proxy (10.32) unstable; urgency=low

  * merge release 9.16

 -- Max Kellermann <mk@cm4all.com>  Tue, 04 Oct 2016 11:05:53 -0000

cm4all-beng-proxy (10.31) unstable; urgency=low

  * fix memory leak after resource loader failure
  * delegate: fix memory leak after clone() failure
  * was: fix crash on spawn error

 -- Max Kellermann <mk@cm4all.com>  Tue, 27 Sep 2016 18:54:54 -0000

cm4all-beng-proxy (10.30) unstable; urgency=low

  * merge release 9.15

 -- Max Kellermann <mk@cm4all.com>  Thu, 08 Sep 2016 14:50:50 -0000

cm4all-beng-proxy (10.29) unstable; urgency=low

  * istream/pipe: fix crash after running out of file descriptors
  * bp: raise default connection limit to 32k
  * delegate: fix potential crash
  * translation: detect BASE/URI mismatch with INTERNAL_REDIRECT
  * lb/monitor/expect: fix assertion failure on shutdown
  * systemd: set default NOFILE limits to 256k
  * systemd: enable crash dumps

 -- Max Kellermann <mk@cm4all.com>  Wed, 07 Sep 2016 07:57:48 -0000

cm4all-beng-proxy (10.28) unstable; urgency=low

  * widget: improve error message when there is no address
  * lb: fix default control port
  * debian: adjust Ruby dependencies for Debian Jessie

 -- Max Kellermann <mk@cm4all.com>  Mon, 05 Sep 2016 10:58:34 -0000

cm4all-beng-proxy (10.27) unstable; urgency=low

  * ssl: disable RC4
  * ssl: ignore the client's cipher preferences
  * ssl: send TLS alert to peer after handshake refusal
  * fix crash when compiled with GCC6

 -- Max Kellermann <mk@cm4all.com>  Mon, 22 Aug 2016 18:34:30 -0000

cm4all-beng-proxy (10.26) unstable; urgency=low

  * bot: recognize WordPress pingbacks as "bot"
  * lb/monitor/expect: delay the receive call by 10ms
  * certdb, bp_cmdline, log-forward: use IPv6 only if available

 -- Max Kellermann <mk@cm4all.com>  Thu, 11 Aug 2016 13:04:23 -0000

cm4all-beng-proxy (10.25) unstable; urgency=low

  * shm: fix double allocation bug which caused session corruption

 -- Max Kellermann <mk@cm4all.com>  Thu, 21 Jul 2016 18:54:12 -0000

cm4all-beng-proxy (10.24) unstable; urgency=low

  * http_client: fix "excess data" error after "100 Continue"

 -- Max Kellermann <mk@cm4all.com>  Wed, 20 Jul 2016 12:25:34 -0000

cm4all-beng-proxy (10.23) unstable; urgency=low

  * cgi: ignore the "Proxy" request header to work around security
    vulnerabilities in several CGI programs
  * http_client: differentiate between "empty response body" and "no body"
  * http_server: log "-" if there is no response body

 -- Max Kellermann <mk@cm4all.com>  Tue, 19 Jul 2016 13:43:34 -0000

cm4all-beng-proxy (10.22) unstable; urgency=low

  * debian/control: add missing dependency on libcm4all-inline-dev
  * http_address: ensure that at least one socket address is specified
  * systemd: implement "reload"

 -- Max Kellermann <mk@cm4all.com>  Mon, 04 Jul 2016 11:12:29 -0000

cm4all-beng-proxy (10.21) unstable; urgency=low

  * session: fix user expiry after defragmentation
  * session: save site name in session file

 -- Max Kellermann <mk@cm4all.com>  Wed, 08 Jun 2016 20:07:13 -0000

cm4all-beng-proxy (10.20) unstable; urgency=low

  * fix nullptr dereference while removing stale "session" parameter

 -- Max Kellermann <mk@cm4all.com>  Wed, 25 May 2016 11:06:38 -0000

cm4all-beng-proxy (10.19) unstable; urgency=low

  * merge release 9.14
  * log the request URI on session realm mismatch
  * omit stale "session" parameter in processed URIs

 -- Max Kellermann <mk@cm4all.com>  Tue, 24 May 2016 17:36:07 -0000

cm4all-beng-proxy (10.18) unstable; urgency=low

  * http_client: fix TLS memory leak / crash bug

 -- Max Kellermann <mk@cm4all.com>  Thu, 19 May 2016 10:49:58 -0000

cm4all-beng-proxy (10.17) unstable; urgency=low

  * spawn/client: handle empty payloads from recvmmsg()

 -- Max Kellermann <mk@cm4all.com>  Mon, 09 May 2016 10:05:55 -0000

cm4all-beng-proxy (10.16) unstable; urgency=low

  * control: enable SO_REUSEADDR on the UDP socket

 -- Max Kellermann <mk@cm4all.com>  Fri, 29 Apr 2016 13:13:31 -0000

cm4all-beng-proxy (10.15) unstable; urgency=low

  * was: fix crash after spawn failure
  * spawn/client: abort worker process when the spawner is gone
  * spawn/client: optimize message receiver
  * spawn/server: retry sending after EAGAIN

 -- Max Kellermann <mk@cm4all.com>  Fri, 29 Apr 2016 09:31:54 -0000

cm4all-beng-proxy (10.14) unstable; urgency=low

  * enable TCP_DEFER_ACCEPT for HTTP and SSL listeners
  * ssl: increase the handshake timeout to 60 seconds
  * lb: log the client IP address

 -- Max Kellermann <mk@cm4all.com>  Thu, 28 Apr 2016 09:24:19 -0000

cm4all-beng-proxy (10.13) unstable; urgency=low

  * was: fix crash after early-crashing WAS process
  * was: fix crash after WAS process has been released
  * ssl: limit the handshake duration
  * beng-proxy: support listening on UNIX domain sockets

 -- Max Kellermann <mk@cm4all.com>  Wed, 27 Apr 2016 18:34:26 -0000

cm4all-beng-proxy (10.12) unstable; urgency=low

  * ssl: reduce allocator fragmentation, cycle another buffer

 -- Max Kellermann <mk@cm4all.com>  Thu, 21 Apr 2016 07:29:51 -0000

cm4all-beng-proxy (10.11) unstable; urgency=low

  * thread_queue: fix race condition
  * ssl: reduce allocator fragmentation

 -- Max Kellermann <mk@cm4all.com>  Mon, 18 Apr 2016 14:51:41 -0000

cm4all-beng-proxy (10.10) unstable; urgency=low

  * merge release 9.13
  * SlicePool: reduce fragmentation

 -- Max Kellermann <mk@cm4all.com>  Tue, 12 Apr 2016 15:12:03 -0000

cm4all-beng-proxy (10.9) unstable; urgency=low

  * merge release 9.12

 -- Max Kellermann <mk@cm4all.com>  Wed, 06 Apr 2016 12:11:38 -0000

cm4all-beng-proxy (10.8) unstable; urgency=low

  * SlicePool: optimize allocation
  * lb: cycle buffers before compressing slice allocator
  * was: fix spurious "Resource temporarily unavailable" warnings

 -- Max Kellermann <mk@cm4all.com>  Wed, 06 Apr 2016 06:35:37 -0000

cm4all-beng-proxy (10.7) unstable; urgency=low

  * lb: fix systemd service start timeout
  * spawn: fix assertion failure when STDERR_PATH fails
  * was: fix use-after-free bug

 -- Max Kellermann <mk@cm4all.com>  Tue, 29 Mar 2016 10:31:34 -0000

cm4all-beng-proxy (10.6) unstable; urgency=low

  * lb: fix false memory leak during shutdown
  * ssl: cycle buffers to reduce allocator fragmentation

 -- Max Kellermann <mk@cm4all.com>  Wed, 23 Mar 2016 14:16:55 -0000

cm4all-beng-proxy (10.5) unstable; urgency=low

  * lb: fix crash due to duplicate OpenSSL initialization by libpq
  * lb: check cert_db.ca_cert settings with --check
  * lb: fix shutdown with --watchdog
  * http_client: fix assertion failure with keep-alive disabled
  * http_server: fix missing "100 Continue"
  * certdb: unwrap key in "new-cert
  * certdb: allow overriding database with /etc/cm4all/beng/certdb.connect
  * spawn: fix assertion failure

 -- Max Kellermann <mk@cm4all.com>  Tue, 08 Mar 2016 16:01:22 -0000

cm4all-beng-proxy (10.4) unstable; urgency=low

  * merge release 9.11
  * spawn: fix uninitialized MOUNT_TMP_TMPFS setting

 -- Max Kellermann <mk@cm4all.com>  Thu, 03 Mar 2016 13:11:49 -0000

cm4all-beng-proxy (10.3) unstable; urgency=low

  * lhttp: fix double free bug
  * lhttp, fcgi: abandon child process after connect failure
  * spawn: wait for spawn process during shutdown
  * {http,filter,nfs}_cache: raise cacheable size limit to 512 kB
  * http_client: reschedule read event after blocking write recovery

 -- Max Kellermann <mk@cm4all.com>  Wed, 02 Mar 2016 14:06:44 -0000

cm4all-beng-proxy (10.2) unstable; urgency=low

  * rubber: remove excessive debugging code to speed up cache flush
  * spawn: fix SETENV breakage
  * spawn: initialize supplementary groups
  * spawn: change to user www-data by default
  * http_client: fix double free bug
  * fcache: raise default expiration to one week
  * systemd: set "Type=notify"

 -- Max Kellermann <mk@cm4all.com>  Tue, 01 Mar 2016 18:43:23 -0000

cm4all-beng-proxy (10.1) unstable; urgency=low

  * merge release 9.10
  * python: add missing constant TRANSLATE_REALM_FROM_AUTH_BASE
  * spawn: dedicated process for spawning child processes
  * fcgi: terminate FastCGI processes with SIGTERM instead of SIGUSR1
  * was: implement response body interruption
  * translation: add packet NO_NEW_PRIVS
  * session: 128 bit session ids
  * emit systemd "READY" notification
  * debian: eliminate the TOI build

 -- Max Kellermann <mk@cm4all.com>  Thu, 25 Feb 2016 23:55:33 -0000

cm4all-beng-proxy (10.0.5) unstable; urgency=low

  * http_client: fix memory leak
  * spawn/prepared: fix environment variable breakage
  * request: fix crash (due to realm regression in 10.0.4)

 -- Max Kellermann <mk@cm4all.com>  Tue, 09 Feb 2016 18:09:43 -0000

cm4all-beng-proxy (10.0.4) unstable; urgency=low

  * istream/dechunk: merge chunk sizes
  * istream/dechunk: fix bogus "closed prematurely" error
  * spawn/JailConfig: fix jail.conf parser regression
  * translate_parser: fix JailCGI home path regression
  * translation: add packet REALM_FROM_AUTH_BASE
  * translation: allow mount options in MOUNT_TMP_TMPFS
  * pipe_filter: add JailCGI support
  * fcgi/stock: fix double free bug
  * http_request: fix connection leak after OpenSSL error
  * ssl/cache: fix two crash bugs
  * ssl/cache: reduce delay from 1s to 200ms
  * ssl/cache: maintain cache only in worker process
  * ssl/cache: support CA chains
  * ssl/factory: support the subjectAltName extension
  * ssl/filter: handle "close notify" alerts
  * certdb: rename PostgreSQL table to singular
  * certdb: load PostgreSQL connect string from lb.conf
  * certdb: support the subjectAltName extension
  * certdb: implement the ACME protocol
  * systemd/lb: disable --watchdog, set Restart=on-failure instead
  * systemd/bp: default to --workers=0, set Restart=on-failure instead

 -- Max Kellermann <mk@cm4all.com>  Thu, 04 Feb 2016 21:12:22 -0000

cm4all-beng-proxy (10.0.3) unstable; urgency=low

  * ssl/cache: populate name cache asynchronously
  * certdb: add command "populate"

 -- Max Kellermann <mk@cm4all.com>  Tue, 12 Jan 2016 10:35:32 -0000

cm4all-beng-proxy (10.0.2) unstable; urgency=low

  * ssl/cache: open multiple PostgreSQL connections on demand
  * ssl/cache: mirror a list of all certificate host names
  * certdb: add command "delete"

 -- Max Kellermann <mk@cm4all.com>  Wed, 06 Jan 2016 11:11:51 -0000

cm4all-beng-proxy (10.0.1) unstable; urgency=low

  * drop support for Debian Squeeze
  * inline_widget: time out after 10 seconds
  * lb: support SSL certificates stored in PostgreSQL database
  * disable the access log by default

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Dec 2015 18:48:31 -0000

cm4all-beng-proxy (9.16) unstable; urgency=low

  * fix memory leak after resource loader failure
  * was: fix crash on spawn error
  * fcache: check X-CM4all-BENG-User (via REVEAL_USER) in cache lookup

 -- Max Kellermann <mk@cm4all.com>  Tue, 04 Oct 2016 10:44:09 -0000

cm4all-beng-proxy (9.15) unstable; urgency=low

  * cgi: ignore the "Proxy" request header to work around security
    vulnerabilities in several CGI programs
  * http_address: ensure that at least one socket address is specified
  * http_server: update the "raw bytes sent" attribute properly
  * http_client: differentiate between "empty response body" and "no body"
  * http_client: fix "excess data" error after "100 Continue"
  * fcgi: fix assertion failure
  * shm: fix double allocation bug which caused session corruption
  * session: fix user expiry after defragmentation
  * omit stale "session" parameter in processed URIs
  * bot: recognize WordPress pingbacks as "bot"
  * fix crash when compiled with GCC6
  * bp: raise default connection limit to 32k
  * systemd: set default NOFILE limits to 256k
  * systemd: enable crash dumps

 -- Max Kellermann <mk@cm4all.com>  Thu, 08 Sep 2016 14:25:37 -0000

cm4all-beng-proxy (9.14) unstable; urgency=low

  * merge release 8.13
  * was: fix crash on malformed STATUS packet

 -- Max Kellermann <mk@cm4all.com>  Fri, 20 May 2016 15:43:48 -0000

cm4all-beng-proxy (9.13) unstable; urgency=low

  * merge release 8.12
  * lb: fix false memory leak during shutdown

 -- Max Kellermann <mk@cm4all.com>  Tue, 12 Apr 2016 13:03:18 -0000

cm4all-beng-proxy (9.12) unstable; urgency=low

  * header-forward: fix duplicate "Location" header

 -- Max Kellermann <mk@cm4all.com>  Wed, 06 Apr 2016 12:09:46 -0000

cm4all-beng-proxy (9.11) unstable; urgency=low

  * merge release 8.11

 -- Max Kellermann <mk@cm4all.com>  Thu, 03 Mar 2016 13:03:41 -0000

cm4all-beng-proxy (9.10) unstable; urgency=low

  * merge release 8.10

 -- Max Kellermann <mk@cm4all.com>  Wed, 24 Feb 2016 11:46:38 -0000

cm4all-beng-proxy (9.9) unstable; urgency=low

  * merge release 8.9

 -- Max Kellermann <mk@cm4all.com>  Tue, 23 Feb 2016 15:56:21 -0000

cm4all-beng-proxy (9.8) unstable; urgency=low

  * merge release 8.8

 -- Max Kellermann <mk@cm4all.com>  Tue, 16 Feb 2016 11:30:47 -0000

cm4all-beng-proxy (9.7) unstable; urgency=low

  * merge release 8.7
  * http_request: fix connection leak after OpenSSL error

 -- Max Kellermann <mk@cm4all.com>  Tue, 26 Jan 2016 15:56:31 -0000

cm4all-beng-proxy (9.6) unstable; urgency=low

  * systemd: log to systemd-journald by default
  * header_forward: fix duplicate "Location" header
  * "--access-logger=null" disables the access log
  * widget: log Set-Cookie without host

 -- Max Kellermann <mk@cm4all.com>  Thu, 17 Dec 2015 22:15:04 -0000

cm4all-beng-proxy (9.5) unstable; urgency=low

  * merge release 4.23
  * auth: send the LISTENER_TAG packet with AUTH requests

 -- Max Kellermann <mk@cm4all.com>  Tue, 15 Dec 2015 13:46:36 -0000

cm4all-beng-proxy (9.4) unstable; urgency=low

  * processor: fix crash bug
  * ajp: fix bogus error "Peer closed the socket prematurely"
  * fcgi: fail after receiving excess data at end of response body
  * fcgi: fix assertion failure on i386
  * was: fold header name case
  * was: announce request body length as early as possible
  * was: fix crash bug with empty response

 -- Max Kellermann <mk@cm4all.com>  Thu, 19 Nov 2015 11:28:59 -0000

cm4all-beng-proxy (9.3) unstable; urgency=low

  * fcgi: fix buffer overflow with large response body
  * header_forward: always forward "Allow"

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Nov 2015 00:33:20 -0000

cm4all-beng-proxy (9.2) unstable; urgency=low

  * translate_client: fix crash bug

 -- Max Kellermann <mk@cm4all.com>  Mon, 16 Nov 2015 08:38:02 -0000

cm4all-beng-proxy (9.1) unstable; urgency=low

  * feature freeze
  * http_client: response body allows optimized socket writes
  * http_cache: response body allows optimized socket writes
  * fcgi: fix stall bug
  * fcgi: optimized response body chunking
  * fcgi: don't send empty PARAMS packet when request headers are empty
  * handler: use lstat() for FILE_NOT_FOUND
  * client_balancer: fix memory leak
  * istream: fix assertion failure
  * istream_tee: fix size miscalculation
  * nfs_stock: fix assertion failure
  * translate_cache: optimize memory usage
  * reduce fork() overhead

 -- Max Kellermann <mk@cm4all.com>  Fri, 13 Nov 2015 00:50:52 -0000

cm4all-beng-proxy (9.0.9) unstable; urgency=low

  * tstock: fix libevent crash on connection failure
  * tstock: fix hanging process during shutdown
  * request_session: don't send cleared session id of ignored session
  * pipe_stock: fix EBADF error due to malformed pointer cast
  * http_{client,server}: optimize chunked socket writes

 -- Max Kellermann <mk@cm4all.com>  Fri, 06 Nov 2015 23:39:50 -0000

cm4all-beng-proxy (9.0.8) unstable; urgency=low

  * child_stock: fix crash bug
  * translate_stock: fix use-after-free crash bug

 -- Max Kellermann <mk@cm4all.com>  Thu, 05 Nov 2015 15:14:43 -0000

cm4all-beng-proxy (9.0.7) unstable; urgency=low

  * merge release 8.6
  * ajp: fix regression after code refactoring
  * http_{client,server}: optimize socket writes
  * translate_stock: configurable stock limit, defaulting to 64
  * translate_cache: fix crash bug when cache is disabled
  * errdoc: fix crash bug when aborting error document generator

 -- Max Kellermann <mk@cm4all.com>  Wed, 04 Nov 2015 21:50:44 -0000

cm4all-beng-proxy (9.0.6) unstable; urgency=low

  * debian/rules: cross-compiler support
  * debian: build with gcc 5 on Debian Stretch
  * processor: fix broken URI rewrite after <script> due to inverted check
  * widget: log class name

 -- Max Kellermann <mk@cm4all.com>  Fri, 16 Oct 2015 10:21:42 -0000

cm4all-beng-proxy (9.0.5) unstable; urgency=low

  * merge release 8.5

 -- Max Kellermann <mk@cm4all.com>  Mon, 12 Oct 2015 10:44:20 -0000

cm4all-beng-proxy (9.0.4) unstable; urgency=low

  * xml_parser: fix assertion failure on abort
  * css_parser: fix buffer overflow due to off-by-one check

 -- Max Kellermann <mk@cm4all.com>  Thu, 08 Oct 2015 19:32:07 -0000

cm4all-beng-proxy (9.0.3) unstable; urgency=low

  * fcgi: fix uninitialized variable
  * processor: fix heap corruption due to wrong string length

 -- Max Kellermann <mk@cm4all.com>  Wed, 07 Oct 2015 19:56:05 -0000

cm4all-beng-proxy (9.0.2) unstable; urgency=low

  * translation: packet REVEAL_USER sends X-CM4all-BENG-User to filter

 -- Max Kellermann <mk@cm4all.com>  Mon, 05 Oct 2015 19:08:22 -0000

cm4all-beng-proxy (9.0.1) unstable; urgency=low

  * merge release 8.4
  * translation: add header group "LINK"
  * translation: add packet MOUNT_TMPFS
  * fix spurious BIND_MOUNT_RW failures

 -- Max Kellermann <mk@cm4all.com>  Fri, 02 Oct 2015 15:36:42 -0000

cm4all-beng-proxy (8.13) unstable; urgency=low

  * http_client: fix TLS memory leak
  * http_client: fix assertion failure with keep-alive disabled
  * was: fix crash after early-crashing WAS process
  * lb: fix false memory leak during shutdown
  * http_server: fix missing "100 Continue"
  * {http,filter,nfs}_cache: raise cacheable size limit to 512 kB
  * fcache: raise default expiration to one week
  * rubber: remove excessive debugging code to speed up cache flush

 -- Max Kellermann <mk@cm4all.com>  Fri, 20 May 2016 15:34:32 -0000

cm4all-beng-proxy (8.12) unstable; urgency=low

  * was: fix crash on malformed STATUS packet
  * was: allow 16 bit STATUS packet

 -- Max Kellermann <mk@cm4all.com>  Tue, 12 Apr 2016 12:28:21 -0000

cm4all-beng-proxy (8.11) unstable; urgency=low

  * http_client: fix assertion failure with TLS
  * lhttp, fcgi: abandon child process after connect failure
  * http_client: reschedule read event after blocking write recovery

 -- Max Kellermann <mk@cm4all.com>  Thu, 03 Mar 2016 12:59:50 -0000

cm4all-beng-proxy (8.10) unstable; urgency=low

  * was/input: verify the announced LENGTH
  * was/input: fix the "available" formula

 -- Max Kellermann <mk@cm4all.com>  Wed, 24 Feb 2016 11:31:50 -0000

cm4all-beng-proxy (8.9) unstable; urgency=low

  * istream/catch: fix another assertion failure

 -- Max Kellermann <mk@cm4all.com>  Tue, 23 Feb 2016 15:52:46 -0000

cm4all-beng-proxy (8.8) unstable; urgency=low

  * istream/catch: fix assertion failure

 -- Max Kellermann <mk@cm4all.com>  Tue, 16 Feb 2016 11:21:25 -0000

cm4all-beng-proxy (8.7) unstable; urgency=low

  * cgi, pipe: fix off-by-one bug in stderr filter

 -- Max Kellermann <mk@cm4all.com>  Tue, 26 Jan 2016 15:55:03 -0000

cm4all-beng-proxy (8.6) unstable; urgency=low

  * merge release 7.9

 -- Max Kellermann <mk@cm4all.com>  Mon, 26 Oct 2015 09:48:00 -0000

cm4all-beng-proxy (8.5) unstable; urgency=low

  * css_parser: fix buffer overflow due to off-by-one check
  * fcgi: fix uninitialized variable
  * fix spurious BIND_MOUNT_RW failures
  * fix two crashes due to malformed URI escapes

 -- Max Kellermann <mk@cm4all.com>  Mon, 12 Oct 2015 10:20:32 -0000

cm4all-beng-proxy (8.4) unstable; urgency=low

  * was: fix another memory leak

 -- Max Kellermann <mk@cm4all.com>  Fri, 02 Oct 2015 11:05:21 -0000

cm4all-beng-proxy (8.3) unstable; urgency=low

  * was: fix several memory leaks

 -- Max Kellermann <mk@cm4all.com>  Fri, 02 Oct 2015 09:54:09 -0000

cm4all-beng-proxy (8.2) unstable; urgency=low

  * debian/control: add "Breaks" on old translation servers to avoid
    runtime breakages due to broken widget descriptors; the translation
    server 1.9.1 contains a workaround
  * translate_parser: fix crash after malformed/misplaced
    UNTRUSTED_*_SITE_SUFFIX packet

 -- Max Kellermann <mk@cm4all.com>  Fri, 25 Sep 2015 12:55:18 -0000

cm4all-beng-proxy (8.1) unstable; urgency=low

  * feature freeze
  * fb_pool: compress I/O buffers periodically
  * http_cache, fcache, nfs_cache: compress the cache periodically

 -- Max Kellermann <mk@cm4all.com>  Tue, 22 Sep 2015 17:26:06 -0000

cm4all-beng-proxy (8.0.13) unstable; urgency=low

  * merge release 7.8
  * translation: support writable bind mounts (BIND_MOUNT_RW)
  * translation: add packet UNTRUSTED_RAW_SITE_SUFFIX
  * ssl: initialize OpenSSL engines
  * rewrite_uri: support "https://" and "//" URIs
  * regex: fix double free bug

 -- Max Kellermann <mk@cm4all.com>  Tue, 22 Sep 2015 08:00:20 -0000

cm4all-beng-proxy (8.0.12) unstable; urgency=low

  * merge release 7.7
  * rubber: optimized hole search
  * rubber: simplified defragmentation on tail allocation

 -- Max Kellermann <mk@cm4all.com>  Thu, 17 Sep 2015 20:41:59 -0000

cm4all-beng-proxy (8.0.11) unstable; urgency=low

  * regex: fix move operator, fixes spurious "Invalid regex capture"

 -- Max Kellermann <mk@cm4all.com>  Thu, 03 Sep 2015 13:08:16 -0000

cm4all-beng-proxy (8.0.10) unstable; urgency=low

  * regex: mismatching optional capture expands to empty string
  * regex: work around problem with mismatching optional last capture
  * request: avoid compressing the response body twice

 -- Max Kellermann <mk@cm4all.com>  Wed, 02 Sep 2015 15:56:38 -0000

cm4all-beng-proxy (8.0.9) unstable; urgency=low

  * merge release 7.6
  * regex: fix off-by-one error in capture range check

 -- Max Kellermann <mk@cm4all.com>  Tue, 01 Sep 2015 13:57:06 -0000

cm4all-beng-proxy (8.0.8) unstable; urgency=low

  * tcache: fix crash on regex mismatch

 -- Max Kellermann <mk@cm4all.com>  Mon, 31 Aug 2015 05:35:14 -0000

cm4all-beng-proxy (8.0.7) unstable; urgency=low

  * merge release 7.5
  * regex: fix spurious compile failures
  * fcache: include actual body data in stats
  * nfs_cache: add stats
  * fix several crash bugs with malformed URI escapes
  * control/stats: add cache brutto sizes
  * control/stats: add I/O buffers size

 -- Max Kellermann <mk@cm4all.com>  Thu, 27 Aug 2015 22:11:02 -0000

cm4all-beng-proxy (8.0.6) unstable; urgency=low

  * translation: decouple REGEX_UNESCAPE from INVERSE_REGEX

 -- Max Kellermann <mk@cm4all.com>  Tue, 25 Aug 2015 09:57:23 -0000

cm4all-beng-proxy (8.0.5) unstable; urgency=low

  * translation: add packet INVERSE_REGEX_UNESCAPE

 -- Max Kellermann <mk@cm4all.com>  Mon, 24 Aug 2015 16:58:16 -0000

cm4all-beng-proxy (8.0.4) unstable; urgency=low

  * translate_client: fix crash due to uninitialized variable

 -- Max Kellermann <mk@cm4all.com>  Fri, 21 Aug 2015 11:26:40 -0000

cm4all-beng-proxy (8.0.3) unstable; urgency=low

  * translation: add login packet SERVICE
  * translation: login allows packet LISTENER_TAG
  * translation: protocol v3 uses anchored regex
  * regex: disable the "multi-line" option
  * regex: switch to the PCRE library

 -- Max Kellermann <mk@cm4all.com>  Mon, 17 Aug 2015 14:31:32 -0000

cm4all-beng-proxy (8.0.2) unstable; urgency=low

  * translation: add packets LOGIN, PASSWORD, UID_GID
  * translation: native Refence support

 -- Max Kellermann <mk@cm4all.com>  Thu, 06 Aug 2015 11:15:58 -0000

cm4all-beng-proxy (8.0.1) unstable; urgency=low

  * cgi, pipe: log PID in stderr output
  * translation: add packets AUTO_GZIP, INTERNAL_REDIRECT

 -- Max Kellermann <mk@cm4all.com>  Fri, 24 Jul 2015 10:27:51 -0000

cm4all-beng-proxy (7.9) unstable; urgency=low

  * merge release 6.12

 -- Max Kellermann <mk@cm4all.com>  Mon, 26 Oct 2015 09:37:41 -0000

cm4all-beng-proxy (7.8) unstable; urgency=low

  * support SESSION_SITE in processor

 -- Max Kellermann <mk@cm4all.com>  Mon, 21 Sep 2015 12:26:13 -0000

cm4all-beng-proxy (7.7) unstable; urgency=low

  * merge release 6.11

 -- Max Kellermann <mk@cm4all.com>  Thu, 17 Sep 2015 19:08:50 -0000

cm4all-beng-proxy (7.6) unstable; urgency=low

  * merge release 6.10
  * fcache: include actual body data in stats
  * nfs_cache: add stats
  * control/stats: add cache brutto sizes
  * control/stats: add I/O buffers size

 -- Max Kellermann <mk@cm4all.com>  Tue, 01 Sep 2015 12:48:48 -0000

cm4all-beng-proxy (7.5) unstable; urgency=low

  * merge release 6.9

 -- Max Kellermann <mk@cm4all.com>  Thu, 27 Aug 2015 14:30:18 -0000

cm4all-beng-proxy (7.4) unstable; urgency=low

  * merge release 6.8
  * tcache: fix minor memory leak

 -- Max Kellermann <mk@cm4all.com>  Wed, 26 Aug 2015 13:29:42 -0000

cm4all-beng-proxy (7.3) unstable; urgency=low

  * merge release 6.7

 -- Max Kellermann <mk@cm4all.com>  Wed, 22 Jul 2015 21:18:30 -0000

cm4all-beng-proxy (7.2) unstable; urgency=low

  * translation: allow REGEX_ON_{HOST,USER}_URI with INVERSE_REGEX

 -- Max Kellermann <mk@cm4all.com>  Fri, 17 Jul 2015 06:53:50 -0000

cm4all-beng-proxy (7.1) unstable; urgency=low

  * feature freeze
  * translation: WANT supports USER
  * translation: add packet REGEX_ON_USER_URI

 -- Max Kellermann <mk@cm4all.com>  Tue, 14 Jul 2015 20:46:43 -0000

cm4all-beng-proxy (7.0.10) unstable; urgency=low

  * fix crash on "Cache-Control: only-if-cached"
  * fix worker respawn

 -- Max Kellermann <mk@cm4all.com>  Sat, 11 Jul 2015 10:19:11 -0000

cm4all-beng-proxy (7.0.9) unstable; urgency=low

  * istream_escape: fix crash bug when last byte is escaped
  * stats: don't crash master process on CONTROL_STATS
  * debian/rules: add kludge to support dh_python2 on Squeeze

 -- Max Kellermann <mk@cm4all.com>  Thu, 09 Jul 2015 11:40:12 -0000

cm4all-beng-proxy (7.0.8) unstable; urgency=low

  * translation: add packets EXPAND_HOME, EXPAND_STDERR_PATH
  * translation: apply EXPAND_URI to CGI addresses
  * session: fix crash while invalidating widget session

 -- Max Kellermann <mk@cm4all.com>  Thu, 25 Jun 2015 13:29:01 -0000

cm4all-beng-proxy (7.0.7) unstable; urgency=low

  * translation: add packet AUTO_DEFLATE
  * istream_deflate: fix stalled stream
  * tcache: expand uncacheable responses

 -- Max Kellermann <mk@cm4all.com>  Wed, 24 Jun 2015 11:43:47 -0000

cm4all-beng-proxy (7.0.6) unstable; urgency=low

  * tcache: expand responses of uncacheable requests

 -- Max Kellermann <mk@cm4all.com>  Fri, 19 Jun 2015 13:02:32 -0000

cm4all-beng-proxy (7.0.5) unstable; urgency=low

  * merge release 6.6
  * control: flush the whole translation cache if the TCACHE_INVALIDATE
    payload is empty
  * namespace: support IPC namespaces

 -- Max Kellermann <mk@cm4all.com>  Thu, 11 Jun 2015 16:31:34 -0000

cm4all-beng-proxy (7.0.4) unstable; urgency=low

  * handler: send LISTENER_TAG if translation protocol version is not yet
    negotiated
  * handler: bypass translation cache during protocol version negotiation

 -- Max Kellermann <mk@cm4all.com>  Thu, 28 May 2015 13:10:12 -0000

cm4all-beng-proxy (7.0.3) unstable; urgency=low

  * handler: more "verbose_response" messages
  * handler: return "502 Bad Gateway" on translation server error
  * translation: protocol v2 always transmits LISTENER_TAG
  * translation: add packets REGEX_ON_HOST_URI, SESSION_SITE
  * session_manager: fix bogus assertion failure in cleanup
  * build with libwas 1.0

 -- Max Kellermann <mk@cm4all.com>  Wed, 20 May 2015 16:41:44 -0000

cm4all-beng-proxy (7.0.2) unstable; urgency=low

  * merge release 6.5
  * require Boost 1.49

 -- Max Kellermann <mk@cm4all.com>  Wed, 29 Apr 2015 11:43:57 -0000

cm4all-beng-proxy (7.0.1) unstable; urgency=low

  * forward the "Accept-Ranges" response header
  * forward the "Range" request header
  * forward the request headers "Accept-Charset" and "Accept-Encoding" to
    frame widgets

 -- Max Kellermann <mk@cm4all.com>  Fri, 13 Mar 2015 16:53:29 -0000

cm4all-beng-proxy (6.12) unstable; urgency=low

  * css_parser: fix buffer overflow due to off-by-one check
  * fcgi: fix uninitialized variable
  * was: fix error after blocking send on control channel
  * fb_pool: compress I/O buffers periodically
  * ssl: initialize OpenSSL engines
  * support SESSION_SITE in processor
  * lb: never forward headers X-CM4all-BENG-Peer-Subject and
    X-CM4all-BENG-Peer-Issuer-Subject

 -- Max Kellermann <mk@cm4all.com>  Mon, 26 Oct 2015 09:34:09 -0000

cm4all-beng-proxy (6.11) unstable; urgency=low

  * fcgi_client: fix hang after error logger failure

 -- Max Kellermann <mk@cm4all.com>  Thu, 17 Sep 2015 19:06:14 -0000

cm4all-beng-proxy (6.10) unstable; urgency=low

  * translate_parser: allow absolute LOCAL_URI
  * uri-verify: don't check the query string
  * bp_control: let worker handle control packets in single-worker mode
  * stock: fix "outgoing_connections" being always zero in control stats
  * lb_stats: include TCP connections in "outgoing_connections"

 -- Max Kellermann <mk@cm4all.com>  Tue, 01 Sep 2015 11:51:11 -0000

cm4all-beng-proxy (6.9) unstable; urgency=low

  * fcgi_client: ignore STDERR packets in size calculation

 -- Max Kellermann <mk@cm4all.com>  Thu, 27 Aug 2015 14:04:04 -0000

cm4all-beng-proxy (6.8) unstable; urgency=low

  * tcache: verify URI after cache miss

 -- Max Kellermann <mk@cm4all.com>  Wed, 26 Aug 2015 12:32:19 -0000

cm4all-beng-proxy (6.7) unstable; urgency=low

  * ssl: fix certificate chain with Server Name Indication
  * lb: fix hang during shutdown

 -- Max Kellermann <mk@cm4all.com>  Wed, 22 Jul 2015 20:47:55 -0000

cm4all-beng-proxy (6.6) unstable; urgency=low

  * debian/rules: remove remaining python-central invocation
  * init: enable session_save_path by default if
    /var/run/cm4all/beng-proxy exists
  * init: read /etc/default/cm4all-beng-proxy.local
  * namespace: set "setgroups=deny" for Linux 3.18+
  * namespace: retry with mount flag "noexec" if mounting fails
  * build with libwas 1.0

 -- Max Kellermann <mk@cm4all.com>  Thu, 11 Jun 2015 15:22:14 -0000

cm4all-beng-proxy (6.5) unstable; urgency=low

  * debian: improve clang build-dependency
  * debian: migrate from python-central to dh_python2
  * debian: add missing dependency on python-twisted-names

 -- Max Kellermann <mk@cm4all.com>  Mon, 27 Apr 2015 15:27:10 -0000

cm4all-beng-proxy (6.4) unstable; urgency=low

  * widget: fix "Range" request headers with non-default view

 -- Max Kellermann <mk@cm4all.com>  Fri, 10 Apr 2015 12:28:47 -0000

cm4all-beng-proxy (6.3) unstable; urgency=low

  * forward the request headers "If-Modified-Since", "If-Unmodified-Since",
    "If-Match", "If-None-Match" and "If-Range" to frame widgets
  * session: improve session cleanup reliability
  * lb: verify SSL certificates in --check
  * ssl: reduce CPU overhead during TLS handshake

 -- Max Kellermann <mk@cm4all.com>  Tue, 24 Mar 2015 16:56:00 -0000

cm4all-beng-proxy (6.2) unstable; urgency=low

  * merge release 5.16

 -- Max Kellermann <mk@cm4all.com>  Wed, 18 Mar 2015 10:11:04 -0000

cm4all-beng-proxy (6.1) unstable; urgency=low

  * feature freeze

 -- Max Kellermann <mk@cm4all.com>  Thu, 05 Mar 2015 10:57:18 -0000

cm4all-beng-proxy (6.0.16) unstable; urgency=low

  * don't drop WANT request packet in repeated translation

 -- Max Kellermann <mk@cm4all.com>  Mon, 02 Mar 2015 08:38:49 -0000

cm4all-beng-proxy (6.0.15) unstable; urgency=low

  * widget: support the CONTENT_TYPE_LOOKUP protocol
  * CGI: disable request URI forwarding if there's a SCRIPT_NAME

 -- Max Kellermann <mk@cm4all.com>  Tue, 24 Feb 2015 16:44:37 -0000

cm4all-beng-proxy (6.0.14) unstable; urgency=low

  * merge release 5.15

 -- Max Kellermann <mk@cm4all.com>  Mon, 23 Feb 2015 12:48:39 -0000

cm4all-beng-proxy (6.0.13) unstable; urgency=low

  * don't steal the X-CM4all-View header from the HTTP cache

 -- Max Kellermann <mk@cm4all.com>  Fri, 20 Feb 2015 11:35:10 -0000

cm4all-beng-proxy (6.0.12) unstable; urgency=low

  * fcgi: don't redirect stderro to /dev/null
  * handler: reserve request body for focused widget even if processor
    disabled
  * remove the X-CM4all-View header after using it
  * headers: add group "TRANSFORMATION"
  * translation: add packet EXPAND_HEADER

 -- Max Kellermann <mk@cm4all.com>  Thu, 19 Feb 2015 15:36:19 -0000

cm4all-beng-proxy (6.0.11) unstable; urgency=low

  * translation: add packet EXPAND_READ_FILE
  * control: add command CONTROL_FADE_CHILDREN

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Feb 2015 12:02:40 -0000

cm4all-beng-proxy (6.0.10) unstable; urgency=low

  * merge release 5.14
  * translation: add packets NON_BLOCKING, READ_FILE

 -- Max Kellermann <mk@cm4all.com>  Fri, 13 Feb 2015 17:24:35 -0000

cm4all-beng-proxy (6.0.9) unstable; urgency=low

  * namespace_options: improved PIVOT_ROOT error message
  * translation: add packet EXPAND_BIND_MOUNT

 -- Max Kellermann <mk@cm4all.com>  Wed, 11 Feb 2015 11:36:51 -0000

cm4all-beng-proxy (6.0.8) unstable; urgency=low

  * debian: remove translation server demo packages
  * init: change default translation server address to @translation
  * translation: add packet EXPAND_COOKIE_HOST

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 Feb 2015 12:24:22 -0000

cm4all-beng-proxy (6.0.7) unstable; urgency=low

  * translation: add packet LISTENER_TAG

 -- Max Kellermann <mk@cm4all.com>  Mon, 09 Feb 2015 11:02:06 -0000

cm4all-beng-proxy (6.0.6) unstable; urgency=low

  * http_server, http_client: reduce overhead of proxying chunked body

 -- Max Kellermann <mk@cm4all.com>  Fri, 06 Feb 2015 07:44:17 -0000

cm4all-beng-proxy (6.0.5) unstable; urgency=low

  * merge release 5.13
  * translate_client: check for PROBE_PATH_SUFFIXES without PROBE_SUFFIX
  * fix stack overflow on PROBE_SUFFIXES loop

 -- Max Kellermann <mk@cm4all.com>  Thu, 05 Feb 2015 13:30:21 -0000

cm4all-beng-proxy (6.0.4) unstable; urgency=low

  * hstock: fix memory leak
  * response: fix crash on invalid X-CM4all-View header
  * translation: add packets AUTH_FILE, EXPAND_AUTH_FILE,
    APPEND_AUTH, EXPAND_APPEND_AUTH
  * log unknown view names in X-CM4all-View

 -- Max Kellermann <mk@cm4all.com>  Wed, 04 Feb 2015 22:16:07 -0000

cm4all-beng-proxy (6.0.3) unstable; urgency=low

  * support response header X-CM4all-View for all responses
  * reduce fork overhead by dropping NFS cache
  * reduce I/O multi-threading overhead

 -- Max Kellermann <mk@cm4all.com>  Tue, 03 Feb 2015 14:50:27 -0000

cm4all-beng-proxy (6.0.2) unstable; urgency=low

  * translate_client: allow BASE="/" (regression fix)

 -- Max Kellermann <mk@cm4all.com>  Mon, 02 Feb 2015 11:32:01 -0000

cm4all-beng-proxy (6.0.1) unstable; urgency=low

  * translation: add packets EXPAND_DOCUMENT_ROOT, PROBE_PATH_SUFFIXES

 -- Max Kellermann <mk@cm4all.com>  Thu, 29 Jan 2015 22:32:02 -0000

cm4all-beng-proxy (5.16) unstable; urgency=low

  * net: fix crash due to parsing '@' twice
  * net: fix another off-by-one bug in local socket addresses
  * random: fix partial entropy collection
  * http_server: support method PATCH (RFC 5789)

 -- Max Kellermann <mk@cm4all.com>  Wed, 18 Mar 2015 09:56:43 -0000

cm4all-beng-proxy (5.15) unstable; urgency=low

  * ssl_client: fix crash on request with Keep-Alive disabled

 -- Max Kellermann <mk@cm4all.com>  Mon, 23 Feb 2015 12:44:50 -0000

cm4all-beng-proxy (5.14) unstable; urgency=low

  * merge release 4.22

 -- Max Kellermann <mk@cm4all.com>  Wed, 11 Feb 2015 20:50:41 -0000

cm4all-beng-proxy (5.13) unstable; urgency=low

  * ssl: throttle when OpenSSL buffer grows too large

 -- Max Kellermann <mk@cm4all.com>  Thu, 05 Feb 2015 10:14:15 -0000

cm4all-beng-proxy (5.12) unstable; urgency=low

  * merge release 4.21

 -- Max Kellermann <mk@cm4all.com>  Thu, 22 Jan 2015 16:42:55 -0000

cm4all-beng-proxy (5.11) unstable; urgency=low

  * merge release 4.20
  * ssl: disable weak ciphers

 -- Max Kellermann <mk@cm4all.com>  Fri, 16 Jan 2015 12:20:58 -0000

cm4all-beng-proxy (5.10) unstable; urgency=low

  * fix cookie mangling in CGI handlers

 -- Max Kellermann <mk@cm4all.com>  Wed, 14 Jan 2015 21:45:01 -0000

cm4all-beng-proxy (5.9) unstable; urgency=low

  * merge release 4.19
  * log-tee: new access logger

 -- Max Kellermann <mk@cm4all.com>  Wed, 24 Sep 2014 14:41:51 -0000

cm4all-beng-proxy (5.8) unstable; urgency=low

  * fcache: work around assertion failure

 -- Max Kellermann <mk@cm4all.com>  Thu, 18 Sep 2014 17:47:40 -0000

cm4all-beng-proxy (5.7) unstable; urgency=low

  * was_client: fix crash bug

 -- Max Kellermann <mk@cm4all.com>  Wed, 17 Sep 2014 18:39:12 -0000

cm4all-beng-proxy (5.6) unstable; urgency=low

  * ssl_filter: fix stalled connection

 -- Max Kellermann <mk@cm4all.com>  Wed, 17 Sep 2014 06:43:12 -0000

cm4all-beng-proxy (5.5) unstable; urgency=low

  * merge release 4.18

 -- Max Kellermann <mk@cm4all.com>  Fri, 12 Sep 2014 10:30:14 -0000

cm4all-beng-proxy (5.4) unstable; urgency=low

  * merge release 4.16

 -- Max Kellermann <mk@cm4all.com>  Wed, 10 Sep 2014 06:19:42 -0000

cm4all-beng-proxy (5.3) unstable; urgency=low

  * child_manager: fix tree insertion bug
  * http_server: fix logger assertion failure

 -- Max Kellermann <mk@cm4all.com>  Fri, 29 Aug 2014 18:50:09 -0000

cm4all-beng-proxy (5.2) unstable; urgency=low

  * was_input: fix assertion failure

 -- Max Kellermann <mk@cm4all.com>  Fri, 29 Aug 2014 11:30:37 -0000

cm4all-beng-proxy (5.1) unstable; urgency=low

  * merge release 4.15
  * net: fix off-by-one bug in local socket addresses

 -- Max Kellermann <mk@cm4all.com>  Fri, 29 Aug 2014 08:55:55 -0000

cm4all-beng-proxy (5.0.14) unstable; urgency=low

  * buffered_socket: reduce memory usage
  * ssl_filter: reduce memory usage further

 -- Max Kellermann <mk@cm4all.com>  Wed, 13 Aug 2014 11:01:56 -0000

cm4all-beng-proxy (5.0.13) unstable; urgency=low

  * merge release 4.14
  * ssl_filter: reduce memory usage

 -- Max Kellermann <mk@cm4all.com>  Fri, 08 Aug 2014 17:45:33 -0000

cm4all-beng-proxy (5.0.12) unstable; urgency=low

  * merge release 4.13
  * http_cache: fix memcached crash bug
  * lb: SIGHUP flushes the SSL session cache
  * ssl_factory: reduce memory usage

 -- Max Kellermann <mk@cm4all.com>  Tue, 05 Aug 2014 12:53:05 -0000

cm4all-beng-proxy (5.0.11) unstable; urgency=low

  * merge release 4.11
  * http_{client,server}: support WebSocket (RFC 6455)

 -- Max Kellermann <mk@cm4all.com>  Tue, 29 Jul 2014 20:31:30 -0000

cm4all-beng-proxy (5.0.10) unstable; urgency=low

  * merge release 4.10
  * http_server: don't disable keep-alive when discarding optional request
    body ("Expect: 100-continue")

 -- Max Kellermann <mk@cm4all.com>  Wed, 23 Jul 2014 17:51:02 -0000

cm4all-beng-proxy (5.0.9) unstable; urgency=low

  * merge release 4.9
  * translation: CONTENT_TYPE_LOOKUP response may contain transformations

 -- Max Kellermann <mk@cm4all.com>  Mon, 21 Jul 2014 16:37:34 -0000

cm4all-beng-proxy (5.0.8) unstable; urgency=low

  * merge release 4.8
  * translation: new packet AUTO_GZIPPED

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Jul 2014 19:04:45 -0000

cm4all-beng-proxy (5.0.7) unstable; urgency=low

  * lb: add per-listener option "verbose_response"
  * header_forward: another COOKIE=BOTH forwarding bug fix
  * translation: new packets REQUEST_HEADER, EXPAND_REQUEST_HEADER

 -- Max Kellermann <mk@cm4all.com>  Fri, 11 Jul 2014 13:46:08 -0000

cm4all-beng-proxy (5.0.6) unstable; urgency=low

  * merge release 4.7
  * translation: add packet EXPAND_SITE

 -- Max Kellermann <mk@cm4all.com>  Wed, 02 Jul 2014 12:58:55 +0200

cm4all-beng-proxy (5.0.5) unstable; urgency=low

  * translation: add packet EXPAND_URI
  * tcache: VALIDATE_MTIME=0 matches when the file does not exist

 -- Max Kellermann <mk@cm4all.com>  Mon, 30 Jun 2014 14:15:02 -0000

cm4all-beng-proxy (5.0.4) unstable; urgency=low

  * merge release 4.6

 -- Max Kellermann <mk@cm4all.com>  Wed, 25 Jun 2014 13:05:26 -0000

cm4all-beng-proxy (5.0.3) unstable; urgency=low

  * tcache: optimize invalidation with host filter
  * tcache: optimize invalidation with site filter

 -- Max Kellermann <mk@cm4all.com>  Tue, 24 Jun 2014 20:24:25 -0000

cm4all-beng-proxy (5.0.2) unstable; urgency=low

  * merge release 4.5
  * session: fix potential crash on shared memory exhaustion
  * session: really purge new sessions first
  * translate_client: strict HEADER_FORWARD checks
  * translate_client: fix the COOKIE=BOTH parser
  * header_forward: fix COOKIE=BOTH forwarding

 -- Max Kellermann <mk@cm4all.com>  Mon, 16 Jun 2014 14:26:06 -0000

cm4all-beng-proxy (5.0.1) unstable; urgency=low

  * processor: allow Content-Type application/xml
  * was, pipe_filter: don't inherit environment variables
  * pipe_filter: fix command-line argument corruption bug
  * pipe_filter: support custom environment variables
  * translation: SETENV sets environment vars for FastCGI and WAS
  * header_forward: add mode COOKIE=BOTH

 -- Max Kellermann <mk@cm4all.com>  Fri, 06 Jun 2014 13:41:44 -0000

cm4all-beng-proxy (4.23) unstable; urgency=low

  * http_server: support method PATCH (RFC 5789)
  * session: fix expiration timer
  * session: allocate 64k sessions (was 32k)
  * session: work around high CPU usage due to session purging
  * request_session: don't send cleared session id of ignored session
  * ajp: fix bogus error "Peer closed the socket prematurely"
  * fcgi: fix uninitialized variable
  * fcgi: fix hang after error logger failure
  * fcgi: ignore STDERR packets in size calculation
  * header_forward: always forward "Allow"
  * translate_cache: optimize memory usage
  * css_parser: fix buffer overflow due to off-by-one check
  * support SESSION_SITE in processor
  * lb: fix hang during shutdown
  * namespace: retry with mount flag "noexec" if mounting fails
  * random: fix partial entropy collection

 -- Max Kellermann <mk@cm4all.com>  Fri, 04 Dec 2015 16:52:26 -0000

cm4all-beng-proxy (4.22) unstable; urgency=low

  * fcgi: fix wrong child process reuse with different JailCGI homes

 -- Max Kellermann <mk@cm4all.com>  Wed, 11 Feb 2015 19:30:05 -0000

cm4all-beng-proxy (4.21) unstable; urgency=low

  * cgi, pipe: fix crash after fork failure when input is a regular file

 -- Max Kellermann <mk@cm4all.com>  Thu, 22 Jan 2015 16:38:00 -0000

cm4all-beng-proxy (4.20) unstable; urgency=low

  * ssl_server: disable SSLv2 and SSLv3 because they are insecure
  * ssl_client: enable TLS versions newer than 1.1

 -- Max Kellermann <mk@cm4all.com>  Fri, 16 Jan 2015 12:12:02 -0000

cm4all-beng-proxy (4.19) unstable; urgency=low

  * lb/tcp: fix assertion failure

 -- Max Kellermann <mk@cm4all.com>  Wed, 24 Sep 2014 14:31:24 -0000

cm4all-beng-proxy (4.18) unstable; urgency=low

  * http_server: fix missing response (Keep-Alive disabled)

 -- Max Kellermann <mk@cm4all.com>  Fri, 12 Sep 2014 10:22:51 -0000

cm4all-beng-proxy (4.17) unstable; urgency=low

  * http_server: fix logger assertion failure

 -- Max Kellermann <mk@cm4all.com>  Thu, 11 Sep 2014 08:52:31 -0000

cm4all-beng-proxy (4.16) unstable; urgency=low

  * was_client: fix assertion failure

 -- Max Kellermann <mk@cm4all.com>  Wed, 10 Sep 2014 06:17:58 -0000

cm4all-beng-proxy (4.15) unstable; urgency=low

  * merge release 3.1.38

 -- Max Kellermann <mk@cm4all.com>  Fri, 29 Aug 2014 08:52:10 -0000

cm4all-beng-proxy (4.14) unstable; urgency=low

  * ssl_filter: fix error check
  * http_server: log failed requests
  * lb_http: reduce verbosity of ECONNRESET log message

 -- Max Kellermann <mk@cm4all.com>  Fri, 08 Aug 2014 17:41:52 -0000

cm4all-beng-proxy (4.13) unstable; urgency=low

  * thread_worker: smaller thread stack (64 kB)
  * ssl_factory: enable ECDH for perfect forward secrecy
  * thread_socket_filter: reinvoke writing after recovering from full
    output buffer
  * buffered_socket: reschedule reading after input buffer drained

 -- Max Kellermann <mk@cm4all.com>  Tue, 05 Aug 2014 12:37:11 -0000

cm4all-beng-proxy (4.12) unstable; urgency=low

  * pool: fix bogus assertion failure after SSL disconnect
  * lb/tcp: fix send error message
  * lb/tcp: fix crash after write error
  * thread_socket_filter: fix assertion failure with full output buffer
  * thread_socket_filter: fix crash after write error

 -- Max Kellermann <mk@cm4all.com>  Thu, 31 Jul 2014 16:19:57 -0000

cm4all-beng-proxy (4.11) unstable; urgency=low

  * merge release 3.1.37

 -- Max Kellermann <mk@cm4all.com>  Mon, 28 Jul 2014 15:34:53 -0000

cm4all-beng-proxy (4.10) unstable; urgency=low

  * merge release 3.1.36
  * lhttp_stock: fix crash after fork failure

 -- Max Kellermann <mk@cm4all.com>  Wed, 23 Jul 2014 17:47:36 -0000

cm4all-beng-proxy (4.9) unstable; urgency=low

  * merge release 3.1.35

 -- Max Kellermann <mk@cm4all.com>  Mon, 21 Jul 2014 16:34:15 -0000

cm4all-beng-proxy (4.8) unstable; urgency=low

  * ssl: fix choking decryption on large SSL packets
  * http_server: discard incoming data while waiting for drained response

 -- Max Kellermann <mk@cm4all.com>  Thu, 17 Jul 2014 23:16:21 -0000

cm4all-beng-proxy (4.7) unstable; urgency=low

  * lb: flush all output buffers before closing HTTPS connection

 -- Max Kellermann <mk@cm4all.com>  Wed, 02 Jul 2014 10:46:07 -0000

cm4all-beng-proxy (4.6) unstable; urgency=low

  * merge release 3.1.34

 -- Max Kellermann <mk@cm4all.com>  Wed, 25 Jun 2014 13:02:07 -0000

cm4all-beng-proxy (4.5) unstable; urgency=low

  * tcache: enable VARY on LOCAL_ADDRESS_STRING

 -- Max Kellermann <mk@cm4all.com>  Sun, 15 Jun 2014 21:14:17 -0000

cm4all-beng-proxy (4.4) unstable; urgency=low

  * debian/control: refuse to build with libnfs 1.9.3-1 due to broken
    package name

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 Jun 2014 09:59:57 -0000

cm4all-beng-proxy (4.3) unstable; urgency=low

  * merge release 3.1.33
  * widget_uri, cgi_address: fix potential crash

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 Jun 2014 08:47:34 -0000

cm4all-beng-proxy (4.2) unstable; urgency=low

  * widget: avoid double slash when concatenating (Local) HTTP URI and
    path_info

 -- Max Kellermann <mk@cm4all.com>  Tue, 03 Jun 2014 18:08:54 -0000

cm4all-beng-proxy (4.1) unstable; urgency=medium

  * feature freeze

 -- Max Kellermann <mk@cm4all.com>  Fri, 30 May 2014 13:42:38 +0200

cm4all-beng-proxy (4.0.49) unstable; urgency=low

  * lb_config: allow escaping backslash in lb.conf
  * translation: add packet AUTH (yet another authentication protocol)

 -- Max Kellermann <mk@cm4all.com>  Wed, 28 May 2014 15:14:54 -0000

cm4all-beng-proxy (4.0.48) unstable; urgency=low

  * cgi_address: avoid double slash when concatenating script_name and
    path_info
  * cgi_address: default to script_name="/"

 -- Max Kellermann <mk@cm4all.com>  Tue, 27 May 2014 11:47:19 -0000

cm4all-beng-proxy (4.0.47) unstable; urgency=low

  * args: unescape values with dollar sign (4.0.46 regression)
  * translate_client: fix "Could not locate resource" (4.0.38 regression)

 -- Max Kellermann <mk@cm4all.com>  Mon, 26 May 2014 17:02:48 -0000

cm4all-beng-proxy (4.0.46) unstable; urgency=low

  * translate_client: check for valid base address after EASY_BASE
  * fcgi_client: detect bogus Content-Length response header

 -- Max Kellermann <mk@cm4all.com>  Mon, 26 May 2014 12:11:55 -0000

cm4all-beng-proxy (4.0.45) unstable; urgency=low

  * translate_client: fix crash after misplaced AUTO_BASE
  * fcgi_client: support STDERR_PATH for FastCGI's STDERR stream

 -- Max Kellermann <mk@cm4all.com>  Thu, 22 May 2014 15:42:08 -0000

cm4all-beng-proxy (4.0.44) unstable; urgency=low

  * cgi_address: unescape PATH_INFO in ENOTDIR handler
  * python/translation/response: add method bind_mount()

 -- Max Kellermann <mk@cm4all.com>  Wed, 21 May 2014 13:58:15 -0000

cm4all-beng-proxy (4.0.43) unstable; urgency=low

  * merge release 3.1.32
  * lhttp_stock: handle fork() failures
  * handler: fix assertion failure on malformed request URI

 -- Max Kellermann <mk@cm4all.com>  Wed, 21 May 2014 07:27:05 -0000

cm4all-beng-proxy (4.0.42) unstable; urgency=low

  * tstock: log abstract socket paths properly
  * translation: add packet COOKIE_PATH
  * cookie_{server,client}: upgrade to RFC 6265
  * http_string: allow comma in cookie values (RFC ignorant)

 -- Max Kellermann <mk@cm4all.com>  Wed, 14 May 2014 10:41:34 -0000

cm4all-beng-proxy (4.0.41) unstable; urgency=low

  * handler: forget CHECK after the check has completed
  * handler: apply SESSION before repeating translation
  * fcgi, lhttp, delegate: apply STDERR_PATH to stdout

 -- Max Kellermann <mk@cm4all.com>  Tue, 13 May 2014 15:14:58 -0000

cm4all-beng-proxy (4.0.40) unstable; urgency=low

  * file_hander: fix memory leak
  * rerror: add option "verbose_response"
  * translation: rename LHTTP_EXPAND_URI to EXPAND_LHTTP_URI
  * tcache: raise MAX_AGE limit to one day
  * ajp_client: fix header corruption
  * ajp_client: fix buffer overflow
  * python/translation/response: add method expand_pair()

 -- Max Kellermann <mk@cm4all.com>  Mon, 12 May 2014 15:58:07 -0000

cm4all-beng-proxy (4.0.39) unstable; urgency=low

  * file_enotdir: fix PATH_INFO forwarding for LHTTP

 -- Max Kellermann <mk@cm4all.com>  Fri, 09 May 2014 13:38:57 -0000

cm4all-beng-proxy (4.0.38) unstable; urgency=low

  * translation: add packet STDERR_PATH
  * translate_client: detect missing LHTTP_URI, NFS_EXPORT
  * handler: fix the USER translation packet (broken since 4.0.17)

 -- Max Kellermann <mk@cm4all.com>  Thu, 08 May 2014 21:49:55 -0000

cm4all-beng-proxy (4.0.37) unstable; urgency=low

  * enotdir: forward PATH_INFO to LHTTP server
  * lhttp: support environment variables via PAIR

 -- Max Kellermann <mk@cm4all.com>  Thu, 08 May 2014 12:59:50 -0000

cm4all-beng-proxy (4.0.36) unstable; urgency=low

  * tcache: log the final cache key
  * translation: add packet ENOTDIR

 -- Max Kellermann <mk@cm4all.com>  Thu, 08 May 2014 08:56:13 -0000

cm4all-beng-proxy (4.0.35) unstable; urgency=low

  * namespace_options, client-socket: Debian Squeeze compatibility tweaks
  * tcache: paranoid checks for REGEX (optional via UNSAFE_BASE)
  * translation: add packet REDIRECT_QUERY_STRING

 -- Max Kellermann <mk@cm4all.com>  Tue, 06 May 2014 16:20:22 -0000

cm4all-beng-proxy (4.0.34) unstable; urgency=low

  * tcache: fix URI with BASE
  * tcache: allow URI with AUTO_BASE/EASY_BASE
  * tcache: allow TEST_PATH with BASE
  * translation: add packet EXPAND_TEST_PATH

 -- Max Kellermann <mk@cm4all.com>  Tue, 06 May 2014 12:58:50 -0000

cm4all-beng-proxy (4.0.33) unstable; urgency=low

  * allow FILE_NOT_FOUND depth 20
  * translation: add packets EXPAND_SCRIPT_NAME, TEST_PATH

 -- Max Kellermann <mk@cm4all.com>  Mon, 05 May 2014 16:05:09 -0000

cm4all-beng-proxy (4.0.32) unstable; urgency=low

  * cgi_address: allow BASE without PATH_INFO
  * implement FILE_NOT_FOUND support for CGI, FastCGI, WAS, LHTTP

 -- Max Kellermann <mk@cm4all.com>  Fri, 02 May 2014 14:32:47 -0000

cm4all-beng-proxy (4.0.31) unstable; urgency=low

  * translation: add packet EXPAND_REDIRECT
  * tcache: regex compiler errors and base mismatches are fatal

 -- Max Kellermann <mk@cm4all.com>  Thu, 01 May 2014 18:23:24 -0000

cm4all-beng-proxy (4.0.30) unstable; urgency=low

  * merge release 3.1.31
  * uri_base: fix BASE store bug after request to the BASE

 -- Max Kellermann <mk@cm4all.com>  Tue, 29 Apr 2014 21:53:37 -0000

cm4all-beng-proxy (4.0.29) unstable; urgency=low

  * processor: add URI rewrite mode "response"

 -- Max Kellermann <mk@cm4all.com>  Wed, 23 Apr 2014 23:59:00 -0000

cm4all-beng-proxy (4.0.28) unstable; urgency=low

  * handler: fix SESSION and PARAM breakage
  * tcache: fix VARY/PARAM check
  * translation: allow null bytes in SESSION

 -- Max Kellermann <mk@cm4all.com>  Thu, 17 Apr 2014 12:21:29 -0000

cm4all-beng-proxy (4.0.27) unstable; urgency=low

  * tstock: support abstract sockets

 -- Max Kellermann <mk@cm4all.com>  Fri, 04 Apr 2014 12:58:09 -0000

cm4all-beng-proxy (4.0.26) unstable; urgency=low

  * merge release 3.1.28
  * translation: add packet EXPIRES_RELATIVE

 -- Max Kellermann <mk@cm4all.com>  Tue, 01 Apr 2014 17:18:55 -0000

cm4all-beng-proxy (4.0.25) unstable; urgency=low

  * merge release 3.1.27
  * lb/tcp: fix busy loop

 -- Max Kellermann <mk@cm4all.com>  Thu, 27 Mar 2014 11:22:05 -0000

cm4all-beng-proxy (4.0.24) unstable; urgency=low

  * failure: fix bogus assertion failure with abstract sockets
  * lb/tcp: fix memory leaks
  * lb/tcp: drain output buffers before closing the connection

 -- Max Kellermann <mk@cm4all.com>  Mon, 24 Mar 2014 17:42:04 -0000

cm4all-beng-proxy (4.0.23) unstable; urgency=low

  * translation: new packet DIRECTORY_INDEX

 -- Max Kellermann <mk@cm4all.com>  Fri, 21 Mar 2014 13:00:39 -0000

cm4all-beng-proxy (4.0.22) unstable; urgency=low

  * translation: allow ERROR_DOCUMENT payload, echo
  * translation: new packets FILE_NOT_FOUND, CONTENT_TYPE_LOOKUP
  * translate_client: check for multiple REGEX / INVERSE_REGEX
  * translate_client: support abstract sockets in ADDRESS_STRING

 -- Max Kellermann <mk@cm4all.com>  Thu, 20 Mar 2014 12:28:04 -0000

cm4all-beng-proxy (4.0.21) unstable; urgency=low

  * merge release 3.1.26
  * handler: forward HTTP errors from translation cache to browser
  * tcache: reduce memory usage
  * translate_client: don't send REMOTE_HOST unless requested via WANT
  * translate_client: check if BASE matches request URI
  * translation: make "UNSAFE_BASE" a modifier for "BASE"
  * translation: new packet "EASY_BASE" simplifies "BASE" usage
  * translation: new packets "REGEX_TAIL", "REGEX_UNESCAPE"

 -- Max Kellermann <mk@cm4all.com>  Mon, 17 Mar 2014 22:00:23 -0000

cm4all-beng-proxy (4.0.20) unstable; urgency=low

  * merge release 3.1.25
  * translate_client: refuse to parse incoming request packets
  * translate_client: check for illegal null bytes
  * translation: add packet "UNSAFE_BASE"
  * lb: drop root privileges irreversibly using PR_SET_NO_NEW_PRIVS

 -- Max Kellermann <mk@cm4all.com>  Thu, 13 Mar 2014 13:34:47 -0000

cm4all-beng-proxy (4.0.19) unstable; urgency=low

  * translation: add packet WANT, make several packets optional
  * translate_client: allow combining CHECK and WANT_FULL_URI
  * tcache: make PARAM cacheable, supported by VARY
  * python/translation/request: accept BEGIN in packetReceived()
  * python/translation/request: add attribute "protocol_version"
  * lb: detach from file system (security)

 -- Max Kellermann <mk@cm4all.com>  Wed, 05 Mar 2014 14:16:42 -0000

cm4all-beng-proxy (4.0.18) unstable; urgency=low

  * doc/lb: document sticky mode "source_ip"
  * lb/tcp: fix endless loop due to misrouted write event

 -- Max Kellermann <mk@cm4all.com>  Tue, 18 Feb 2014 14:48:47 -0000

cm4all-beng-proxy (4.0.17) unstable; urgency=low

  * handler: apply session directives from current translation response
    before resuming the "previous" response

 -- Max Kellermann <mk@cm4all.com>  Mon, 17 Feb 2014 17:46:44 -0000

cm4all-beng-proxy (4.0.16) unstable; urgency=low

  * namespace: set up uid/gid mapping without MOUNT_PROC
  * namespace: allow BIND_MOUNT, MOUNT_PROC, MOUNT_HOME, MOUNT_TMP_TMPFS without
    PIVOT_ROOT
  * configurable resource limits for child processes

 -- Max Kellermann <mk@cm4all.com>  Fri, 07 Feb 2014 12:48:44 -0000

cm4all-beng-proxy (4.0.15) unstable; urgency=low

  * daemon: set up supplementary groups
  * child_manager: log resource usage
  * fcgi_stock: kill child process after connect failure
  * fcgi_stock: kill child process after repeated timeout

 -- Max Kellermann <mk@cm4all.com>  Tue, 04 Feb 2014 15:17:36 -0000

cm4all-beng-proxy (4.0.14) unstable; urgency=low

  * add systemd unit
  * cgi, delegate, lhttp, pipe: enable missing namespace features
  * cgi, pipe: fix /proc mount failure
  * namespace: secure /proc flags
  * namespace: work around uid/gid mapper failure using PR_SET_DUMPABLE

 -- Max Kellermann <mk@cm4all.com>  Mon, 03 Feb 2014 20:40:49 -0000

cm4all-beng-proxy (4.0.13) unstable; urgency=low

  * namespace: make new root directory read-only
  * namespace: add option to mount tmpfs on /tmp
  * namespace: arbitrary bind-mounts
  * namespace: support UTS namespaces
  * namespace: set up uid/gid mapping in user namespace

 -- Max Kellermann <mk@cm4all.com>  Tue, 28 Jan 2014 22:37:47 -0000

cm4all-beng-proxy (4.0.12) unstable; urgency=low

  * cache: use monotonic clock
  * namespace: support PID namespaces
  * namespace: support mount namespace and pivot_root()
  * namespace: can mount new /proc, $HOME

 -- Max Kellermann <mk@cm4all.com>  Fri, 24 Jan 2014 14:02:34 -0000

cm4all-beng-proxy (4.0.11) unstable; urgency=low

  * was: fix misdirected pipes (4.0.10 regression)
  * translation: add packets EXPAND_APPEND, EXPAND_PAIR
  * file_handler: allow character devices

 -- Max Kellermann <mk@cm4all.com>  Tue, 21 Jan 2014 18:24:14 -0000

cm4all-beng-proxy (4.0.10) unstable; urgency=low

  * merge release 3.1.24
  * response: don't report version in "Server" response header
  * lhttp, delegate: support namespaces
  * delegate: fix spontaneous shutdown due to misrouted SIGTERM signal

 -- Max Kellermann <mk@cm4all.com>  Fri, 03 Jan 2014 21:18:45 -0000

cm4all-beng-proxy (4.0.9) unstable; urgency=low

  * pipe: fix signal handler race condition
  * pipe, CGI, FastCGI, WAS: support user/network namespaces

 -- Max Kellermann <mk@cm4all.com>  Mon, 23 Dec 2013 18:55:03 -0000

cm4all-beng-proxy (4.0.8) unstable; urgency=low

  * CGI, FastCGI, WAS: support command-line arguments
  * header-forward: add groups "CORS", "SECURE"

 -- Max Kellermann <mk@cm4all.com>  Mon, 16 Dec 2013 18:26:12 -0000

cm4all-beng-proxy (4.0.7) unstable; urgency=low

  * merge release 3.1.23
  * ssl_filter: fix stalled SSL read
  * thread_socket_filter: fix stalled SSL write

 -- Max Kellermann <mk@cm4all.com>  Sat, 07 Dec 2013 07:39:16 -0000

cm4all-beng-proxy (4.0.6) unstable; urgency=low

  * thread_queue: fix spurious thread exit

 -- Max Kellermann <mk@cm4all.com>  Tue, 26 Nov 2013 20:45:30 -0000

cm4all-beng-proxy (4.0.5) unstable; urgency=low

  * merge release 3.1.22

 -- Max Kellermann <mk@cm4all.com>  Mon, 25 Nov 2013 13:03:15 -0000

cm4all-beng-proxy (4.0.4) unstable; urgency=low

  * merge release 3.1.21
  * nfs: bind to privileged port

 -- Max Kellermann <mk@cm4all.com>  Sun, 24 Nov 2013 08:30:58 -0000

cm4all-beng-proxy (4.0.3) unstable; urgency=low

  * lb: allow the kernel to chooes a TCP bind port
  * lb: support forwarding HTTP requests with the original source IP

 -- Max Kellermann <mk@cm4all.com>  Sun, 10 Nov 2013 17:46:44 -0000

cm4all-beng-proxy (4.0.2) unstable; urgency=low

  * merge release 3.1.20
  * lb: support forwarding TCP connections with the original source IP

 -- Max Kellermann <mk@cm4all.com>  Tue, 05 Nov 2013 16:07:34 -0000

cm4all-beng-proxy (4.0.1) unstable; urgency=low

  * merge release 3.1.19

 -- Max Kellermann <mk@cm4all.com>  Wed, 30 Oct 2013 15:26:16 -0000

cm4all-beng-proxy (4.0) unstable; urgency=low

  * translation: rename TRANSLATE_PROXY to TRANSLATE_HTTP
  * thread_pool: start SSL worker threads on the first use
  * translate-client, resource-loader: support https://

 -- Max Kellermann <mk@cm4all.com>  Wed, 23 Oct 2013 19:29:38 -0000

cm4all-beng-proxy (3.1.38) unstable; urgency=low

  * istream: fix assertion failure due to inverted check
  * was_control: fix assertion failure due to missing check

 -- Max Kellermann <mk@cm4all.com>  Fri, 29 Aug 2014 08:52:53 -0000

cm4all-beng-proxy (3.1.37) unstable; urgency=low

  * http_cache: fix caching (Fast-)CGI responses
  * http_client: fix bug with HTTP 1.0 Keep-Alive
  * stock: destroy only surplus idle items

 -- Max Kellermann <mk@cm4all.com>  Mon, 28 Jul 2014 15:30:50 -0000

cm4all-beng-proxy (3.1.36) unstable; urgency=low

  * http_server: ignore case in "Connection" request header
  * http_client: allow comma-separated list in "Connection" response
    header

 -- Max Kellermann <mk@cm4all.com>  Wed, 23 Jul 2014 17:43:09 -0000

cm4all-beng-proxy (3.1.35) unstable; urgency=low

  * lb_tcp: fix memory leak after send failure
  * ssl_filter: fix race condition
  * ssl_filter: fix memory leak with client certificates

 -- Max Kellermann <mk@cm4all.com>  Mon, 21 Jul 2014 16:20:14 -0000

cm4all-beng-proxy (3.1.34) unstable; urgency=low

  * session: fix potential crash on shared memory exhaustion
  * session: really purge new sessions first
  * istream-iconv: fix endless loop with unknown charset

 -- Max Kellermann <mk@cm4all.com>  Wed, 25 Jun 2014 12:58:03 -0000

cm4all-beng-proxy (3.1.33) unstable; urgency=low

  * widget: avoid double slash when concatenating (Local) HTTP URI and
    path_info
  * pipe: fix command-line argument corruption bug
  * fcgi_client: detect bogus Content-Length response header

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 Jun 2014 08:30:39 -0000

cm4all-beng-proxy (3.1.32) unstable; urgency=low

  * http_string: allow comma in cookie values (RFC ignorant)

 -- Max Kellermann <mk@cm4all.com>  Mon, 19 May 2014 07:52:24 -0000

cm4all-beng-proxy (3.1.31) unstable; urgency=low

  * rewrite-uri: fix view name corruption

 -- Max Kellermann <mk@cm4all.com>  Mon, 28 Apr 2014 16:30:17 -0000

cm4all-beng-proxy (3.1.30) unstable; urgency=low

  * translate-client: fix EXPAND_PATH on HTTP address

 -- Max Kellermann <mk@cm4all.com>  Mon, 28 Apr 2014 14:44:22 -0000

cm4all-beng-proxy (3.1.29) unstable; urgency=low

  * http-server: fix potential crash with too many request headers

 -- Max Kellermann <mk@cm4all.com>  Fri, 25 Apr 2014 15:52:16 -0000

cm4all-beng-proxy (3.1.28) unstable; urgency=low

  * buffered_socket: fix bogus assertion failure

 -- Max Kellermann <mk@cm4all.com>  Tue, 01 Apr 2014 16:53:22 -0000

cm4all-beng-proxy (3.1.27) unstable; urgency=low

  * fcgi-stock: show process name in log messages
  * fcgi-stock: check connection state before issuing new request

 -- Max Kellermann <mk@cm4all.com>  Tue, 25 Mar 2014 20:02:23 -0000

cm4all-beng-proxy (3.1.26) unstable; urgency=low

  * http-client: fix bogus assertion failure

 -- Max Kellermann <mk@cm4all.com>  Fri, 14 Mar 2014 14:36:12 -0000

cm4all-beng-proxy (3.1.25) unstable; urgency=low

  * escape: fix data corruption with glibc 2.18

 -- Max Kellermann <mk@cm4all.com>  Thu, 06 Mar 2014 11:47:14 -0000

cm4all-beng-proxy (3.1.24) unstable; urgency=low

  * fcgi-stock: fix crash on fork() failure
  * fcache: fix crash on responses without body

 -- Max Kellermann <mk@cm4all.com>  Thu, 02 Jan 2014 22:57:50 -0000

cm4all-beng-proxy (3.1.23) unstable; urgency=low

  * was-output: fix event leak
  * was-output: fix crash in error handler
  * was-client: free the request body on empty response
  * was-client: reuse connection after empty response
  * was-client: fix stalled response on LENGTH=0

 -- Max Kellermann <mk@cm4all.com>  Fri, 06 Dec 2013 13:23:40 -0000

cm4all-beng-proxy (3.1.22) unstable; urgency=low

  * http_server: fix stalled response

 -- Max Kellermann <mk@cm4all.com>  Mon, 25 Nov 2013 13:00:33 -0000

cm4all-beng-proxy (3.1.21) unstable; urgency=low

  * merge release 3.0.34
  * was-client: fix crash on abort
  * was-client: fix off-by-one error in header parser

 -- Max Kellermann <mk@cm4all.com>  Sun, 24 Nov 2013 08:04:41 -0000

cm4all-beng-proxy (3.1.20) unstable; urgency=low

  * jail: add "--" after last option, allows passing options to jail
  * keep CAP_KILL to be able to kill jailed child processes

 -- Max Kellermann <mk@cm4all.com>  Mon, 04 Nov 2013 14:41:34 -0000

cm4all-beng-proxy (3.1.19) unstable; urgency=low

  * handler: work around crash due to translation cache invalidation
  * child: send SIGKILL after 60 seconds

 -- Max Kellermann <mk@cm4all.com>  Wed, 30 Oct 2013 12:12:31 -0000

cm4all-beng-proxy (3.1.18) unstable; urgency=low

  * nfs: translate NFS3ERR_NOENT to "404 Not Found"
  * nfs_client: don't leak file descriptor to child processes

 -- Max Kellermann <mk@cm4all.com>  Wed, 30 Oct 2013 09:28:11 -0000

cm4all-beng-proxy (3.1.17) unstable; urgency=low

  * tcache: cache translation responses that contain STATUS

 -- Max Kellermann <mk@cm4all.com>  Fri, 25 Oct 2013 17:10:26 -0000

cm4all-beng-proxy (3.1.16) unstable; urgency=low

  * fcgi-stock: kill child processes with SIGUSR1 instead of SIGTERM

 -- Max Kellermann <mk@cm4all.com>  Wed, 23 Oct 2013 08:54:03 -0000

cm4all-beng-proxy (3.1.15) unstable; urgency=low

  * lhttp_address: don't unescape the BASE suffix
  * {file,nfs}_address: unescape EXPAND_PATH(_INFO) substitutions
  * child_stock: fix another assertion failure

 -- Max Kellermann <mk@cm4all.com>  Tue, 22 Oct 2013 15:15:42 -0000

cm4all-beng-proxy (3.1.14) unstable; urgency=low

  * istream_nfs: fix assertion failure on empty file
  * nfs_client: fix crash on malformed path
  * nfs_client: improved error messages
  * child_stock: fix assertion failure when busy child process gets killed

 -- Max Kellermann <mk@cm4all.com>  Mon, 21 Oct 2013 15:38:28 -0000

cm4all-beng-proxy (3.1.13) unstable; urgency=low

  * merge release 3.0.33
  * translation: new packet WANT_FULL_URI for obtaining the full URI

 -- Max Kellermann <mk@cm4all.com>  Wed, 09 Oct 2013 10:40:35 -0000

cm4all-beng-proxy (3.1.12) unstable; urgency=low

  * merge release 3.0.31
  * translation: new packet CONCURRENCY controls number of LHTTP
    connections per process

 -- Max Kellermann <mk@cm4all.com>  Sat, 05 Oct 2013 11:34:04 -0000

cm4all-beng-proxy (3.1.11) unstable; urgency=low

  * lhttp_stock: allow 4 concurrent connections per LHTTP process

 -- Max Kellermann <mk@cm4all.com>  Mon, 30 Sep 2013 16:10:05 -0000

cm4all-beng-proxy (3.1.10) unstable; urgency=low

  * resource-address: fix assertion failure in LHTTP operation
  * lhttp_request: use the LHTTP_HOST attribute
  * kill the logger process on shutdown

 -- Max Kellermann <mk@cm4all.com>  Wed, 25 Sep 2013 17:29:56 -0000

cm4all-beng-proxy (3.1.9) unstable; urgency=low

  * {fcgi,lhttp}_stock: reuse child processes after connection closed
  * translate-client: ignore DEFLATED,GZIPPED on NFS address
  * translate-client: ignore EXPAND_PATH_INFO on local file
  * ssl_factory: wildcard matches single letter
  * ssl_factory: wildcard matches only one segment

 -- Max Kellermann <mk@cm4all.com>  Tue, 24 Sep 2013 10:31:30 -0000

cm4all-beng-proxy (3.1.8) unstable; urgency=low

  * ssl_factory: fix broken certificat/key matching
  * doc: various manual updates (RFC 2617, ...)

 -- Max Kellermann <mk@cm4all.com>  Fri, 20 Sep 2013 12:55:55 -0000

cm4all-beng-proxy (3.1.7) unstable; urgency=low

  * merge release 3.0.30
  * resource-loader: new protocol "Local HTTP"

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Sep 2013 13:36:20 -0000

cm4all-beng-proxy (3.1.6) unstable; urgency=low

  * buffered_socket: fix assertion failure

 -- Max Kellermann <mk@cm4all.com>  Fri, 23 Aug 2013 12:39:47 -0000

cm4all-beng-proxy (3.1.5) unstable; urgency=low

  * merge release 3.0.26
  * lb: disallow deprecated configuration keywords
  * lb: conditional pools
  * lb_config: setting "ssl_cert" specifies both certificate and key
  * ssl_filter: support TLS Server Name Indication

 -- Max Kellermann <mk@cm4all.com>  Fri, 16 Aug 2013 16:29:34 -0000

cm4all-beng-proxy (3.1.4) unstable; urgency=low

  * nfs_cache: new dedicated cache for NFS files
  * nfs_{handler,request}: use Content-Type from translation server

 -- Max Kellermann <mk@cm4all.com>  Mon, 10 Jun 2013 20:50:58 -0000

cm4all-beng-proxy (3.1.3) unstable; urgency=low

  * nfs_client: fix crash due to uninitialized memory
  * nfs_client: disconnect idle connections
  * nfs_client: expire file metadata
  * istream-nfs: fix resuming a blocking sink
  * istream-nfs: detect file truncation

 -- Max Kellermann <mk@cm4all.com>  Mon, 03 Jun 2013 19:30:20 -0000

cm4all-beng-proxy (3.1.2) unstable; urgency=low

  * nfs_client: read larger chunks
  * nfs_handler: implement cache revalidation and byte ranges

 -- Max Kellermann <mk@cm4all.com>  Wed, 29 May 2013 16:23:15 -0000

cm4all-beng-proxy (3.1.1) unstable; urgency=low

  * nfs_client: fix crash on HEAD request
  * nfs_client: generate Last-Modified and ETag
  * http-cache: allow caching NFS files

 -- Max Kellermann <mk@cm4all.com>  Thu, 23 May 2013 11:00:49 -0000

cm4all-beng-proxy (3.1) unstable; urgency=low

  * nfs_client: new resource loader backend

 -- Max Kellermann <mk@cm4all.com>  Tue, 21 May 2013 21:14:06 -0000

cm4all-beng-proxy (3.0.34) unstable; urgency=low

  * processor: fix use-after-free crash bug

 -- Max Kellermann <mk@cm4all.com>  Sun, 24 Nov 2013 07:46:29 -0000

cm4all-beng-proxy (3.0.33) unstable; urgency=low

  * tcache: limit the cacheable CHECK length
  * tcache: allow binary data in the CHECK payload
  * tcache: fix matching the URI on INVALIDATE with CHECK

 -- Max Kellermann <mk@cm4all.com>  Wed, 09 Oct 2013 09:52:47 -0000

cm4all-beng-proxy (3.0.32) unstable; urgency=low

  * tcache: apply BASE to responses without an address
  * tcache: fix BASE on responses with CHECK
  * handler: fix crash after malformed CHECK/PREVIOUS translation

 -- Max Kellermann <mk@cm4all.com>  Tue, 08 Oct 2013 15:48:07 -0000

cm4all-beng-proxy (3.0.31) unstable; urgency=low

  * socket_wrapper: work around libevent timeout reset bug

 -- Max Kellermann <mk@cm4all.com>  Wed, 02 Oct 2013 15:30:11 -0000

cm4all-beng-proxy (3.0.30) unstable; urgency=low

  * istream-file: fix crash bug
  * fcgi, was: fix memory leak on malformed translation response

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Sep 2013 13:23:28 -0000

cm4all-beng-proxy (3.0.29) unstable; urgency=low

  * fcgi-client: fix crash on certain malformed responses
  * parser: fix crash on certain CDATA sections

 -- Max Kellermann <mk@cm4all.com>  Mon, 02 Sep 2013 10:51:58 -0000

cm4all-beng-proxy (3.0.28) unstable; urgency=low

  * processor: fix widget lookup regression

 -- Max Kellermann <mk@cm4all.com>  Mon, 26 Aug 2013 18:21:03 -0000

cm4all-beng-proxy (3.0.27) unstable; urgency=low

  * processor: fix stalled transfer with two nested processors

 -- Max Kellermann <mk@cm4all.com>  Mon, 26 Aug 2013 17:09:47 -0000

cm4all-beng-proxy (3.0.26) unstable; urgency=low

  * respones: generate header P3P:CP="CAO PSA OUR" to work around IE10 bug
  * init: auto-create /var/run/cm4all
  * lb: enable GLib multi-threading

 -- Max Kellermann <mk@cm4all.com>  Fri, 26 Jul 2013 07:21:15 -0000

cm4all-beng-proxy (3.0.25) unstable; urgency=low

  * stock: fix access to undefind memory
  * file-handler, http-util: fix If-Match / If-None-Match check

 -- Max Kellermann <mk@cm4all.com>  Wed, 29 May 2013 16:13:54 -0000

cm4all-beng-proxy (3.0.24) unstable; urgency=low

  * memcached-client: fix bogus "peer closed socket prematurely"

 -- Max Kellermann <mk@cm4all.com>  Tue, 23 Apr 2013 11:20:00 -0000

cm4all-beng-proxy (3.0.23) unstable; urgency=low

  * lb: fix memory leak when request with body gets aborted early

 -- Max Kellermann <mk@cm4all.com>  Thu, 04 Apr 2013 15:33:57 -0000

cm4all-beng-proxy (3.0.22) unstable; urgency=low

  * http-server: fix rare crash in request body handler
  * http-client: fix memory leak

 -- Max Kellermann <mk@cm4all.com>  Tue, 26 Mar 2013 07:24:22 -0000

cm4all-beng-proxy (3.0.21) unstable; urgency=low

  * ajp-client: fix malformed request packet with empty request body

 -- Max Kellermann <mk@cm4all.com>  Thu, 21 Mar 2013 17:11:22 -0000

cm4all-beng-proxy (3.0.20) unstable; urgency=low

  * http-client: fix assertion failure with certain chunked responses

 -- Max Kellermann <mk@cm4all.com>  Thu, 21 Mar 2013 10:21:13 -0000

cm4all-beng-proxy (3.0.19) unstable; urgency=low

  * istream_tee: fix crash / memory leak on I/O error before request body
    was delivered to widget

 -- Max Kellermann <mk@cm4all.com>  Mon, 18 Mar 2013 11:23:27 -0000

cm4all-beng-proxy (3.0.18) unstable; urgency=low

  * bot: detect more crawler/bot user-agents
  * lb.init: add ACCESS_LOGGER variable

 -- Max Kellermann <mk@cm4all.com>  Fri, 15 Mar 2013 14:47:08 -0000

cm4all-beng-proxy (3.0.17) unstable; urgency=low

  * lb: add ssl_verify "optional"

 -- Max Kellermann <mk@cm4all.com>  Fri, 08 Mar 2013 14:31:25 -0000

cm4all-beng-proxy (3.0.16) unstable; urgency=low

  * http-request: fix assertion failure
  * log-{cat,split}: use unsigned characters in backslash-escape

 -- Max Kellermann <mk@cm4all.com>  Thu, 07 Mar 2013 15:26:26 -0000

cm4all-beng-proxy (3.0.15) unstable; urgency=low

  * stock: fix another assertion failure during idle cleanup
  * inline-widget: avoid unrecoverable I/O errors during initialisation

 -- Max Kellermann <mk@cm4all.com>  Tue, 05 Mar 2013 07:11:46 -0000

cm4all-beng-proxy (3.0.14) unstable; urgency=low

  * stock: fix assertion failure during idle cleanup
  * http-server: count bytes received, fixes regression
  * http-server: send "100 Continue", fixes regression
  * http-client: fix potential assertion failure after "100 Continue"

 -- Max Kellermann <mk@cm4all.com>  Fri, 01 Mar 2013 16:53:54 -0000

cm4all-beng-proxy (3.0.13) unstable; urgency=low

  * merge release 2.3.7
  * uri-verify: allow double slashes
  * change product token to "CM4all Webserver"

 -- Max Kellermann <mk@cm4all.com>  Mon, 18 Feb 2013 11:35:29 -0000

cm4all-beng-proxy (3.0.12) unstable; urgency=low

  * listener: enable TCP Fast Open (requires Linux 3.7)
  * rubber: optimize huge page allocation
  * rubber: optimize hole search
  * translate-cache: optimize INVALIDATE=HOST
  * filter-cache: reserve some space in the rubber allocator

 -- Max Kellermann <mk@cm4all.com>  Fri, 15 Feb 2013 09:57:51 -0000

cm4all-beng-proxy (3.0.11) unstable; urgency=low

  * stock: slow down destruction of surplus idle items
  * fcgi-client: try harder to reuse existing FastCGI connections
  * cmdline: new options to control the FastCGI/WAS stock

 -- Max Kellermann <mk@cm4all.com>  Tue, 12 Feb 2013 09:38:35 -0000

cm4all-beng-proxy (3.0.10) unstable; urgency=low

  * child: reduce verbosity of SIGTERM log message
  * connection: reduce verbosity of ECONNRESET log message
  * http-server: fix duplicate abort call
  * http-server: add missing pool reference in request body eof
  * handler: catch malformed URIs earlier
  * rubber: allocate from holes, avoid costly compression steps
  * http-cache: reserve some space in the rubber allocator

 -- Max Kellermann <mk@cm4all.com>  Fri, 08 Feb 2013 13:15:31 -0000

cm4all-beng-proxy (3.0.9) unstable; urgency=low

  * merge release 2.3.5
  * parser: fix malformed attribute value bounds
  * translation: packet VALIDATE_MTIME discards cache items after a file
    has been modified
  * http-server: fix spurious "closed prematurely" log messages
  * http-{server,client}: improve error messages
  * istream: clear the "direct" flag set on new streams
  * slice_pool: fix slice size and slices per area calculation

 -- Max Kellermann <mk@cm4all.com>  Wed, 06 Feb 2013 17:48:47 -0000

cm4all-beng-proxy (3.0.8) unstable; urgency=low

  * merge release 2.3.3
  * return unused I/O buffers to operating system
  * parser: optimize the attribute value parser
  * sink_rubber: fix assertion failure

 -- Max Kellermann <mk@cm4all.com>  Thu, 31 Jan 2013 13:27:39 -0000

cm4all-beng-proxy (3.0.7) unstable; urgency=low

  * istream-tee: fix crash due to erroneous read

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Jan 2013 13:32:49 -0000

cm4all-beng-proxy (3.0.6) unstable; urgency=low

  * control: new command "VERBOSE" manipulates logger verbosity
  * cmdline: remove obsolete option "enable_splice"
  * ajp-client: discard response body after HEAD request
  * fcgi-client: fix assertion failure after malformed HEAD response
  * fcgi-client: don't ignore log messages after HEAD request
  * translate-client: fix assertion failure after connection reset

 -- Max Kellermann <mk@cm4all.com>  Fri, 04 Jan 2013 13:14:09 -0000

cm4all-beng-proxy (3.0.5) unstable; urgency=low

  * translate-client: reduce number of system calls (optimization)
  * http-client: release the socket earlier for reusal
  * ajp-client: fix decoding the "special" response headers
  * ajp-client: wait for "end" packet before delivering empty response
  * ajp-client: use the Content-Length response header
  * ajp-client: send Content-Length request header only if body present
  * ajp-client: support HEAD requests
  * fcgi-client: support HEAD requests
  * fcgi-client: use the Content-Length response header
  * fcgi-client: don't discard buffer after socket has been closed
  * fcgi-client: continue parsing after response has been delivered
  * fcgi-client: don't attempt to write repeatedly if request body blocks
  * fcgi-client: optimized keep-alive after empty response

 -- Max Kellermann <mk@cm4all.com>  Fri, 28 Dec 2012 13:16:02 -0000

cm4all-beng-proxy (3.0.4) unstable; urgency=low

  * {http,filter}-cache: fix garbled data on large cache entries

 -- Max Kellermann <mk@cm4all.com>  Tue, 11 Dec 2012 15:17:17 -0000

cm4all-beng-proxy (3.0.3) unstable; urgency=low

  * memcached-client: fix assertion failure

 -- Max Kellermann <mk@cm4all.com>  Fri, 07 Dec 2012 18:52:33 -0000

cm4all-beng-proxy (3.0.2) unstable; urgency=low

  * merge release 2.3.1
  * lb: verify the client certificate issuer (option "ssl_verify")
  * lb: client certificate is mandatory if "ssl_verify" is enabled
  * lb: support extra CA certificate file (option "ssl_ca_cert")
  * cmdline: can't specify both --memcached-server and http_cache_size
  * init: default to one worker

 -- Max Kellermann <mk@cm4all.com>  Fri, 07 Dec 2012 09:24:52 -0000

cm4all-beng-proxy (3.0.1) unstable; urgency=low

  * http-cache: reduce memory usage while storing
  * {http,filter}-cache: reduce fork overhead
  * pool: fix crash when first allocation is large

 -- Max Kellermann <mk@cm4all.com>  Wed, 05 Dec 2012 14:05:28 -0000

cm4all-beng-proxy (3.0) unstable; urgency=low

  * {http,filter}-cache: reduce overhead when cache is disabled
  * {http,filter}-cache: exclude allocator table from reported size
  * filter-cache: reduce memory usage while storing
  * {http,filter,translate}-cache: return more free memory to operating system
  * pool: further overhead reduction
  * pool: reduce CPU overhead for large areas
  * rubber: fix assertion failure

 -- Max Kellermann <mk@cm4all.com>  Tue, 30 Oct 2012 16:32:45 -0000

cm4all-beng-proxy (2.2.1) unstable; urgency=low

  * merge release 2.1.13
  * control_local: fix assertion failure

 -- Max Kellermann <mk@cm4all.com>  Tue, 16 Oct 2012 15:46:16 -0000

cm4all-beng-proxy (2.2) unstable; urgency=low

  * cache: optimize lookups
  * pool: reduce overhead
  * pool: optimize the linear area recycler
  * resource-address: reduce memory overhead
  * session: reduce memory usage
  * http-cache, filter-cache: return free memory to operating system
  * control_server: support local and abstract sockets
  * python/control: support abstract sockets
  * bp_control: create implicit control channel for each worker process
  * require automake 1.11

 -- Max Kellermann <mk@cm4all.com>  Tue, 09 Oct 2012 15:11:24 -0000

cm4all-beng-proxy (2.3.7) unstable; urgency=low

  * tcache: fix assertion failure in BASE handler

 -- Max Kellermann <mk@cm4all.com>  Mon, 18 Feb 2013 11:58:01 -0000

cm4all-beng-proxy (2.3.6) unstable; urgency=low

  * listener: increase the backlog to 64
  * shm: reserve swap space, avoids theoretical crash

 -- Max Kellermann <mk@cm4all.com>  Sun, 17 Feb 2013 09:29:24 -0000

cm4all-beng-proxy (2.3.5) unstable; urgency=low

  * tcache: reduce CPU pressure when there are many virtual hosts (hot fix)
  * launch the access logger after daemonizing
  * user the configured logger user for the access logger
  * auto-close the access logger
  * debian/rules: compile with -fno-omit-frame-pointer

 -- Max Kellermann <mk@cm4all.com>  Tue, 05 Feb 2013 16:27:46 -0000

cm4all-beng-proxy (2.3.4) unstable; urgency=low

  * log-split: print referer and user agent
  * log-split: cache the last file
  * log-split: allow logging local time stamps
  * log-{split,cat}: escape URI, Referer and User-Agent
  * init: add ACCESS_LOGGER variable

 -- Max Kellermann <mk@cm4all.com>  Tue, 05 Feb 2013 01:31:31 -0000

cm4all-beng-proxy (2.3.3) unstable; urgency=low

  * pool: fix a memory leak in the temporary pool
  * processor: hard limit on length of attributes and parameters

 -- Max Kellermann <mk@cm4all.com>  Thu, 31 Jan 2013 13:16:33 -0000

cm4all-beng-proxy (2.3.2) unstable; urgency=low

  * merge release 2.1.17

 -- Max Kellermann <mk@cm4all.com>  Tue, 29 Jan 2013 00:01:23 -0000

cm4all-beng-proxy (2.3.1) unstable; urgency=low

  * merge release 2.1.16
  * pool: reduce CPU overhead for large areas

 -- Max Kellermann <mk@cm4all.com>  Thu, 06 Dec 2012 16:40:02 -0000

cm4all-beng-proxy (2.3) unstable; urgency=low

  * new stable branch based on v2.1.x, without the work-in-progress
    improvements from v2.2.x
  * cache: optimize lookups
  * pool: reduce overhead
  * pool: optimize the linear area recycler
  * resource-address: reduce memory overhead
  * session: reduce memory usage
  * {http,filter}-cache: reduce overhead when cache is disabled

 -- Max Kellermann <mk@cm4all.com>  Mon, 22 Oct 2012 13:48:20 -0000

cm4all-beng-proxy (2.1.17) unstable; urgency=low

  * merge release 2.0.55

 -- Max Kellermann <mk@cm4all.com>  Mon, 28 Jan 2013 23:59:54 -0000

cm4all-beng-proxy (2.1.16) unstable; urgency=low

  * merge release 2.0.54

 -- Max Kellermann <mk@cm4all.com>  Thu, 06 Dec 2012 16:35:17 -0000

cm4all-beng-proxy (2.1.15) unstable; urgency=low

  * merge release 2.0.53

 -- Max Kellermann <mk@cm4all.com>  Mon, 22 Oct 2012 12:26:57 -0000

cm4all-beng-proxy (2.1.14) unstable; urgency=low

  * merge release 2.0.52

 -- Max Kellermann <mk@cm4all.com>  Fri, 19 Oct 2012 12:10:09 -0000

cm4all-beng-proxy (2.1.13) unstable; urgency=low

  * merge release 2.0.51

 -- Max Kellermann <mk@cm4all.com>  Tue, 16 Oct 2012 15:41:58 -0000

cm4all-beng-proxy (2.1.12) unstable; urgency=low

  * merge release 2.0.50

 -- Max Kellermann <mk@cm4all.com>  Fri, 05 Oct 2012 12:26:24 -0000

cm4all-beng-proxy (2.1.11) unstable; urgency=low

  * merge release 2.0.49

 -- Max Kellermann <mk@cm4all.com>  Fri, 28 Sep 2012 15:04:36 -0000

cm4all-beng-proxy (2.1.10) unstable; urgency=low

  * merge release 2.0.48

 -- Max Kellermann <mk@cm4all.com>  Mon, 24 Sep 2012 15:43:46 -0000

cm4all-beng-proxy (2.1.9) unstable; urgency=low

  * merge release 2.0.47
  * lb: eliminate the duplicate "Date" response header (#1169)

 -- Max Kellermann <mk@cm4all.com>  Fri, 21 Sep 2012 15:56:06 -0000

cm4all-beng-proxy (2.1.8) unstable; urgency=low

  * control: publish statistics over the control protocol

 -- Max Kellermann <mk@cm4all.com>  Fri, 07 Sep 2012 12:47:34 -0000

cm4all-beng-proxy (2.1.7) unstable; urgency=low

  * resource-address: support expanding PIPE addresses
  * translation: support EXPAND_PATH for PROXY
  * reduced connect timeouts for translation server, FastCGI and beng-lb
  * uri-relative: support relative URI with just a query string
  * uri-relative: support relative URIs starting with a double slash
  * lb: improve error messages, include listener/pool name
  * lb: validate the selected sticky modde
  * lb: add sticky mode "source_ip"

 -- Max Kellermann <mk@cm4all.com>  Fri, 31 Aug 2012 14:03:41 -0000

cm4all-beng-proxy (2.1.6) unstable; urgency=low

  * merge release 2.0.46

 -- Max Kellermann <mk@cm4all.com>  Fri, 24 Aug 2012 11:11:20 -0000

cm4all-beng-proxy (2.1.5) unstable; urgency=low

  * lb_expect_monitor: configurable connect timeout

 -- Max Kellermann <mk@cm4all.com>  Mon, 20 Aug 2012 05:40:44 -0000

cm4all-beng-proxy (2.1.4) unstable; urgency=low

  * lb_monitor: configurable timeout

 -- Max Kellermann <mk@cm4all.com>  Fri, 17 Aug 2012 09:16:36 -0000

cm4all-beng-proxy (2.1.3) unstable; urgency=low

  * merge release 2.0.44
  * lb: implement tcp_expect option "expect_graceful"

 -- Max Kellermann <mk@cm4all.com>  Tue, 14 Aug 2012 14:30:57 -0000

cm4all-beng-proxy (2.1.2) unstable; urgency=low

  * support extended HTTP status codes from RFC 6585 and WebDAV

 -- Max Kellermann <mk@cm4all.com>  Thu, 09 Aug 2012 10:10:35 -0000

cm4all-beng-proxy (2.1.1) unstable; urgency=low

  * merge release 2.0.43
  * lb: support TRACE, OPTIONS and WebDAV

 -- Max Kellermann <mk@cm4all.com>  Fri, 03 Aug 2012 11:48:46 -0000

cm4all-beng-proxy (2.1) unstable; urgency=low

  * lb: add sticky mode "jvm_route" (Tomcat)

 -- Max Kellermann <mk@cm4all.com>  Mon, 30 Jul 2012 15:53:43 -0000

cm4all-beng-proxy (2.0.55) unstable; urgency=low

  * istream-tee: fix crash due to erroneous read
  * fix random crashes in the optimized build

 -- Max Kellermann <mk@cm4all.com>  Mon, 28 Jan 2013 23:52:26 -0000

cm4all-beng-proxy (2.0.54) unstable; urgency=low

  * http-cache: fix revalidation of memcached entries

 -- Max Kellermann <mk@cm4all.com>  Thu, 06 Dec 2012 16:31:23 -0000

cm4all-beng-proxy (2.0.53) unstable; urgency=low

  * filter-cache: fix assertion failure on serving empty response
  * http-cache: limit maximum age to 5 minutes if "Vary" includes cookies
  * lb: FADE_NODE lasts for 3 hours

 -- Max Kellermann <mk@cm4all.com>  Mon, 22 Oct 2012 12:21:18 -0000

cm4all-beng-proxy (2.0.52) unstable; urgency=low

  * {http,filter}-cache: include headers in cache size calculation
  * {http,filter}-cache: reduce headers memory usage
  * http-cache: limit maximum age to 1 week
    - 1 hour when "Vary" is used
    - 30 minutes when "Vary" includes "X-WidgetId" or "X-WidgetHref"
    - 5 minutes when "Vary" includes "X-CM4all-BENG-User"
  * cache: reduce number of system calls during lookup

 -- Max Kellermann <mk@cm4all.com>  Fri, 19 Oct 2012 12:07:10 -0000

cm4all-beng-proxy (2.0.51) unstable; urgency=low

  * merge release 1.4.33
  * processor: fix assertion failure with embedded CSS
  * lb: move control channel handler to worker process

 -- Max Kellermann <mk@cm4all.com>  Tue, 16 Oct 2012 15:39:32 -0000

cm4all-beng-proxy (2.0.50) unstable; urgency=low

  * pool: reduce memory overhead of debug data
  * fcgi-client: fix assertion failure due to redundant read event
  * lb: fix crash after pipe-to-socket splice I/O error

 -- Max Kellermann <mk@cm4all.com>  Fri, 05 Oct 2012 12:23:15 -0000

cm4all-beng-proxy (2.0.49) unstable; urgency=low

  * merge release 1.4.32

 -- Max Kellermann <mk@cm4all.com>  Fri, 28 Sep 2012 15:01:26 -0000

cm4all-beng-proxy (2.0.48) unstable; urgency=low

  * lb: fix duplicate monitor requests with --watchdog
  * child: verbose logging of child process events
  * log shutdown signal

 -- Max Kellermann <mk@cm4all.com>  Mon, 24 Sep 2012 15:36:03 -0000

cm4all-beng-proxy (2.0.47) unstable; urgency=low

  * merge release 1.4.31
  * cache: disable excessive debugging checks

 -- Max Kellermann <mk@cm4all.com>  Fri, 21 Sep 2012 15:24:30 -0000

cm4all-beng-proxy (2.0.46) unstable; urgency=low

  * merge release 1.4.30
  * lb: add option --config-file

 -- Max Kellermann <mk@cm4all.com>  Fri, 24 Aug 2012 10:52:29 -0000

cm4all-beng-proxy (2.0.45) unstable; urgency=low

  * merge release 1.4.29

 -- Max Kellermann <mk@cm4all.com>  Tue, 21 Aug 2012 15:49:49 -0000

cm4all-beng-proxy (2.0.44) unstable; urgency=low

  * lb: allow sticky with only one node
  * lb: add option "--check"
  * lb: run all monitors right after startup
  * lb: disable expiry of monitor results
  * lb: improved fallback for "sticky cookie"
  * lb: use Bulldog for "sticky cookie"
  * balancer, lb: persistent "fade" flag
  * balancer, lb: use the Bulldog "graceful" flag
  * control: add packet CONTROL_DUMP_POOLS

 -- Max Kellermann <mk@cm4all.com>  Tue, 14 Aug 2012 13:13:01 -0000

cm4all-beng-proxy (2.0.43) unstable; urgency=low

  * merge release 1.4.28
  * istream-replace: fix assertion failure with embedded CSS

 -- Max Kellermann <mk@cm4all.com>  Thu, 02 Aug 2012 11:14:27 -0000

cm4all-beng-proxy (2.0.42) unstable; urgency=low

  * js: new higher-level API

 -- Max Kellermann <mk@cm4all.com>  Wed, 01 Aug 2012 11:32:28 -0000

cm4all-beng-proxy (2.0.41) unstable; urgency=low

  * session: fix bogus assertion failure when loading expired session

 -- Max Kellermann <mk@cm4all.com>  Fri, 27 Jul 2012 12:47:49 -0000

cm4all-beng-proxy (2.0.40) unstable; urgency=low

  * merge release 1.4.27

 -- Max Kellermann <mk@cm4all.com>  Tue, 24 Jul 2012 16:29:13 -0000

cm4all-beng-proxy (2.0.39) unstable; urgency=low

  * merge release 1.4.26

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Jul 2012 17:00:20 -0000

cm4all-beng-proxy (2.0.38) unstable; urgency=low

  * merge release 1.4.25
  * strset: fix GROUP_CONTAINER false negatives

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Jul 2012 16:03:49 -0000

cm4all-beng-proxy (2.0.37) unstable; urgency=low

  * merge release 1.4.24

 -- Max Kellermann <mk@cm4all.com>  Mon, 16 Jul 2012 10:36:57 -0000

cm4all-beng-proxy (2.0.36) unstable; urgency=low

  * proxy-handler: re-add the URI suffix for "transparent" requests

 -- Max Kellermann <mk@cm4all.com>  Wed, 11 Jul 2012 14:12:11 -0000

cm4all-beng-proxy (2.0.35) unstable; urgency=low

  * translate: allow WIDGET_GROUP without PROCESS

 -- Max Kellermann <mk@cm4all.com>  Thu, 05 Jul 2012 13:03:21 -0000

cm4all-beng-proxy (2.0.34) unstable; urgency=low

  * session_save: skip shutdown code if saving is not configured
  * http-server: fix assertion on I/O error during POST
  * header-forward: new group FORWARD to forward the "Host" header

 -- Max Kellermann <mk@cm4all.com>  Tue, 03 Jul 2012 16:46:39 -0000

cm4all-beng-proxy (2.0.33) unstable; urgency=low

  * processor: option SELF_CONTAINER allows widget to only embed itself
  * processor: allow embedding approved widget groups
  * processor: optionally invoke CSS processor for style attributes
  * response, lb_http: put "Discard" cookie attribute to the end (Android bug)

 -- Max Kellermann <mk@cm4all.com>  Mon, 02 Jul 2012 17:52:32 -0000

cm4all-beng-proxy (2.0.32) unstable; urgency=low

  * socket_wrapper: fix two assertion failures
  * pheaders: emit Cache-Control:no-store to work around IE quirk

 -- Max Kellermann <mk@cm4all.com>  Tue, 26 Jun 2012 09:41:51 -0000

cm4all-beng-proxy (2.0.31) unstable; urgency=low

  * lb: publish the SSL peer issuer subject
  * widget-registry: copy the direct_addressing attribute

 -- Max Kellermann <mk@cm4all.com>  Wed, 06 Jun 2012 13:36:04 -0000

cm4all-beng-proxy (2.0.30) unstable; urgency=low

  * init: add --group variable to .default file
  * doc: update view security documentation
  * processor: apply underscore prefix to <A NAME="...">
  * session: restore sessions from a file

 -- Max Kellermann <mk@cm4all.com>  Fri, 01 Jun 2012 11:06:50 -0000

cm4all-beng-proxy (2.0.29) unstable; urgency=low

  * widget: optional direct URI addressing scheme
  * processor: eliminate additional underscore from class prefix
  * ssl_filter: support TLS client certificates

 -- Max Kellermann <mk@cm4all.com>  Tue, 29 May 2012 13:29:06 -0000

cm4all-beng-proxy (2.0.28) unstable; urgency=low

  * merge release 1.4.22

 -- Max Kellermann <mk@cm4all.com>  Wed, 16 May 2012 10:24:31 -0000

cm4all-beng-proxy (2.0.27) unstable; urgency=low

  * uri-address: fix assertion failures with UNIX domain sockets
  * uri-address: fix redirects with matching absolute URI

 -- Max Kellermann <mk@cm4all.com>  Wed, 09 May 2012 16:16:06 -0000

cm4all-beng-proxy (2.0.26) unstable; urgency=low

  * processor: rewrite URIs in META/refresh

 -- Max Kellermann <mk@cm4all.com>  Thu, 03 May 2012 14:43:03 -0000

cm4all-beng-proxy (2.0.25) unstable; urgency=low

  * merge release 1.4.21
  * processor: fix double free bug on failed widget lookup
  * session: don't access the session manager after worker crash
  * proxy-widget: fix assertion failure with empty view name

 -- Max Kellermann <mk@cm4all.com>  Thu, 26 Apr 2012 14:22:10 -0000

cm4all-beng-proxy (2.0.24) unstable; urgency=low

  * processor: optionally invoke CSS processor for <style>

 -- Max Kellermann <mk@cm4all.com>  Fri, 20 Apr 2012 12:10:42 -0000

cm4all-beng-proxy (2.0.23) unstable; urgency=low

  * widget-resolver: check for translation server failure
  * widget-resolver: don't sync with session when view is invalid
  * rewrite-uri: check for invalid view name
  * {css_,}processor: eliminate second underscore from class prefix
  * doc: document the algorithm for replacing two leading underscores

 -- Max Kellermann <mk@cm4all.com>  Thu, 29 Mar 2012 15:37:52 -0000

cm4all-beng-proxy (2.0.22) unstable; urgency=low

  * merge release 1.4.20
  * proxy-widget: forbid client to select view with address
  * proxy-widget: allow any view selection when widget is not a container
  * widget-http: allow any view selection for unprocessable response
  * widget-http: inherit the view from the template
  * widget-request: sync with session only if processor is enabled
  * widget-http: postpone saving to session after receiving response headers
  * processor: add entities &c:id; &c:type; &c:class;

 -- Max Kellermann <mk@cm4all.com>  Mon, 26 Mar 2012 14:05:05 -0000

cm4all-beng-proxy (2.0.21) unstable; urgency=low

  * css_processor: use mode "partial" for @import
  * rewrite-uri: use mode "partial" on invalid input

 -- Max Kellermann <mk@cm4all.com>  Tue, 20 Mar 2012 18:11:28 -0000

cm4all-beng-proxy (2.0.20) unstable; urgency=low

  * {css_,}processor: default mode is "partial"
  * processor: handle underscore prefixes in the "for" attribute

 -- Max Kellermann <mk@cm4all.com>  Tue, 20 Mar 2012 16:48:51 -0000

cm4all-beng-proxy (2.0.19) unstable; urgency=low

  * merge release 1.4.19

 -- Max Kellermann <mk@cm4all.com>  Tue, 20 Mar 2012 08:41:03 -0000

cm4all-beng-proxy (2.0.18) unstable; urgency=low

  * merge release 1.4.18

 -- Max Kellermann <mk@cm4all.com>  Thu, 15 Mar 2012 15:53:12 -0000

cm4all-beng-proxy (2.0.17) unstable; urgency=low

  * merge release 1.4.17
  * css_parser: check for url() following another token
  * css_processor: rewrite @import URIs
  * {text_,}processor: new entity &c:local;

 -- Max Kellermann <mk@cm4all.com>  Fri, 09 Mar 2012 16:50:19 -0000

cm4all-beng-proxy (2.0.16) unstable; urgency=low

  * response: generate Vary response header from translation response
  * widget-resolver: fix NULL dereference after failure
  * translation: User-Agent classification

 -- Max Kellermann <mk@cm4all.com>  Tue, 06 Mar 2012 11:54:10 -0000

cm4all-beng-proxy (2.0.15) unstable; urgency=low

  * merge release 1.4.16
  * uri-address: fix NULL dereference on certain malformed URIs

 -- Max Kellermann <mk@cm4all.com>  Fri, 02 Mar 2012 16:28:54 -0000

cm4all-beng-proxy (2.0.14) unstable; urgency=low

  * address-resolver: add missing initialization
  * rewrite-uri: fix NULL pointer dereference with "local URI"
  * rewrite-uri: allow mode=proxy (optional temporary kludge)
  * widget-http: auto-disable processor (optional temporary kludge)

 -- Max Kellermann <mk@cm4all.com>  Thu, 01 Mar 2012 18:36:38 -0000

cm4all-beng-proxy (2.0.13) unstable; urgency=low

  * merge release 1.4.15
  * translation: make CGI auto-base optional
  * handler: fix up translation client errors

 -- Max Kellermann <mk@cm4all.com>  Thu, 23 Feb 2012 17:31:03 -0000

cm4all-beng-proxy (2.0.12) unstable; urgency=low

  * merge release 1.4.13

 -- Max Kellermann <mk@cm4all.com>  Thu, 16 Feb 2012 14:41:45 -0000

cm4all-beng-proxy (2.0.11) unstable; urgency=low

  * merge release 1.4.11
  * processor: skip rewriting absolute URIs

 -- Max Kellermann <mk@cm4all.com>  Thu, 09 Feb 2012 09:43:06 -0000

cm4all-beng-proxy (2.0.10) unstable; urgency=low

  * resource-address: initialise type, fixes assertion failure

 -- Max Kellermann <mk@cm4all.com>  Tue, 07 Feb 2012 16:57:06 -0000

cm4all-beng-proxy (2.0.9) unstable; urgency=low

  * [css]processor: expand underscore only XML id / CSS class
  * widget-http: filter processor response headers
  * processor: forward Wildfire headers in the debug build

 -- Max Kellermann <mk@cm4all.com>  Tue, 07 Feb 2012 12:32:33 -0000

cm4all-beng-proxy (2.0.8) unstable; urgency=low

  * rewrite-uri: prefix "@/" refers to widget's "local URI"

 -- Max Kellermann <mk@cm4all.com>  Fri, 03 Feb 2012 13:50:16 -0000

cm4all-beng-proxy (2.0.7) unstable; urgency=low

  * merge release 1.4.10
  * stock: clear idle objects periodically

 -- Max Kellermann <mk@cm4all.com>  Thu, 02 Feb 2012 14:10:24 -0000

cm4all-beng-proxy (2.0.6) unstable; urgency=low

  * merge release 1.4.9

 -- Max Kellermann <mk@cm4all.com>  Tue, 31 Jan 2012 15:10:18 -0000

cm4all-beng-proxy (2.0.5) unstable; urgency=low

  * merge release 1.4.8
  * translate-client: verify the PROXY and AJP payloads
  * translation: support inserting regex matches into CGI/file path
  * translation: support customizing the cookie's "Domain" attribute
  * request: new option "dynamic_session_cookie" adds suffix to cookie
    name
  * uri-address: verify the path component

 -- Max Kellermann <mk@cm4all.com>  Wed, 25 Jan 2012 17:05:09 -0000

cm4all-beng-proxy (2.0.4) unstable; urgency=low

  * merge release 1.4.6
  * access-log: don't log the remote port
  * translation: support inserting regex matches into CGI's PATH_INFO
  * tcache: generate BASE automatically for CGI

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 Jan 2012 15:18:37 -0000

cm4all-beng-proxy (2.0.3) unstable; urgency=low

  * merge release 1.4.4
  * http-server: log remote host address

 -- Max Kellermann <mk@cm4all.com>  Tue, 27 Dec 2011 07:41:15 -0000

cm4all-beng-proxy (2.0.2) unstable; urgency=low

  * merge release 1.4.2
  * widget-http: improved HTTP error messages
  * processor: forbid widget request after URI compress failure

 -- Max Kellermann <mk@cm4all.com>  Wed, 07 Dec 2011 16:51:58 -0000

cm4all-beng-proxy (2.0.1) unstable; urgency=low

  * merge release 1.4.1

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Nov 2011 13:57:27 -0000

cm4all-beng-proxy (2.0) unstable; urgency=low

  * rewrite-uri: reapply 'drop the deprecated mode "proxy"'
  * proxy-widget: reapply 'client can choose only views that have an address'

 -- Max Kellermann <mk@cm4all.com>  Thu, 17 Nov 2011 08:22:39 +0100

cm4all-beng-proxy (1.4.33) unstable; urgency=low

  * istream-file: reduce memory usage for small files
  * file-handler: fix xattr usage on ranged file request (possible
    assertion failure)

 -- Max Kellermann <mk@cm4all.com>  Tue, 16 Oct 2012 15:28:57 -0000

cm4all-beng-proxy (1.4.32) unstable; urgency=low

  * cgi: fix spontaneous shutdown due to misrouted SIGTERM signal

 -- Max Kellermann <mk@cm4all.com>  Fri, 28 Sep 2012 14:39:13 -0000

cm4all-beng-proxy (1.4.31) unstable; urgency=low

  * shm: fix check for shared memory allocation failure
  * child: handle lost SIGCHLD events
  * child: ignore stale child processes

 -- Max Kellermann <mk@cm4all.com>  Fri, 21 Sep 2012 15:21:20 -0000

cm4all-beng-proxy (1.4.30) unstable; urgency=low

  * http-server: parse all tokens in the "Connection" request header

 -- Max Kellermann <mk@cm4all.com>  Fri, 24 Aug 2012 10:50:28 -0000

cm4all-beng-proxy (1.4.29) unstable; urgency=low

  * proxy-widget: fix memory leak on aborted POST request

 -- Max Kellermann <mk@cm4all.com>  Tue, 21 Aug 2012 15:05:12 -0000

cm4all-beng-proxy (1.4.28) unstable; urgency=low

  * worker: reinitialize signal handlers after fork failure
  * lb: work around libevent bug that freezes during shutdown

 -- Max Kellermann <mk@cm4all.com>  Thu, 02 Aug 2012 13:53:18 -0000

cm4all-beng-proxy (1.4.27) unstable; urgency=low

  * lb: fix hanging SSL connection on bulk transfer

 -- Max Kellermann <mk@cm4all.com>  Tue, 24 Jul 2012 14:58:17 -0000

cm4all-beng-proxy (1.4.26) unstable; urgency=low

  * processor: fix regression, missing NULL check

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Jul 2012 16:55:24 -0000

cm4all-beng-proxy (1.4.25) unstable; urgency=low

  * processor: don't rewrite the fragment part of the URI

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Jul 2012 15:50:06 -0000

cm4all-beng-proxy (1.4.24) unstable; urgency=low

  * lb: fix splicing with SSL

 -- Max Kellermann <mk@cm4all.com>  Mon, 16 Jul 2012 10:32:17 -0000

cm4all-beng-proxy (1.4.23) unstable; urgency=low

  * widget-http: fix double free bug when POST is aborted

 -- Max Kellermann <mk@cm4all.com>  Tue, 03 Jul 2012 16:42:28 -0000

cm4all-beng-proxy (1.4.22) unstable; urgency=low

  * merge release 1.2.27
  * widget: backport memory leak fix from 2.0
  * widget-http: fix memory leak on abort

 -- Max Kellermann <mk@cm4all.com>  Wed, 16 May 2012 10:00:23 -0000

cm4all-beng-proxy (1.4.21) unstable; urgency=low

  * merge release 1.2.26

 -- Max Kellermann <mk@cm4all.com>  Thu, 26 Apr 2012 14:17:56 -0000

cm4all-beng-proxy (1.4.20) unstable; urgency=low

  * merge release 1.2.25

 -- Max Kellermann <mk@cm4all.com>  Mon, 26 Mar 2012 14:03:14 -0000

cm4all-beng-proxy (1.4.19) unstable; urgency=low

  * merge release 1.2.24

 -- Max Kellermann <mk@cm4all.com>  Tue, 20 Mar 2012 08:36:19 -0000

cm4all-beng-proxy (1.4.18) unstable; urgency=low

  * merge release 1.2.23

 -- Max Kellermann <mk@cm4all.com>  Thu, 15 Mar 2012 15:50:20 -0000

cm4all-beng-proxy (1.4.17) unstable; urgency=low

  * merge release 1.2.22

 -- Max Kellermann <mk@cm4all.com>  Thu, 08 Mar 2012 18:36:00 -0000

cm4all-beng-proxy (1.4.16) unstable; urgency=low

  * merge release 1.2.21

 -- Max Kellermann <mk@cm4all.com>  Fri, 02 Mar 2012 16:03:51 -0000

cm4all-beng-proxy (1.4.15) unstable; urgency=low

  * merge release 1.2.20

 -- Max Kellermann <mk@cm4all.com>  Thu, 23 Feb 2012 17:12:30 -0000

cm4all-beng-proxy (1.4.14) unstable; urgency=low

  * merge release 1.2.19

 -- Max Kellermann <mk@cm4all.com>  Thu, 23 Feb 2012 15:35:04 -0000

cm4all-beng-proxy (1.4.13) unstable; urgency=low

  * merge release 1.2.18

 -- Max Kellermann <mk@cm4all.com>  Thu, 16 Feb 2012 13:53:49 -0000

cm4all-beng-proxy (1.4.12) unstable; urgency=low

  * merge release 1.2.17

 -- Max Kellermann <mk@cm4all.com>  Wed, 15 Feb 2012 09:27:50 -0000

cm4all-beng-proxy (1.4.11) unstable; urgency=low

  * merge release 1.2.16

 -- Max Kellermann <mk@cm4all.com>  Thu, 09 Feb 2012 09:33:30 -0000

cm4all-beng-proxy (1.4.10) unstable; urgency=low

  * merge release 1.2.15

 -- Max Kellermann <mk@cm4all.com>  Thu, 02 Feb 2012 13:43:11 -0000

cm4all-beng-proxy (1.4.9) unstable; urgency=low

  * merge release 1.2.14

 -- Max Kellermann <mk@cm4all.com>  Tue, 31 Jan 2012 15:06:57 -0000

cm4all-beng-proxy (1.4.8) unstable; urgency=low

  * merge release 1.2.13

 -- Max Kellermann <mk@cm4all.com>  Wed, 25 Jan 2012 12:16:53 -0000

cm4all-beng-proxy (1.4.7) unstable; urgency=low

  * merge release 1.2.12

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Jan 2012 08:37:01 -0000

cm4all-beng-proxy (1.4.6) unstable; urgency=low

  * merge release 1.2.11

 -- Max Kellermann <mk@cm4all.com>  Wed, 04 Jan 2012 15:41:43 -0000

cm4all-beng-proxy (1.4.5) unstable; urgency=low

  * merge release 1.2.10

 -- Max Kellermann <mk@cm4all.com>  Wed, 28 Dec 2011 17:07:13 -0000

cm4all-beng-proxy (1.4.4) unstable; urgency=low

  * merge release 1.2.9

 -- Max Kellermann <mk@cm4all.com>  Thu, 22 Dec 2011 11:28:39 -0000

cm4all-beng-proxy (1.4.3) unstable; urgency=low

  * merge release 1.2.8

 -- Max Kellermann <mk@cm4all.com>  Wed, 14 Dec 2011 11:20:04 -0000

cm4all-beng-proxy (1.4.2) unstable; urgency=low

  * text-processor: allow processing "application/javascript",
    "application/json"
  * uri-relative: allow backtracking to the widget base with "../"
  * merge release 1.2.7

 -- Max Kellermann <mk@cm4all.com>  Tue, 06 Dec 2011 12:39:24 -0000

cm4all-beng-proxy (1.4.1) unstable; urgency=low

  * merge release 1.2.6

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Nov 2011 13:53:56 -0000

cm4all-beng-proxy (1.4) unstable; urgency=low

  * proxy-widget: revert 'client can choose only views that have an address'
  * rewrite-uri: revert 'drop the deprecated mode "proxy"'

 -- Max Kellermann <mk@cm4all.com>  Thu, 17 Nov 2011 08:10:42 +0100

cm4all-beng-proxy (1.3.2) unstable; urgency=low

  * tcache: add regex matching, translation packets REGEX, INVERSE_REGEX
  * widget: don't start the prefix with an underscore
  * translation: add new packet PROCESS_TEXT, to expand entity references
  * translation: add new packet WIDGET_INFO, enables additional request headers
  * doc: document the algorithm for replacing three leading underscores

 -- Max Kellermann <mk@cm4all.com>  Wed, 16 Nov 2011 17:00:16 +0100

cm4all-beng-proxy (1.3.1) unstable; urgency=low

  * merge release 1.2.5

 -- Max Kellermann <mk@cm4all.com>  Tue, 08 Nov 2011 19:51:18 +0100

cm4all-beng-proxy (1.3) unstable; urgency=low

  * rewrite-uri: drop the deprecated mode "proxy"
  * proxy-widget: client can choose only views that have an address

 -- Max Kellermann <mk@cm4all.com>  Mon, 31 Oct 2011 17:41:14 +0100

cm4all-beng-proxy (1.2.27) unstable; urgency=low

  * merge release 1.1.40

 -- Max Kellermann <mk@cm4all.com>  Wed, 16 May 2012 09:51:50 -0000

cm4all-beng-proxy (1.2.26) unstable; urgency=low

  * merge release 1.1.39

 -- Max Kellermann <mk@cm4all.com>  Thu, 26 Apr 2012 14:16:40 -0000

cm4all-beng-proxy (1.2.25) unstable; urgency=low

  * merge release 1.1.38

 -- Max Kellermann <mk@cm4all.com>  Mon, 26 Mar 2012 14:01:44 -0000

cm4all-beng-proxy (1.2.24) unstable; urgency=low

  * merge release 1.1.37

 -- Max Kellermann <mk@cm4all.com>  Tue, 20 Mar 2012 08:33:31 -0000

cm4all-beng-proxy (1.2.23) unstable; urgency=low

  * merge release 1.1.36

 -- Max Kellermann <mk@cm4all.com>  Thu, 15 Mar 2012 15:37:10 -0000

cm4all-beng-proxy (1.2.22) unstable; urgency=low

  * merge release 1.1.35

 -- Max Kellermann <mk@cm4all.com>  Thu, 08 Mar 2012 18:29:39 -0000

cm4all-beng-proxy (1.2.21) unstable; urgency=low

  * merge release 1.1.34

 -- Max Kellermann <mk@cm4all.com>  Fri, 02 Mar 2012 16:02:00 -0000

cm4all-beng-proxy (1.2.20) unstable; urgency=low

  * merge release 1.1.33

 -- Max Kellermann <mk@cm4all.com>  Thu, 23 Feb 2012 17:11:15 -0000

cm4all-beng-proxy (1.2.19) unstable; urgency=low

  * merge release 1.1.32

 -- Max Kellermann <mk@cm4all.com>  Thu, 23 Feb 2012 15:18:36 -0000

cm4all-beng-proxy (1.2.18) unstable; urgency=low

  * merge release 1.1.31

 -- Max Kellermann <mk@cm4all.com>  Thu, 16 Feb 2012 13:52:42 -0000

cm4all-beng-proxy (1.2.17) unstable; urgency=low

  * merge release 1.1.30

 -- Max Kellermann <mk@cm4all.com>  Wed, 15 Feb 2012 09:26:45 -0000

cm4all-beng-proxy (1.2.16) unstable; urgency=low

  * merge release 1.1.29

 -- Max Kellermann <mk@cm4all.com>  Thu, 09 Feb 2012 09:31:50 -0000

cm4all-beng-proxy (1.2.15) unstable; urgency=low

  * merge release 1.1.28

 -- Max Kellermann <mk@cm4all.com>  Thu, 02 Feb 2012 13:41:45 -0000

cm4all-beng-proxy (1.2.14) unstable; urgency=low

  * merge release 1.1.27

 -- Max Kellermann <mk@cm4all.com>  Tue, 31 Jan 2012 15:04:32 -0000

cm4all-beng-proxy (1.2.13) unstable; urgency=low

  * merge release 1.1.26

 -- Max Kellermann <mk@cm4all.com>  Wed, 25 Jan 2012 12:15:19 -0000

cm4all-beng-proxy (1.2.12) unstable; urgency=low

  * merge release 1.1.25

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Jan 2012 08:31:44 -0000

cm4all-beng-proxy (1.2.11) unstable; urgency=low

  * merge release 1.1.24

 -- Max Kellermann <mk@cm4all.com>  Wed, 04 Jan 2012 15:38:27 -0000

cm4all-beng-proxy (1.2.10) unstable; urgency=low

  * merge release 1.1.23

 -- Max Kellermann <mk@cm4all.com>  Wed, 28 Dec 2011 17:01:43 -0000

cm4all-beng-proxy (1.2.9) unstable; urgency=low

  * merge release 1.1.22

 -- Max Kellermann <mk@cm4all.com>  Thu, 22 Dec 2011 10:28:29 -0000

cm4all-beng-proxy (1.2.8) unstable; urgency=low

  * merge release 1.1.21

 -- Max Kellermann <mk@cm4all.com>  Wed, 14 Dec 2011 11:12:32 -0000

cm4all-beng-proxy (1.2.7) unstable; urgency=low

  * merge release 1.1.20

 -- Max Kellermann <mk@cm4all.com>  Tue, 06 Dec 2011 11:43:10 -0000

cm4all-beng-proxy (1.2.6) unstable; urgency=low

  * merge release 1.1.19

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Nov 2011 13:47:43 -0000

cm4all-beng-proxy (1.2.5) unstable; urgency=low

  * merge release 1.1.18
  * file-handler: handle If-Modified-Since followed by filter

 -- Max Kellermann <mk@cm4all.com>  Tue, 08 Nov 2011 19:43:58 +0100

cm4all-beng-proxy (1.2.4) unstable; urgency=low

  * merge release 1.1.17

 -- Max Kellermann <mk@cm4all.com>  Wed, 02 Nov 2011 16:58:28 +0100

cm4all-beng-proxy (1.2.3) unstable; urgency=low

  * merge release 1.1.16

 -- Max Kellermann <mk@cm4all.com>  Fri, 21 Oct 2011 15:16:13 +0200

cm4all-beng-proxy (1.2.2) unstable; urgency=low

  * merge release 1.1.15
  * widget-view: an empty name refers to the default view
  * processor: new entity &c:view;

 -- Max Kellermann <mk@cm4all.com>  Wed, 19 Oct 2011 11:43:20 +0200

cm4all-beng-proxy (1.2.1) unstable; urgency=low

  * merge release 1.1.13

 -- Max Kellermann <mk@cm4all.com>  Wed, 05 Oct 2011 17:16:04 +0200

cm4all-beng-proxy (1.2) unstable; urgency=low

  * delegate-client: improved error reporting
  * response-error: resolve errno codes
  * python/control/client: bind the unix domain socket
  * python/control/client: implement timeout
  * lb_control: allow querying node status over control socket

 -- Max Kellermann <mk@cm4all.com>  Tue, 27 Sep 2011 12:00:44 +0200

cm4all-beng-proxy (1.1.40) unstable; urgency=low

  * merge release 1.0.34

 -- Max Kellermann <mk@cm4all.com>  Wed, 16 May 2012 09:50:37 -0000

cm4all-beng-proxy (1.1.39) unstable; urgency=low

  * merge release 1.0.33

 -- Max Kellermann <mk@cm4all.com>  Thu, 26 Apr 2012 14:12:30 -0000

cm4all-beng-proxy (1.1.38) unstable; urgency=low

  * merge release 1.0.32

 -- Max Kellermann <mk@cm4all.com>  Mon, 26 Mar 2012 14:00:38 -0000

cm4all-beng-proxy (1.1.37) unstable; urgency=low

  * merge release 1.0.31

 -- Max Kellermann <mk@cm4all.com>  Tue, 20 Mar 2012 08:31:08 -0000

cm4all-beng-proxy (1.1.36) unstable; urgency=low

  * merge release 1.0.30

 -- Max Kellermann <mk@cm4all.com>  Thu, 15 Mar 2012 15:36:15 -0000

cm4all-beng-proxy (1.1.35) unstable; urgency=low

  * merge release 1.0.29
  * css_processor: delete "-c-mode" and "-c-view" from output

 -- Max Kellermann <mk@cm4all.com>  Thu, 08 Mar 2012 18:16:03 -0000

cm4all-beng-proxy (1.1.34) unstable; urgency=low

  * merge release 1.0.28

 -- Max Kellermann <mk@cm4all.com>  Fri, 02 Mar 2012 15:26:44 -0000

cm4all-beng-proxy (1.1.33) unstable; urgency=low

  * merge release 1.0.27

 -- Max Kellermann <mk@cm4all.com>  Thu, 23 Feb 2012 17:09:57 -0000

cm4all-beng-proxy (1.1.32) unstable; urgency=low

  * merge release 1.0.26

 -- Max Kellermann <mk@cm4all.com>  Thu, 23 Feb 2012 15:14:56 -0000

cm4all-beng-proxy (1.1.31) unstable; urgency=low

  * merge release 1.0.25

 -- Max Kellermann <mk@cm4all.com>  Thu, 16 Feb 2012 13:49:26 -0000

cm4all-beng-proxy (1.1.30) unstable; urgency=low

  * merge release 1.0.24

 -- Max Kellermann <mk@cm4all.com>  Wed, 15 Feb 2012 09:25:38 -0000

cm4all-beng-proxy (1.1.29) unstable; urgency=low

  * merge release 1.0.23

 -- Max Kellermann <mk@cm4all.com>  Thu, 09 Feb 2012 09:30:18 -0000

cm4all-beng-proxy (1.1.28) unstable; urgency=low

  * merge release 1.0.22

 -- Max Kellermann <mk@cm4all.com>  Thu, 02 Feb 2012 13:39:21 -0000

cm4all-beng-proxy (1.1.27) unstable; urgency=low

  * merge release 1.0.21

 -- Max Kellermann <mk@cm4all.com>  Tue, 31 Jan 2012 14:59:06 -0000

cm4all-beng-proxy (1.1.26) unstable; urgency=low

  * merge release 1.0.20

 -- Max Kellermann <mk@cm4all.com>  Wed, 25 Jan 2012 12:13:43 -0000

cm4all-beng-proxy (1.1.25) unstable; urgency=low

  * merge release 1.0.19

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Jan 2012 08:29:34 -0000

cm4all-beng-proxy (1.1.24) unstable; urgency=low

  * merge release 1.0.18

 -- Max Kellermann <mk@cm4all.com>  Wed, 04 Jan 2012 15:27:35 -0000

cm4all-beng-proxy (1.1.23) unstable; urgency=low

  * header-forward: remove port number from X-Forwarded-For

 -- Max Kellermann <mk@cm4all.com>  Wed, 28 Dec 2011 16:51:41 -0000

cm4all-beng-proxy (1.1.22) unstable; urgency=low

  * merge release 1.0.17
  * istream-socket: fix potential assertion failure

 -- Max Kellermann <mk@cm4all.com>  Wed, 21 Dec 2011 16:44:46 -0000

cm4all-beng-proxy (1.1.21) unstable; urgency=low

  * merge release 1.0.16

 -- Max Kellermann <mk@cm4all.com>  Wed, 14 Dec 2011 11:07:58 -0000

cm4all-beng-proxy (1.1.20) unstable; urgency=low

  * merge release 1.0.15
  * processor: don't rewrite "mailto:" hyperlinks

 -- Max Kellermann <mk@cm4all.com>  Mon, 05 Dec 2011 18:37:10 -0000

cm4all-beng-proxy (1.1.19) unstable; urgency=low

  * {css_,}processor: quote widget classes for prefixing XML IDs, CSS classes

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Nov 2011 13:17:02 -0000

cm4all-beng-proxy (1.1.18) unstable; urgency=low

  * merge release 1.0.13
  * lb_http: eliminate the duplicate "Date" response header

 -- Max Kellermann <mk@cm4all.com>  Tue, 08 Nov 2011 19:33:07 +0100

cm4all-beng-proxy (1.1.17) unstable; urgency=low

  * merge release 1.0.13

 -- Max Kellermann <mk@cm4all.com>  Wed, 02 Nov 2011 16:52:21 +0100

cm4all-beng-proxy (1.1.16) unstable; urgency=low

  * merge release 1.0.12

 -- Max Kellermann <mk@cm4all.com>  Fri, 21 Oct 2011 15:09:55 +0200

cm4all-beng-proxy (1.1.15) unstable; urgency=low

  * merge release 1.0.11

 -- Max Kellermann <mk@cm4all.com>  Wed, 19 Oct 2011 09:36:38 +0200

cm4all-beng-proxy (1.1.14) unstable; urgency=low

  * merge release 1.0.10

 -- Max Kellermann <mk@cm4all.com>  Fri, 07 Oct 2011 15:15:00 +0200

cm4all-beng-proxy (1.1.13) unstable; urgency=low

  * merge release 1.0.9

 -- Max Kellermann <mk@cm4all.com>  Thu, 29 Sep 2011 16:47:56 +0200

cm4all-beng-proxy (1.1.12) unstable; urgency=low

  * merge release 1.0.8

 -- Max Kellermann <mk@cm4all.com>  Thu, 22 Sep 2011 17:13:41 +0200

cm4all-beng-proxy (1.1.11) unstable; urgency=low

  * merge release 1.0.7
  * widget-http: response header X-CM4all-View selects a view
  * processor, css_processor: support prefixing XML ids
  * processor: property "c:view" selects a view

 -- Max Kellermann <mk@cm4all.com>  Fri, 16 Sep 2011 12:25:24 +0200

cm4all-beng-proxy (1.1.10) unstable; urgency=low

  * merge release 1.0.6
  * http-request: don't clear failure state on successful TCP connection
  * istream-socket: fix assertion failure after receive error
  * ssl_filter: check for end-of-file on plain socket
  * ssl_filter: fix buffer assertion failures

 -- Max Kellermann <mk@cm4all.com>  Tue, 13 Sep 2011 18:50:18 +0200

cm4all-beng-proxy (1.1.9) unstable; urgency=low

  * http-request: improve keep-alive cancellation detection
  * http-request: mark server "failed" after HTTP client error
  * lb: implement the control protocol
    - can disable and re-enable workers
  * lb: don't allow sticky pool with only one member
  * lb: verify that a new sticky host is alive
  * lb: mark server "failed" after HTTP client error

 -- Max Kellermann <mk@cm4all.com>  Fri, 09 Sep 2011 13:03:55 +0200

cm4all-beng-proxy (1.1.8) unstable; urgency=low

  * merge release 1.0.5
  * {css_,}processor: one more underscore for the prefix
  * processor: remove rewrite-uri processing instructions from output
  * translate: unknown packet is a fatal error
  * processor: add option to set widget/focus by default
  * rewrite-uri: a leading tilde refers to the widget base; translation
    packet ANCHOR_ABSOLUTE enables it by default

 -- Max Kellermann <mk@cm4all.com>  Mon, 05 Sep 2011 17:56:31 +0200

cm4all-beng-proxy (1.1.7) unstable; urgency=low

  * css_processor: implement property "-c-mode"
  * css_processor: translate underscore prefix in class names
  * processor: translate underscore prefix in CSS class names

 -- Max Kellermann <mk@cm4all.com>  Mon, 29 Aug 2011 17:47:48 +0200

cm4all-beng-proxy (1.1.6) unstable; urgency=low

  * merge release 1.0.3
  * implement CSS processor

 -- Max Kellermann <mk@cm4all.com>  Mon, 22 Aug 2011 17:13:56 +0200

cm4all-beng-proxy (1.1.5) unstable; urgency=low

  * lb: optionally generate Via and X-Forwarded-For

 -- Max Kellermann <mk@cm4all.com>  Wed, 17 Aug 2011 12:45:14 +0200

cm4all-beng-proxy (1.1.4) unstable; urgency=low

  * pipe-stock: fix assertion failure after optimization bug
  * istream-pipe: reuse drained pipes immediately
  * sink-socket: reinstate write event during bulk transfers

 -- Max Kellermann <mk@cm4all.com>  Thu, 11 Aug 2011 14:41:37 +0200

cm4all-beng-proxy (1.1.3) unstable; urgency=low

  * widget: quote invalid XMLID/JS characters for &c:prefix;
  * lb: add protocol "tcp"

 -- Max Kellermann <mk@cm4all.com>  Wed, 10 Aug 2011 18:53:12 +0200

cm4all-beng-proxy (1.1.2) unstable; urgency=low

  * merge release 1.0.2
  * http-server: report detailed errors
  * widget-http: implement header dumps
  * cgi, fastcgi: enable cookie jar with custom cookie "host"

 -- Max Kellermann <mk@cm4all.com>  Thu, 04 Aug 2011 17:27:51 +0200

cm4all-beng-proxy (1.1.1) unstable; urgency=low

  * merge release 1.0.1
  * lb: don't ignore unimplemented configuration keywords
  * lb: configurable monitor check interval
  * session: configurable idle timeout

 -- Max Kellermann <mk@cm4all.com>  Tue, 26 Jul 2011 11:27:20 +0200

cm4all-beng-proxy (1.1) unstable; urgency=low

  * http-client: send "Expect: 100-continue" only for big request body
  * lb: implement monitors (ping, connect, tcp_expect)

 -- Max Kellermann <mk@cm4all.com>  Wed, 20 Jul 2011 15:04:22 +0200
  
cm4all-beng-proxy (1.0.34) unstable; urgency=low

  * resource-loader: don't strip last segment from IPv6 address

 -- Max Kellermann <mk@cm4all.com>  Wed, 16 May 2012 09:47:43 -0000

cm4all-beng-proxy (1.0.33) unstable; urgency=low

  * widget-resolver: fix assertion failure on recursive abort

 -- Max Kellermann <mk@cm4all.com>  Thu, 26 Apr 2012 14:04:01 -0000

cm4all-beng-proxy (1.0.32) unstable; urgency=low

  * http-cache: add missing initialization on memcached miss

 -- Max Kellermann <mk@cm4all.com>  Mon, 26 Mar 2012 13:35:01 -0000

cm4all-beng-proxy (1.0.31) unstable; urgency=low

  * proxy-widget: close the request body when the view doesn't exist

 -- Max Kellermann <mk@cm4all.com>  Tue, 20 Mar 2012 08:28:00 -0000

cm4all-beng-proxy (1.0.30) unstable; urgency=low

  * widget-view: initialize the header forward settings
  * translate-client: new view inherits header forward settings from
    default view
  * handler: clear transformation after translation error
  * http-cache: release the memcached response on abort
  * fcgi-request: close the request body on stock failure

 -- Max Kellermann <mk@cm4all.com>  Thu, 15 Mar 2012 15:34:18 -0000

cm4all-beng-proxy (1.0.29) unstable; urgency=low

  * processor: unescape custom header values
  * widget-resolver: fix NULL dereference after failure

 -- Max Kellermann <mk@cm4all.com>  Thu, 08 Mar 2012 18:10:14 -0000

cm4all-beng-proxy (1.0.28) unstable; urgency=low

  * widget-resolver: serve responses in the right order
  * widget-request: fix session related assertion failure
  * translate: initialize all GError variables

 -- Max Kellermann <mk@cm4all.com>  Fri, 02 Mar 2012 15:20:54 -0000

cm4all-beng-proxy (1.0.27) unstable; urgency=low

  * resource-address: fix regression when CGI URI is not set

 -- Max Kellermann <mk@cm4all.com>  Thu, 23 Feb 2012 17:08:16 -0000

cm4all-beng-proxy (1.0.26) unstable; urgency=low

  * resource-address: apply BASE to the CGI request URI

 -- Max Kellermann <mk@cm4all.com>  Thu, 23 Feb 2012 15:11:42 -0000

cm4all-beng-proxy (1.0.25) unstable; urgency=low

  * cgi-client: clear the input pointer on close

 -- Max Kellermann <mk@cm4all.com>  Thu, 16 Feb 2012 13:46:13 -0000

cm4all-beng-proxy (1.0.24) unstable; urgency=low

  * debian/rules: optimize parallel build
  * cgi: break loop when headers are finished

 -- Max Kellermann <mk@cm4all.com>  Wed, 15 Feb 2012 09:23:22 -0000

cm4all-beng-proxy (1.0.23) unstable; urgency=low

  * cgi: detect large response headers
  * cgi: continue parsing response headers after buffer boundary
  * cgi: bigger response header buffer
  * fcgi-client: detect large response headers

 -- Max Kellermann <mk@cm4all.com>  Thu, 09 Feb 2012 09:27:50 -0000

cm4all-beng-proxy (1.0.22) unstable; urgency=low

  * debian/rules: don't run libtool
  * lb: thread safety for the SSL filter
  * lb: fix crash during shutdown
  * http-server: fix uninitialised variable

 -- Max Kellermann <mk@cm4all.com>  Thu, 02 Feb 2012 13:03:08 -0000

cm4all-beng-proxy (1.0.21) unstable; urgency=low

  * hstock: fix memory leak
  * notify: fix endless busy loop
  * ssl_filter: fix hang while tearing down connection

 -- Max Kellermann <mk@cm4all.com>  Tue, 31 Jan 2012 15:24:50 -0000

cm4all-beng-proxy (1.0.20) unstable; urgency=low

  * ssl: load the whole certificate chain
  * translate: fix PATH+JAILCGI+SITE check
  * translate: fix HOME check
  * resource-address: include all CGI attributes in cache key

 -- Max Kellermann <mk@cm4all.com>  Wed, 25 Jan 2012 12:10:43 -0000

cm4all-beng-proxy (1.0.19) unstable; urgency=low

  * cookie-client: add a missing out-of-memory check

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Jan 2012 08:27:38 -0000

cm4all-beng-proxy (1.0.18) unstable; urgency=low

  * resource-address: support zero-length path_info prefix (for BASE)
  * hashmap: optimize insertions
  * http-server: limit the number of request headers
  * proxy-widget: discard the unused request body on error

 -- Max Kellermann <mk@cm4all.com>  Wed, 04 Jan 2012 14:55:59 -0000

cm4all-beng-proxy (1.0.17) unstable; urgency=low

  * istream-chunked: avoid recursive buffer write, fixes crash

 -- Max Kellermann <mk@cm4all.com>  Wed, 21 Dec 2011 16:37:44 -0000

cm4all-beng-proxy (1.0.16) unstable; urgency=low

  * http-server: disable timeout while waiting for CGI
  * cgi: fix segmentation fault
  * processor: discard child's request body on abort
  * proxy-widget: discard the unused request body on error

 -- Max Kellermann <mk@cm4all.com>  Wed, 14 Dec 2011 11:53:31 +0100

cm4all-beng-proxy (1.0.15) unstable; urgency=low

  * http-client: fix assertion failure on bogus "100 Continue"
  * handler: don't close the request body twice
  * session: add a missing out-of-memory check
  * fcgi-client: check for EV_READ event
  * fcgi-serialize: fix serializing parameter without value

 -- Max Kellermann <mk@cm4all.com>  Mon, 05 Dec 2011 17:47:20 -0000

cm4all-beng-proxy (1.0.14) unstable; urgency=low

  * http-server: don't generate chunked HEAD response
  * http-server: don't override Content-Length for HEAD response
  * lb_http, proxy-widget, response: forward Content-Length after HEAD

 -- Max Kellermann <mk@cm4all.com>  Tue, 08 Nov 2011 18:19:42 +0100

cm4all-beng-proxy (1.0.13) unstable; urgency=low

  * processor: initialize URI rewrite options for <?cm4all-rewrite-uri?>

 -- Max Kellermann <mk@cm4all.com>  Wed, 02 Nov 2011 16:47:48 +0100

cm4all-beng-proxy (1.0.12) unstable; urgency=low

  * http-server, proxy-widget: add missing newline to log message
  * fcgi_client: fix assertion failure on response body error
  * http-cache-choice: fix crash due to wrong filter callback

 -- Max Kellermann <mk@cm4all.com>  Fri, 21 Oct 2011 15:02:42 +0200

cm4all-beng-proxy (1.0.11) unstable; urgency=low

  * lb_config: fix binding to wildcard address
  * rewrite-uri: clarify warning message when widget has no id

 -- Max Kellermann <mk@cm4all.com>  Wed, 19 Oct 2011 09:26:48 +0200

cm4all-beng-proxy (1.0.10) unstable; urgency=low

  * debian/control: beng-lb doesn't need "daemon" anymore
  * http-string: allow space in unquoted cookie values (RFC ignorant)

 -- Max Kellermann <mk@cm4all.com>  Fri, 07 Oct 2011 15:06:32 +0200

cm4all-beng-proxy (1.0.9) unstable; urgency=low

  * tcp-balancer: store a copy of the socket address
  * lb: default log directory is /var/log/cm4all/beng-lb
  * lb: use new built-in watchdog instead of /usr/bin/daemon

 -- Max Kellermann <mk@cm4all.com>  Thu, 29 Sep 2011 16:19:34 +0200

cm4all-beng-proxy (1.0.8) unstable; urgency=low

  * resource-address: copy the delegate JailCGI parameters (crash bug fix)
  * response: use the same URI for storing and dropping widget sessions

 -- Max Kellermann <mk@cm4all.com>  Thu, 22 Sep 2011 13:39:08 +0200

cm4all-beng-proxy (1.0.7) unstable; urgency=low

  * inline-widget: discard request body when class lookup fails

 -- Max Kellermann <mk@cm4all.com>  Fri, 16 Sep 2011 12:16:04 +0200

cm4all-beng-proxy (1.0.6) unstable; urgency=low

  * processor: support short "SCRIPT" tag
  * widget-uri: use the template's view specification

 -- Max Kellermann <mk@cm4all.com>  Tue, 13 Sep 2011 18:14:24 +0200

cm4all-beng-proxy (1.0.5) unstable; urgency=low

  * resource-loader: delete comma when extracting from X-Forwarded-For

 -- Max Kellermann <mk@cm4all.com>  Mon, 05 Sep 2011 17:43:22 +0200

cm4all-beng-proxy (1.0.4) unstable; urgency=low

  * istream-replace: update the buffer reader after new data was added

 -- Max Kellermann <mk@cm4all.com>  Mon, 05 Sep 2011 15:43:17 +0200

cm4all-beng-proxy (1.0.3) unstable; urgency=low

  * merge release 0.9.35
  * control-handler: fix uninitialized variable

 -- Max Kellermann <mk@cm4all.com>  Thu, 18 Aug 2011 15:15:52 +0200

cm4all-beng-proxy (1.0.2) unstable; urgency=low

  * merge release 0.9.34
  * handler: always log translate client errors
  * tcp-balancer: fix memory leak in error handler
  * http-string: allow more characters in cookie values (RFC ignorant)

 -- Max Kellermann <mk@cm4all.com>  Mon, 01 Aug 2011 16:30:05 +0200

cm4all-beng-proxy (1.0.1) unstable; urgency=low

  * session: increase idle timeout to 20 minutes

 -- Max Kellermann <mk@cm4all.com>  Tue, 26 Jul 2011 11:23:36 +0200

cm4all-beng-proxy (1.0) unstable; urgency=low

  * merge release 0.9.33
  * header-forward: eliminate the duplicate "Date" response header
  * proxy-handler: don't pass internal URI arguments to CGI

 -- Max Kellermann <mk@cm4all.com>  Mon, 18 Jul 2011 17:07:42 +0200

cm4all-beng-proxy (0.10.14) unstable; urgency=low

  * merge release 0.9.32

 -- Max Kellermann <mk@cm4all.com>  Tue, 12 Jul 2011 19:02:23 +0200

cm4all-beng-proxy (0.10.13) unstable; urgency=low

  * growing-buffer: reset the position when skipping buffers

 -- Max Kellermann <mk@cm4all.com>  Wed, 06 Jul 2011 10:07:50 +0200

cm4all-beng-proxy (0.10.12) unstable; urgency=low

  * merge release 0.9.31
  * rewrite-uri: log widget base mismatch
  * istream-replace: fix assertion failure with splitted buffer

 -- Max Kellermann <mk@cm4all.com>  Tue, 05 Jul 2011 22:05:44 +0200

cm4all-beng-proxy (0.10.11) unstable; urgency=low

  * merge release 0.9.30
  * lb: add SSL/TLS support

 -- Max Kellermann <mk@cm4all.com>  Mon, 04 Jul 2011 17:14:21 +0200

cm4all-beng-proxy (0.10.10) unstable; urgency=low

  * merge release 0.9.29

 -- Max Kellermann <mk@cm4all.com>  Tue, 28 Jun 2011 17:56:43 +0200

cm4all-beng-proxy (0.10.9) unstable; urgency=low

  * merge release 0.9.28

 -- Max Kellermann <mk@cm4all.com>  Mon, 27 Jun 2011 13:38:03 +0200

cm4all-beng-proxy (0.10.8) unstable; urgency=low

  * lb_http: don't access the connection object after it was closed
  * restart the load balancer automatically

 -- Max Kellermann <mk@cm4all.com>  Wed, 22 Jun 2011 12:38:39 +0200

cm4all-beng-proxy (0.10.7) unstable; urgency=low

  * config: make the session cookie name configurable
  * uri-relative: allow relative base URIs (for CGI)
  * widget-uri: combine existing CGI PATH_INFO and given widget location
  * python/translation/widget: support "path_info" specification

 -- Max Kellermann <mk@cm4all.com>  Mon, 20 Jun 2011 14:54:38 +0200

cm4all-beng-proxy (0.10.6) unstable; urgency=low

  * merge release 0.9.26

 -- Max Kellermann <mk@cm4all.com>  Wed, 15 Jun 2011 09:19:28 +0200

cm4all-beng-proxy (0.10.5) unstable; urgency=low

  * merge release 0.9.26

 -- Max Kellermann <mk@cm4all.com>  Fri, 10 Jun 2011 10:09:09 +0200

cm4all-beng-proxy (0.10.4) unstable; urgency=low

  * doc: add beng-lb documentation
  * lb: implement "fallback" option
  * merge release 0.9.25

 -- Max Kellermann <mk@cm4all.com>  Wed, 08 Jun 2011 14:13:43 +0200

cm4all-beng-proxy (0.10.3) unstable; urgency=low

  * python/translation.widget: support keyword "sticky"
  * lb: implement sticky modes "failover", "cookie"

 -- Max Kellermann <mk@cm4all.com>  Mon, 06 Jun 2011 15:51:36 +0200

cm4all-beng-proxy (0.10.2) unstable; urgency=low

  * debian: fix beng-lb pid file name
  * lb_http: implement sticky sessions
  * merge release 0.9.24

 -- Max Kellermann <mk@cm4all.com>  Tue, 31 May 2011 14:32:03 +0200

cm4all-beng-proxy (0.10.1) unstable; urgency=low

  * lb_http: close request body on error
  * lb_listener: print error message when binding fails
  * merge release 0.9.23

 -- Max Kellermann <mk@cm4all.com>  Fri, 27 May 2011 13:13:55 +0200

cm4all-beng-proxy (0.10) unstable; urgency=low

  * failure: fix inverted logic bug in expiry check
  * tcp-balancer: implement session stickiness
  * lb: new stand-alone load balancer

 -- Max Kellermann <mk@cm4all.com>  Thu, 26 May 2011 14:32:02 +0200

cm4all-beng-proxy (0.9.35) unstable; urgency=low

  * resource-loader: pass the last X-Forwarded-For element to AJP

 -- Max Kellermann <mk@cm4all.com>  Thu, 18 Aug 2011 15:05:02 +0200

cm4all-beng-proxy (0.9.34) unstable; urgency=low

  * request: fix double request body close in errdoc handler
  * handler: close request body on early abort

 -- Max Kellermann <mk@cm4all.com>  Mon, 01 Aug 2011 16:21:43 +0200

cm4all-beng-proxy (0.9.33) unstable; urgency=low

  * {http,ajp}-request, errdoc: check before closing the request body on
    error

 -- Max Kellermann <mk@cm4all.com>  Mon, 18 Jul 2011 16:30:29 +0200

cm4all-beng-proxy (0.9.32) unstable; urgency=low

  * processor: dispose request body when focused widget was not found
  * http-string: allow the slash in cookie values (RFC ignorant)

 -- Max Kellermann <mk@cm4all.com>  Tue, 12 Jul 2011 18:16:01 +0200

cm4all-beng-proxy (0.9.31) unstable; urgency=low

  * growing-buffer: fix assertion failure with empty first buffer

 -- Max Kellermann <mk@cm4all.com>  Tue, 05 Jul 2011 21:58:24 +0200

cm4all-beng-proxy (0.9.30) unstable; urgency=low

  * growing-buffer: fix assertion failure in reader when buffer is empty

 -- Max Kellermann <mk@cm4all.com>  Mon, 04 Jul 2011 16:59:28 +0200

cm4all-beng-proxy (0.9.29) unstable; urgency=low

  * http-string: allow the equality sign in cookie values (RFC ignorant)

 -- Max Kellermann <mk@cm4all.com>  Tue, 28 Jun 2011 17:50:23 +0200

cm4all-beng-proxy (0.9.28) unstable; urgency=low

  * http-string: allow round brackets in cookie values (RFC ignorant)

 -- Max Kellermann <mk@cm4all.com>  Mon, 27 Jun 2011 13:23:58 +0200

cm4all-beng-proxy (0.9.27) unstable; urgency=low

  * handler: don't delete existing session in TRANSPARENT mode

 -- Max Kellermann <mk@cm4all.com>  Wed, 15 Jun 2011 09:08:48 +0200

cm4all-beng-proxy (0.9.26) unstable; urgency=low

  * worker: read "crash" value before destroying shared memory
  * session: fix crash while discarding session

 -- Max Kellermann <mk@cm4all.com>  Fri, 10 Jun 2011 09:54:56 +0200

cm4all-beng-proxy (0.9.25) unstable; urgency=low

  * response: discard the request body before passing to errdoc
  * worker: don't restart all workers after "safe" worker crash
  * cgi: check for end-of-file after splice

 -- Max Kellermann <mk@cm4all.com>  Wed, 08 Jun 2011 15:02:35 +0200

cm4all-beng-proxy (0.9.24) unstable; urgency=low

  * fcgi-client: really discard packets on request id mismatch
  * memcached-client: don't schedule read event when buffer is full
  * session: support beng-lb sticky sessions

 -- Max Kellermann <mk@cm4all.com>  Tue, 31 May 2011 14:23:41 +0200

cm4all-beng-proxy (0.9.23) unstable; urgency=low

  * tcp-balancer: retry connecting to cluster if a node fails

 -- Max Kellermann <mk@cm4all.com>  Fri, 27 May 2011 13:01:31 +0200

cm4all-beng-proxy (0.9.22) unstable; urgency=low

  * failure: fix inverted logic bug in expiry check
  * uri-extract: support AJP URLs, fixes AJP cookies
  * ajp-client: don't schedule read event when buffer is full

 -- Max Kellermann <mk@cm4all.com>  Thu, 26 May 2011 08:32:32 +0200

cm4all-beng-proxy (0.9.21) unstable; urgency=low

  * balancer: re-enable load balancing (regression fix)
  * merge release 0.8.38

 -- Max Kellermann <mk@cm4all.com>  Fri, 20 May 2011 11:03:31 +0200

cm4all-beng-proxy (0.9.20) unstable; urgency=low

  * http-cache: fix assertion failure caused by wrong destructor
  * merge release 0.8.37

 -- Max Kellermann <mk@cm4all.com>  Mon, 16 May 2011 14:03:09 +0200

cm4all-beng-proxy (0.9.19) unstable; urgency=low

  * http-request: don't retry requests with a request body

 -- Max Kellermann <mk@cm4all.com>  Thu, 12 May 2011 11:35:55 +0200

cm4all-beng-proxy (0.9.18) unstable; urgency=low

  * http-body: fix assertion failure on EOF chunk after socket was closed
  * widget-http: fix crash in widget lookup error handler
  * merge release 0.8.36

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 May 2011 18:56:33 +0200

cm4all-beng-proxy (0.9.17) unstable; urgency=low

  * growing-buffer: fix assertion failure after large initial write
  * http-request: retry after connection failure
  * test/t-cgi: fix bashisms in test scripts

 -- Max Kellermann <mk@cm4all.com>  Wed, 04 May 2011 18:54:57 +0200

cm4all-beng-proxy (0.9.16) unstable; urgency=low

  * resource-address: append "transparent" args to CGI path_info
  * tcache: fix crash on FastCGI with BASE

 -- Max Kellermann <mk@cm4all.com>  Mon, 02 May 2011 16:07:21 +0200

cm4all-beng-proxy (0.9.15) unstable; urgency=low

  * configure.ac: check if valgrind/memcheck.h is installed
  * configure.ac: check if libattr is available
  * access-log: log Referer and User-Agent
  * access-log: log the request duration
  * proxy-handler: allow forwarding URI arguments
  * merge release 0.8.35

 -- Max Kellermann <mk@cm4all.com>  Wed, 27 Apr 2011 18:54:17 +0200

cm4all-beng-proxy (0.9.14) unstable; urgency=low

  * processor: don't clear widget pointer at opening tag
  * debian: move ulimit call from init script to *.default
  * merge release 0.8.33

 -- Max Kellermann <mk@cm4all.com>  Wed, 13 Apr 2011 17:03:29 +0200

cm4all-beng-proxy (0.9.13) unstable; urgency=low

  * proxy-widget: apply the widget's response header forward settings
  * response: add option to dump the widget tree
  * widget-class: move header forward settings to view
  * merge release 0.8.30

 -- Max Kellermann <mk@cm4all.com>  Mon, 04 Apr 2011 16:31:26 +0200

cm4all-beng-proxy (0.9.12) unstable; urgency=low

  * widget: internal API refactorization
  * was-control: fix argument order in "abort" call
  * was-client: duplicate the GError object when it is used twice
  * {file,delegate}-handler: add Expires/ETag headers to 304 response
  * cgi: allow setting environment variables

 -- Max Kellermann <mk@cm4all.com>  Thu, 24 Mar 2011 15:12:54 +0100

cm4all-beng-proxy (0.9.11) unstable; urgency=low

  * processor: major API refactorization
  * merge release 0.8.29

 -- Max Kellermann <mk@cm4all.com>  Mon, 21 Mar 2011 19:43:28 +0100

cm4all-beng-proxy (0.9.10) unstable; urgency=low

  * merge release 0.8.27

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Mar 2011 14:11:16 +0100

cm4all-beng-proxy (0.9.9) unstable; urgency=low

  * merge release 0.8.25

 -- Max Kellermann <mk@cm4all.com>  Mon, 14 Mar 2011 16:05:51 +0100

cm4all-beng-proxy (0.9.8) unstable; urgency=low

  * translate: support UNIX domain sockets in ADDRESS_STRING
  * resource-address: support connections to existing FastCGI servers

 -- Max Kellermann <mk@cm4all.com>  Fri, 11 Mar 2011 19:24:33 +0100

cm4all-beng-proxy (0.9.7) unstable; urgency=low

  * merge release 0.8.24

 -- Max Kellermann <mk@cm4all.com>  Fri, 04 Mar 2011 13:07:36 +0100

cm4all-beng-proxy (0.9.6) unstable; urgency=low

  * merge release 0.8.23

 -- Max Kellermann <mk@cm4all.com>  Mon, 28 Feb 2011 11:47:45 +0100

cm4all-beng-proxy (0.9.5) unstable; urgency=low

  * translate: allow SITE without CGI

 -- Max Kellermann <mk@cm4all.com>  Mon, 31 Jan 2011 06:35:24 +0100

cm4all-beng-proxy (0.9.4) unstable; urgency=low

  * widget-class: allow distinct addresses for each view

 -- Max Kellermann <mk@cm4all.com>  Thu, 27 Jan 2011 17:51:21 +0100

cm4all-beng-proxy (0.9.3) unstable; urgency=low

  * istream-catch: log errors
  * proxy-handler: pass the original request URI to (Fast)CGI
  * proxy-handler: pass the original document root to (Fast)CGI
  * fcgi-stock: pass site id to child process
  * translation: new packet "HOME" for JailCGI
  * resource-loader: get remote host from "X-Forwarded-For"
  * cgi, fcgi-client: pass client IP address to application

 -- Max Kellermann <mk@cm4all.com>  Fri, 21 Jan 2011 18:13:38 +0100

cm4all-beng-proxy (0.9.2) unstable; urgency=low

  * merge release 0.8.21
  * http-response: better context for error messages
  * istream: method close() does not invoke handler->abort()
  * istream: better context for error messages
  * ajp-client: destruct properly when request stream fails
  * {delegate,fcgi,was}-stock: use the JailCGI 1.4 wrapper

 -- Max Kellermann <mk@cm4all.com>  Mon, 17 Jan 2011 12:08:04 +0100

cm4all-beng-proxy (0.9.1) unstable; urgency=low

  * http-server: count the number of raw bytes sent and received
  * control-handler: support TCACHE_INVALIDATE with SITE
  * new programs "log-forward", "log-exec" for network logging
  * new program "log-split" for creating per-site log files
  * new program "log-traffic" for creating per-site traffic logs
  * move logging servers to new package cm4all-beng-proxy-logging
  * python/control.client: add parameter "broadcast"

 -- Max Kellermann <mk@cm4all.com>  Thu, 02 Dec 2010 12:07:16 +0100

cm4all-beng-proxy (0.9) unstable; urgency=low

  * merge release 0.8.19
  * was-client: explicitly send 32 bit METHOD payload
  * was-client: explicitly parse STATUS as 32 bit integer
  * was-client: clear control channel object on destruction
  * was-client: reuse child process if state is clean on EOF
  * was-client: abort properly after receiving illegal packet
  * was-client: allow "request STOP" before response completed
  * was-client: postpone the response handler invocation
  * was-control: send packets in bulk
  * python: support WAS widgets
  * http-server: enable "cork" mode only for beginning of response
  * http-cache: don't access freed memory in pool_unref_denotify()
  * http: use libcm4all-http
  * new datagram based binary protocol for access logging
  * main: default WAS stock limit is 16

 -- Max Kellermann <mk@cm4all.com>  Thu, 18 Nov 2010 19:56:17 +0100

cm4all-beng-proxy (0.8.38) unstable; urgency=low

  * failure: update time stamp on existing item
  * errdoc: free the original response body on abort

 -- Max Kellermann <mk@cm4all.com>  Fri, 20 May 2011 10:17:14 +0200

cm4all-beng-proxy (0.8.37) unstable; urgency=low

  * widget-resolver: don't reuse failed resolver
  * http-request: fix NULL pointer dereference on invalid URI
  * config: disable the TCP stock limit by default

 -- Max Kellermann <mk@cm4all.com>  Mon, 16 May 2011 13:41:32 +0200

cm4all-beng-proxy (0.8.36) unstable; urgency=low

  * http-server: check if client closes connection while processing
  * http-client: release the socket before invoking the callback
  * fcgi-client: fix assertion failure on full input buffer
  * memcached-client: re-enable socket event after direct copy
  * istream-file: fix assertion failure on range request
  * test/t-cgi: fix bashisms in test scripts

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 May 2011 18:45:48 +0200

cm4all-beng-proxy (0.8.35) unstable; urgency=low

  * session: fix potential session defragmentation crash
  * ajp-request: use "host:port" as TCP stock key
  * cgi: evaluate the Content-Length response header

 -- Max Kellermann <mk@cm4all.com>  Wed, 27 Apr 2011 13:32:05 +0200

cm4all-beng-proxy (0.8.34) unstable; urgency=low

  * js: replace all '%' with '$'
  * js: check if session_id is null
  * debian: add package cm4all-beng-proxy-tools

 -- Max Kellermann <mk@cm4all.com>  Tue, 19 Apr 2011 18:43:54 +0200

cm4all-beng-proxy (0.8.33) unstable; urgency=low

  * processor: don't quote query string arguments with dollar sign
  * widget-request: safely remove "view" and "path" from argument table
  * debian/control: add "Breaks << 0.8.32" on the JavaScript library

 -- Max Kellermann <mk@cm4all.com>  Tue, 12 Apr 2011 18:21:55 +0200

cm4all-beng-proxy (0.8.32) unstable; urgency=low

  * args: quote arguments with the dollar sign

 -- Max Kellermann <mk@cm4all.com>  Tue, 12 Apr 2011 13:34:42 +0200

cm4all-beng-proxy (0.8.31) unstable; urgency=low

  * proxy-widget: eliminate the duplicate "Server" response header
  * translation: add packet UNTRUSTED_SITE_SUFFIX

 -- Max Kellermann <mk@cm4all.com>  Thu, 07 Apr 2011 16:23:37 +0200

cm4all-beng-proxy (0.8.30) unstable; urgency=low

  * handler: make lower-case realm name from the "Host" header
  * session: copy attribute "realm", fixes segmentation fault

 -- Max Kellermann <mk@cm4all.com>  Tue, 29 Mar 2011 16:47:43 +0200

cm4all-beng-proxy (0.8.29) unstable; urgency=low

  * ajp-client: send query string in an AJP attribute

 -- Max Kellermann <mk@cm4all.com>  Mon, 21 Mar 2011 19:16:16 +0100

cm4all-beng-proxy (0.8.28) unstable; urgency=low

  * resource-loader: use X-Forwarded-For to obtain AJP remote host
  * resource-loader: strip port from AJP remote address
  * resource-loader: don't pass remote host to AJP server
  * resource-loader: parse server port for AJP
  * ajp-client: always send content-length
  * ajp-client: parse the remaining buffer after EAGAIN

 -- Max Kellermann <mk@cm4all.com>  Mon, 21 Mar 2011 11:12:07 +0100

cm4all-beng-proxy (0.8.27) unstable; urgency=low

  * http-request: close the request body on malformed URI
  * ajp-request: AJP translation packet contains ajp://host:port/path

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Mar 2011 14:04:21 +0100

cm4all-beng-proxy (0.8.26) unstable; urgency=low

  * python/response: fix typo in ajp()
  * session: validate sessions only within one realm

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Mar 2011 08:59:41 +0100

cm4all-beng-proxy (0.8.25) unstable; urgency=low

  * widget-http: discard request body on unknown view name
  * inline-widget: discard request body on error
  * {http,fcgi,was}-client: allocate response headers from caller pool
  * cmdline: fcgi_stock_limit defaults to 0 (no limit)

 -- Max Kellermann <mk@cm4all.com>  Mon, 14 Mar 2011 15:53:42 +0100

cm4all-beng-proxy (0.8.24) unstable; urgency=low

  * fcgi-client: release the connection even when padding not consumed
    after empty response

 -- Max Kellermann <mk@cm4all.com>  Wed, 02 Mar 2011 17:39:33 +0100

cm4all-beng-proxy (0.8.23) unstable; urgency=low

  * memcached-client: allocate a new memory pool
  * memcached-client: copy caller_pool reference before freeing the client
  * fcgi-client: check headers!=NULL
  * fcgi-client: release the connection even when padding not consumed

 -- Max Kellermann <mk@cm4all.com>  Mon, 28 Feb 2011 10:50:02 +0100

cm4all-beng-proxy (0.8.22) unstable; urgency=low

  * cgi: fill special variables CONTENT_TYPE, CONTENT_LENGTH
  * memcached-client: remove stray pool_unref() call
  * memcached-client: reuse the socket if the remaining value is buffered
  * http-cache-choice: abbreviate memcached keys
  * *-cache: allocate a parent pool for cache items
  * pool: re-enable linear pools
  * frame: free the request body on error
  * http-cache: free cached body which was dismissed

 -- Max Kellermann <mk@cm4all.com>  Mon, 07 Feb 2011 15:34:09 +0100

cm4all-beng-proxy (0.8.21) unstable; urgency=low

  * merge release 0.7.55
  * jail: translate the document root properly
  * header-forward: forward the "Host" header to CGI/FastCGI/AJP
  * http-error: map ENOTDIR to "404 Not Found"
  * http-server: fix assertion failure on write error
  * fcgi-stock: clear all environment variables

 -- Max Kellermann <mk@cm4all.com>  Thu, 06 Jan 2011 16:04:20 +0100

cm4all-beng-proxy (0.8.20) unstable; urgency=low

  * widget-resolver: add pedantic state assertions
  * async: remember a copy of the operation in !NDEBUG
  * python/translation/response: max_age() returns self

 -- Max Kellermann <mk@cm4all.com>  Mon, 06 Dec 2010 23:02:50 +0100

cm4all-beng-proxy (0.8.19) unstable; urgency=low

  * merge release 0.7.54

 -- Max Kellermann <mk@cm4all.com>  Wed, 17 Nov 2010 16:25:10 +0100

cm4all-beng-proxy (0.8.18) unstable; urgency=low

  * was-client: explicitly send 32 bit METHOD payload
  * was-client: explicitly parse STATUS as 32 bit integer
  * istream: check presence of as_fd() in optimized build

 -- Max Kellermann <mk@cm4all.com>  Fri, 05 Nov 2010 11:00:54 +0100

cm4all-beng-proxy (0.8.17) unstable; urgency=low

  * merged release 0.7.53
  * widget: use colon as widget path separator
  * was-client: check for abort during response handler
  * was-client: implement STOP
  * was-client: release memory pools
  * was-launch: enable non-blocking mode on input and output
  * http-server: don't crash on malformed pipelined request
  * main: free the WAS stock and the UDP listener in the SIGTERM handler

 -- Max Kellermann <mk@cm4all.com>  Thu, 28 Oct 2010 19:50:26 +0200

cm4all-beng-proxy (0.8.16) unstable; urgency=low

  * merged release 0.7.52
  * was-client: support for the WAS protocol

 -- Max Kellermann <mk@cm4all.com>  Wed, 13 Oct 2010 16:45:18 +0200

cm4all-beng-proxy (0.8.15) unstable; urgency=low

  * resource-address: don't skip question mark twice

 -- Max Kellermann <mk@cm4all.com>  Tue, 28 Sep 2010 12:20:33 +0200

cm4all-beng-proxy (0.8.14) unstable; urgency=low

  * processor: schedule "xmlns:c" deletion

 -- Max Kellermann <mk@cm4all.com>  Thu, 23 Sep 2010 14:42:31 +0200

cm4all-beng-proxy (0.8.13) unstable; urgency=low

  * processor: delete "xmlns:c" attributes from link elements
  * istream-{head,zero}: implement method available()
  * merged release 0.7.51

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Aug 2010 09:54:33 +0200

cm4all-beng-proxy (0.8.12) unstable; urgency=low

  * http-cache-memcached: copy resource address
  * debian/control: add missing ${shlibs:Depends}
  * merged release 0.7.50

 -- Max Kellermann <mk@cm4all.com>  Thu, 12 Aug 2010 20:17:52 +0200

cm4all-beng-proxy (0.8.11) unstable; urgency=low

  * delegate-client: fix SCM_RIGHTS check
  * use Linux 2.6 CLOEXEC/NONBLOCK flags
  * tcache: INVALIDATE removes all variants (error documents etc.)
  * control: new UDP based protocol, allows invalidating caches
  * hashmap: fix assertion failure in hashmap_remove_match()
  * merged release 0.7.49

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 Aug 2010 15:48:10 +0200

cm4all-beng-proxy (0.8.10) unstable; urgency=low

  * tcache: copy response.previous

 -- Max Kellermann <mk@cm4all.com>  Mon, 02 Aug 2010 18:03:43 +0200

cm4all-beng-proxy (0.8.9) unstable; urgency=low

  * (f?)cgi-handler: forward query string only if focused
  * ajp-handler: merge into proxy-handler
  * proxy-handler: forward query string if focused
  * cgi, fastcgi-handler: enable the resource cache
  * translation: add packets CHECK and PREVIOUS for authentication
  * python: add Response.max_age()

 -- Max Kellermann <mk@cm4all.com>  Fri, 30 Jul 2010 11:39:22 +0200

cm4all-beng-proxy (0.8.8) unstable; urgency=low

  * prototypes/translate.py: added new ticket-fastcgi programs
  * http-cache: implement FastCGI caching
  * merged release 0.7.47

 -- Max Kellermann <mk@cm4all.com>  Wed, 21 Jul 2010 13:00:43 +0200

cm4all-beng-proxy (0.8.7) unstable; urgency=low

  * istream-delayed: update the "direct" bit mask
  * http-client: send "Expect: 100-continue"
  * response, widget-http: apply istream_pipe to filter input
  * proxy-handler: apply istream_pipe to request body
  * istream-ajp-body: send larger request body packets
  * ajp-client: support splice()
  * merged release 0.7.46

 -- Max Kellermann <mk@cm4all.com>  Fri, 25 Jun 2010 18:52:04 +0200

cm4all-beng-proxy (0.8.6) unstable; urgency=low

  * translation: added support for custom error documents
  * response: convert HEAD to GET if filter follows
  * processor: short-circuit on HEAD request
  * python: depend on python-twisted-core

 -- Max Kellermann <mk@cm4all.com>  Wed, 16 Jun 2010 16:37:42 +0200

cm4all-beng-proxy (0.8.5) unstable; urgency=low

  * istream-tee: allow second output to block
  * widget-http: don't transform error documents
  * response, widget-http: disable filters after widget frame request
  * translation: added packet FILTER_4XX to filter client errors
  * merged release 0.7.45

 -- Max Kellermann <mk@cm4all.com>  Thu, 10 Jun 2010 16:13:14 +0200

cm4all-beng-proxy (0.8.4) unstable; urgency=low

  * python: added missing "Response" import
  * python: resume parsing after deferred call
  * http-client: implement istream method as_fd()
  * merged release 0.7.44

 -- Max Kellermann <mk@cm4all.com>  Mon, 07 Jun 2010 17:01:16 +0200

cm4all-beng-proxy (0.8.3) unstable; urgency=low

  * file-handler: implement If-Range (RFC 2616 14.27)
  * merged release 0.7.42

 -- Max Kellermann <mk@cm4all.com>  Tue, 01 Jun 2010 16:17:13 +0200

cm4all-beng-proxy (0.8.2) unstable; urgency=low

  * cookie-client: verify the cookie path
  * python: use Twisted's logging library
  * python: added a widget registry class
  * merged release 0.7.41

 -- Max Kellermann <mk@cm4all.com>  Wed, 26 May 2010 13:08:16 +0200

cm4all-beng-proxy (0.8.1) unstable; urgency=low

  * http-cache-memcached: delete entity records on POST

 -- Max Kellermann <mk@cm4all.com>  Tue, 18 May 2010 12:21:55 +0200

cm4all-beng-proxy (0.8) unstable; urgency=low

  * istream: added method as_fd() to convert istream to file descriptor
  * fork: support passing stdin istream fd to child process
  * http-cache: discard only matching entries on POST
  * istream-html-escape: escape single and double quote
  * rewrite-uri: escape the result with XML entities

 -- Max Kellermann <mk@cm4all.com>  Thu, 13 May 2010 12:34:46 +0200

cm4all-beng-proxy (0.7.55) unstable; urgency=low

  * pool: reparent pools in optimized build
  * istream-deflate: add missing pool reference while reading
  * istream-deflate: fix several error handlers

 -- Max Kellermann <mk@cm4all.com>  Thu, 06 Jan 2011 12:59:39 +0100

cm4all-beng-proxy (0.7.54) unstable; urgency=low

  * http-server: fix crash on deferred chunked request body
  * parser: fix crash on malformed SCRIPT element

 -- Max Kellermann <mk@cm4all.com>  Wed, 17 Nov 2010 16:13:09 +0100

cm4all-beng-proxy (0.7.53) unstable; urgency=low

  * http-server: don't crash on malformed pipelined request
  * sink-header: fix assertion failure on empty trailer

 -- Max Kellermann <mk@cm4all.com>  Thu, 28 Oct 2010 18:39:01 +0200

cm4all-beng-proxy (0.7.52) unstable; urgency=low

  * fcgi-client: fix send timeout handler
  * fork: finish the buffer after pipe was drained

 -- Max Kellermann <mk@cm4all.com>  Wed, 13 Oct 2010 16:39:26 +0200

cm4all-beng-proxy (0.7.51) unstable; urgency=low

  * http-client: clear response body pointer before forwarding EOF event
  * processor: fix assertion failure for c:mode in c:widget

 -- Max Kellermann <mk@cm4all.com>  Mon, 16 Aug 2010 17:01:48 +0200

cm4all-beng-proxy (0.7.50) unstable; urgency=low

  * header-forward: don't forward the "Host" header to HTTP servers
  * resource-address: use uri_relative() for CGI
  * uri-relative: don't lose host name in uri_absolute()
  * uri-relative: don't fail on absolute URIs
  * http-cache-heap: don't use uninitialized item size

 -- Max Kellermann <mk@cm4all.com>  Thu, 12 Aug 2010 20:03:49 +0200

cm4all-beng-proxy (0.7.49) unstable; urgency=low

  * hashmap: fix assertion failure in hashmap_remove_value()

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 Aug 2010 15:37:12 +0200

cm4all-beng-proxy (0.7.48) unstable; urgency=low

  * pipe-stock: add assertions on file descriptors

 -- Max Kellermann <mk@cm4all.com>  Mon, 09 Aug 2010 14:56:54 +0200

cm4all-beng-proxy (0.7.47) unstable; urgency=low

  * cmdline: add option "--group"

 -- Max Kellermann <mk@cm4all.com>  Fri, 16 Jul 2010 18:39:53 +0200

cm4all-beng-proxy (0.7.46) unstable; urgency=low

  * handler: initialize all translate_response attributes
  * http-client: consume buffer before header length check
  * istream-pipe: clear "direct" flags in constructor
  * istream-pipe: return gracefully when handler blocks
  * ajp-client: hold pool reference to reset TCP_CORK

 -- Max Kellermann <mk@cm4all.com>  Mon, 21 Jun 2010 17:53:21 +0200

cm4all-beng-proxy (0.7.45) unstable; urgency=low

  * istream-tee: separate "weak" values for the two outputs
  * fcache: don't close output when caching has been canceled
  * tcache: copy the attribute "secure_cookie"

 -- Max Kellermann <mk@cm4all.com>  Thu, 10 Jun 2010 15:21:34 +0200

cm4all-beng-proxy (0.7.44) unstable; urgency=low

  * http-client: check response header length
  * http-server: check request header length

 -- Max Kellermann <mk@cm4all.com>  Mon, 07 Jun 2010 16:51:57 +0200

cm4all-beng-proxy (0.7.43) unstable; urgency=low

  * http-cache: fixed NULL pointer dereference when storing empty response
    body on the heap

 -- Max Kellermann <mk@cm4all.com>  Tue, 01 Jun 2010 18:52:45 +0200

cm4all-beng-proxy (0.7.42) unstable; urgency=low

  * fork: check "direct" flag again after buffer flush
  * pool: pool_unref_denotify() remembers the code location
  * sink-{buffer,gstring}: don't invoke callback in abort()
  * async: added another debug flag to verify correctness

 -- Max Kellermann <mk@cm4all.com>  Mon, 31 May 2010 21:15:58 +0200

cm4all-beng-proxy (0.7.41) unstable; urgency=low

  * http-cache: initialize response status and headers on empty body

 -- Max Kellermann <mk@cm4all.com>  Tue, 25 May 2010 16:27:25 +0200

cm4all-beng-proxy (0.7.40) unstable; urgency=low

  * http-cache: fixed NULL pointer dereference when storing empty response
    body in memcached

 -- Max Kellermann <mk@cm4all.com>  Tue, 25 May 2010 15:04:44 +0200

cm4all-beng-proxy (0.7.39) unstable; urgency=low

  * memcached-stock: close value on connect failure
  * http: implement remaining status codes
  * http-cache: allow caching empty response body
  * http-cache: cache status codes 203, 206, 300, 301, 410
  * http-cache: don't cache authorized resources

 -- Max Kellermann <mk@cm4all.com>  Fri, 21 May 2010 17:37:29 +0200

cm4all-beng-proxy (0.7.38) unstable; urgency=low

  * http-server: send HTTP/1.1 declaration with "100 Continue"
  * connection: initialize "site_name", fixes crash bug
  * translation: added packet SECURE_COOKIE

 -- Max Kellermann <mk@cm4all.com>  Thu, 20 May 2010 15:40:34 +0200

cm4all-beng-proxy (0.7.37) unstable; urgency=low

  * *-client: implement a socket leak detector
  * handler: initialize response header without translation server

 -- Max Kellermann <mk@cm4all.com>  Tue, 18 May 2010 12:05:11 +0200

cm4all-beng-proxy (0.7.36) unstable; urgency=low

  * http-client: fixed NULL pointer dereference
  * handler, response: removed duplicate request body destruction calls

 -- Max Kellermann <mk@cm4all.com>  Tue, 11 May 2010 17:16:36 +0200

cm4all-beng-proxy (0.7.35) unstable; urgency=low

  * {http,fcgi,ajp}-request: close the request body on abort
  * handler: set fake translation response on malformed URI

 -- Max Kellermann <mk@cm4all.com>  Mon, 10 May 2010 11:22:23 +0200

cm4all-beng-proxy (0.7.34) unstable; urgency=low

  * translate: check the UNTRUSTED packet
  * translation: added packet UNTRUSTED_PREFIX

 -- Max Kellermann <mk@cm4all.com>  Fri, 30 Apr 2010 19:14:37 +0200

cm4all-beng-proxy (0.7.33) unstable; urgency=low

  * merged release 0.7.27.1
  * fcache: don't continue storing in background
  * fcgi-client: re-add event after some input data has been read

 -- Max Kellermann <mk@cm4all.com>  Fri, 30 Apr 2010 11:31:08 +0200

cm4all-beng-proxy (0.7.32) unstable; urgency=low

  * response: generate the "Server" response header
  * response: support the Authentication-Info response header
  * response: support custom authentication pages
  * translation: support custom response headers

 -- Max Kellermann <mk@cm4all.com>  Tue, 27 Apr 2010 17:09:59 +0200

cm4all-beng-proxy (0.7.31) unstable; urgency=low

  * support HTTP authentication (RFC 2617)

 -- Max Kellermann <mk@cm4all.com>  Mon, 26 Apr 2010 17:26:42 +0200

cm4all-beng-proxy (0.7.30) unstable; urgency=low

  * fcgi-client: support responses without a body
  * {http,fcgi}-client: hold caller pool reference during callback

 -- Max Kellermann <mk@cm4all.com>  Fri, 23 Apr 2010 14:41:05 +0200

cm4all-beng-proxy (0.7.29) unstable; urgency=low

  * http-cache: added missing pool_unref() in memcached_miss()
  * pool: added checked pool references

 -- Max Kellermann <mk@cm4all.com>  Thu, 22 Apr 2010 15:45:48 +0200

cm4all-beng-proxy (0.7.28) unstable; urgency=low

  * fcgi-client: support response status
  * translate: malformed packets are fatal
  * http-cache: don't cache resources with very long URIs
  * memcached-client: increase the maximum key size to 32 kB

 -- Max Kellermann <mk@cm4all.com>  Thu, 15 Apr 2010 15:06:51 +0200

cm4all-beng-proxy (0.7.27.1) unstable; urgency=low

  * http-cache: added missing pool_unref() in memcached_miss()
  * http-cache: don't cache resources with very long URIs
  * memcached-client: increase the maximum key size to 32 kB
  * fork: properly handle partially filled output buffer
  * fork: re-add event after some input data has been read

 -- Max Kellermann <mk@cm4all.com>  Thu, 29 Apr 2010 15:30:21 +0200

cm4all-beng-proxy (0.7.27) unstable; urgency=low

  * session: use GLib's PRNG to generate session ids
  * session: seed the PRNG with /dev/random
  * response: log UNTRUSTED violation attempts
  * response: drop widget sessions when there is no focus

 -- Max Kellermann <mk@cm4all.com>  Fri, 09 Apr 2010 12:04:18 +0200

cm4all-beng-proxy (0.7.26) unstable; urgency=low

  * memcached-client: schedule read event before callback
  * istream-tee: continue with second output if first is closed

 -- Max Kellermann <mk@cm4all.com>  Sun, 28 Mar 2010 18:08:11 +0200

cm4all-beng-proxy (0.7.25) unstable; urgency=low

  * memcached-client: don't poll if socket is closed
  * fork: close file descriptor on input error
  * pool: don't check attachments in pool_trash()

 -- Max Kellermann <mk@cm4all.com>  Thu, 25 Mar 2010 13:28:01 +0100

cm4all-beng-proxy (0.7.24) unstable; urgency=low

  * memcached-client: release socket after splice

 -- Max Kellermann <mk@cm4all.com>  Mon, 22 Mar 2010 11:29:45 +0100

cm4all-beng-proxy (0.7.23) unstable; urgency=low

  * sink-header: support splice
  * memcached-client: support splice (response)
  * fcgi-client: recover correctly after send error
  * fcgi-client: support chunked request body
  * fcgi-client: basic splice support for the request body
  * http-cache: duplicate headers
  * {http,memcached}-client: check "direct" mode after buffer flush
  * cmdline: added option "fcgi_stock_limit"
  * python: auto-export function write_packet()
  * python: Response methods return self

 -- Max Kellermann <mk@cm4all.com>  Fri, 19 Mar 2010 13:28:35 +0100

cm4all-beng-proxy (0.7.22) unstable; urgency=low

  * python: re-add function write_packet()

 -- Max Kellermann <mk@cm4all.com>  Fri, 12 Mar 2010 12:27:21 +0100

cm4all-beng-proxy (0.7.21) unstable; urgency=low

  * ajp-client: handle EAGAIN from send()
  * python: install the missing sources

 -- Max Kellermann <mk@cm4all.com>  Thu, 11 Mar 2010 16:58:25 +0100

cm4all-beng-proxy (0.7.20) unstable; urgency=low

  * http-client: don't reinstate event when socket is closed
  * access-log: log the site name
  * python: removed unused function write_packet()
  * python: split the module beng_proxy.translation
  * python: allow overriding query string and param in absolute_uri()
  * python: moved absolute_uri() to a separate library

 -- Max Kellermann <mk@cm4all.com>  Thu, 11 Mar 2010 09:48:52 +0100

cm4all-beng-proxy (0.7.19) unstable; urgency=low

  * client-socket: translate EV_TIMEOUT to ETIMEDOUT
  * fork: refill the input buffer as soon as possible
  * delegate-client: implement an abortable event
  * pool: added assertions for libevent leaks
  * direct: added option "-s enable_splice=no"

 -- Max Kellermann <mk@cm4all.com>  Thu, 04 Mar 2010 17:34:56 +0100

cm4all-beng-proxy (0.7.18) unstable; urgency=low

  * args: reserve memory for the trailing null byte

 -- Max Kellermann <mk@cm4all.com>  Tue, 23 Feb 2010 17:46:04 +0100

cm4all-beng-proxy (0.7.17) unstable; urgency=low

  * translation: added the BOUNCE packet (variant of REDIRECT)
  * translation: change widget packet HOST to UNTRUSTED
  * translation: pass internal URI arguments to the translation server
  * handler: use the specified status with REDIRECT
  * python: added method Request.absolute_uri()

 -- Max Kellermann <mk@cm4all.com>  Tue, 23 Feb 2010 16:15:22 +0100

cm4all-beng-proxy (0.7.16) unstable; urgency=low

  * processor: separate trusted from untrusted widgets by host name
  * processor: mode=partition is deprecated
  * translate: fix DOCUMENT_ROOT handler for CGI/FASTCGI
  * fcgi-request: added JailCGI support

 -- Max Kellermann <mk@cm4all.com>  Fri, 19 Feb 2010 14:29:29 +0100

cm4all-beng-proxy (0.7.15) unstable; urgency=low

  * processor: unreference the caller pool in abort()
  * tcache: clear BASE on mismatch
  * fcgi-client: generate the Content-Length request header
  * fcgi-client: send the CONTENT_TYPE parameter
  * prototypes/translate.py: use FastCGI to run PHP

 -- Max Kellermann <mk@cm4all.com>  Thu, 11 Feb 2010 14:43:21 +0100

cm4all-beng-proxy (0.7.14) unstable; urgency=low

  * connection: drop connections when the limit is exceeded
  * resource-address: added BASE support
  * fcgi-client: check the request ID in response packets
  * http-client: check response body when request body is closed
  * html-escape: use the last ampersand before the semicolon
  * html-escape: support &apos;
  * processor: unescape widget parameter values

 -- Max Kellermann <mk@cm4all.com>  Fri, 29 Jan 2010 17:49:43 +0100

cm4all-beng-proxy (0.7.13) unstable; urgency=low

  * fcgi-request: duplicate socket path
  * fcgi-request: support ACTION
  * fcgi-client: provide SCRIPT_FILENAME
  * fcgi-client: append empty PARAMS packet
  * fcgi-client: try to read response before request is finished
  * fcgi-client: implement the STDERR packet
  * fcgi-client: support request headers and body
  * fcgi-stock: manage one socket per child process
  * fcgi-stock: unlink socket path after connect
  * fcgi-stock: redirect fd 1,2 to /dev/null
  * fcgi-stock: kill FastCGI processes after 5 minutes idle
  * translation: new packet PAIR for passing parameters to FastCGI

 -- Max Kellermann <mk@cm4all.com>  Thu, 14 Jan 2010 13:36:48 +0100

cm4all-beng-proxy (0.7.12) unstable; urgency=low

  * http-cache: unlock the cache item after successful revalidation
  * http-cache-memcached: pass the expiration time to memcached
  * sink-header: comprise pending data in method available()
  * header-forward: forward the Expires response header

 -- Max Kellermann <mk@cm4all.com>  Tue, 22 Dec 2009 16:18:49 +0100

cm4all-beng-proxy (0.7.11) unstable; urgency=low

  * {ajp,memcached}-client: fix dis\appearing event for duplex socket
  * memcached-client: handle EAGAIN after send()
  * memcached-client: release socket as early as possible
  * header-forward: don't forward Accept-Encoding if transformation is
    enabled
  * widget-http, inline-widget: check Content-Encoding before processing
  * file-handler: send "Vary: Accept-Encoding" for compressed response
  * header-forward: support duplicate headers
  * fcache: implemented a 60 seconds timeout
  * fcache: copy pointer to local variable before callback
  * event2: refresh timeout after event has occurred

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Dec 2009 16:45:24 +0100

cm4all-beng-proxy (0.7.10) unstable; urgency=low

  * http-{server,client}: fix disappearing event for duplex socket

 -- Max Kellermann <mk@cm4all.com>  Mon, 14 Dec 2009 15:46:25 +0100

cm4all-beng-proxy (0.7.9) unstable; urgency=low

  * http: "Expect" is a hop-by-hop header
  * http-server: send "100 Continue" unless request body closed
  * http-client: poll socket after splice
  * http-server: handle EAGAIN after splice
  * http-server: send a 417 response on unrecognized "Expect" request
  * response, widget-http: append filter id to resource tag
  * resource-tag: check for "Cache-Control: no-store"

 -- Max Kellermann <mk@cm4all.com>  Mon, 14 Dec 2009 13:05:15 +0100

cm4all-beng-proxy (0.7.8) unstable; urgency=low

  * http-body: support partial response in method available()
  * file-handler: support pre-compressed static files
  * fcache: honor the "Cache-Control: no-store" response header

 -- Max Kellermann <mk@cm4all.com>  Wed, 09 Dec 2009 15:49:25 +0100

cm4all-beng-proxy (0.7.7) unstable; urgency=low

  * parser: allow underscore in attribute names
  * processor: check "type" attribute before URI rewriting
  * http-client: start receiving before request is sent
  * http-client: try to read response after write error
  * http-client: deliver response body after headers are finished
  * http-client: release socket as early as possible
  * http-client: serve buffer after socket has been closed
  * istream-chunked: clear input stream in abort handler
  * growing-buffer: fix crash after close in "data" callback

 -- Max Kellermann <mk@cm4all.com>  Thu, 03 Dec 2009 13:09:57 +0100

cm4all-beng-proxy (0.7.6) unstable; urgency=low

  * istream-hold: return -2 if handler is not available yet
  * http, ajp, fcgi: use istream_hold on request body
  * http-client: implemented splicing the request body
  * response: added missing URI substitution

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Nov 2009 15:25:35 +0100

cm4all-beng-proxy (0.7.5) unstable; urgency=low

  * session: 64 bit session ids
  * session: allow arbitrary session id size (at compile-time)
  * debian: larger default log file (16 * 4MB)
  * debian: added package cm4all-beng-proxy-toi

 -- Max Kellermann <mk@cm4all.com>  Mon, 16 Nov 2009 15:51:24 +0100

cm4all-beng-proxy (0.7.4) unstable; urgency=low

  * measure the latency of external resources
  * widget-http: partially revert "don't query session if !stateful"

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 Nov 2009 15:06:03 +0100

cm4all-beng-proxy (0.7.3) unstable; urgency=low

  * uri-verify: don't reject double slash after first segment
  * hostname: allow the hyphen character
  * processor: allow processing without session
  * widget-http: don't query session if !stateful
  * request: disable session management for known bots
  * python: fixed AttributeError in __getattr__()
  * python: added method Response.process()
  * translation: added the response packets URI, HOST, SCHEME
  * translation: added header forward packets

 -- Max Kellermann <mk@cm4all.com>  Mon, 09 Nov 2009 16:40:27 +0100

cm4all-beng-proxy (0.7.2) unstable; urgency=low

  * fcache: close all caching connections on exit
  * istream-file: retry reading after EAGAIN
  * direct, istream-pipe: re-enable SPLICE_F_NONBLOCK
  * direct, istream-pipe: disable the SPLICE_F_MORE flag
  * http-client: handle EAGAIN after splice
  * http-client, header-writer: remove hop-by-hop response headers
  * response: optimized transformed response headers
  * handler: mangle CGI and FastCGI headers
  * header-forward: generate the X-Forwarded-For header
  * header-forward: add local host name to "Via" request header

 -- Max Kellermann <mk@cm4all.com>  Fri, 30 Oct 2009 13:41:02 +0100

cm4all-beng-proxy (0.7.1) unstable; urgency=low

  * file-handler: close the stream on "304 Not Modified"
  * pool: use assembler code only on gcc
  * cmdline: added option "--set tcp_stock_limit"
  * Makefile.am: enable the "subdir-objects" option

 -- Max Kellermann <mk@cm4all.com>  Thu, 22 Oct 2009 12:17:11 +0200

cm4all-beng-proxy (0.7) unstable; urgency=low

  * ajp-client: check if connection was closed during response callback
  * header-forward: log session id
  * istream: separate TCP splicing checks
  * istream-pipe: fix segmentation fault after incomplete direct transfer
  * istream-pipe: implement the "available" method
  * istream-pipe: allocate pipe only if handler supports it
  * istream-pipe: flush the pipe before reading from input
  * istream-pipe: reuse pipes in a stock
  * direct: support splice() from TCP socket to pipe
  * istream: direct() returns -3 if stream has been closed
  * hstock: don't destroy stocks while items are being created
  * tcp-stock: limit number of connections per host to 256
  * translate, http-client, ajp-client, cgi, http-cache: verify the HTTP
    response status
  * prototypes/translate.py: disallow "/../" and null bytes
  * prototypes/translate.py: added "/jail-delegate/" location
  * uri-parser: strict RFC 2396 URI verification
  * uri-parser: don't unescape the URI path
  * http-client, ajp-client: verify the request URI
  * uri-escape: unescape each character only once
  * http-cache: never use the memcached stock if caching is disabled
  * allow 8192 connections by default
  * allow 65536 file handles by default
  * added package cm4all-jailed-beng-proxy-delegate-helper

 -- Max Kellermann <mk@cm4all.com>  Wed, 21 Oct 2009 15:00:56 +0200

cm4all-beng-proxy (0.6.23) unstable; urgency=low

  * header-forward: log session information
  * prototypes/translate.py: added /cgi-bin/ location
  * http-server: disable keep-alive for HTTP/1.0 clients
  * http-server: don't send "Connection: Keep-Alive"
  * delegate-stock: clear the environment
  * delegate-stock: added jail support
  * delegate-client: reuse helper process after I/O error

 -- Max Kellermann <mk@cm4all.com>  Mon, 12 Oct 2009 17:29:35 +0200

cm4all-beng-proxy (0.6.22) unstable; urgency=low

  * istream-tee: clear both "enabled" flags in the eof/abort handler
  * istream-tee: fall back to first data() return value if second stream
    closed itself
  * http-cache: don't log body_abort after close

 -- Max Kellermann <mk@cm4all.com>  Thu, 01 Oct 2009 19:19:37 +0200

cm4all-beng-proxy (0.6.21) unstable; urgency=low

  * http-client: log more error messages
  * delegate-stock: added the DOCUMENT_ROOT environment variable
  * response, widget: accept "application/xhtml+xml"
  * cookie-server: allow square brackets in unquoted cookie values
    (violating RFC 2109 and RFC 2616)

 -- Max Kellermann <mk@cm4all.com>  Thu, 01 Oct 2009 13:55:40 +0200

cm4all-beng-proxy (0.6.20) unstable; urgency=low

  * stock: clear stock after 60 seconds idle
  * hstock: remove empty stocks
  * http-server, http-client, cgi: fixed off-by-one bug in header parser
  * istream-pipe: fix the direct() return value on error
  * istream-pipe: fix formula in range assertion
  * http-cache-memcached: implemented "remove"
  * handler: added FastCGI handler
  * fcgi-client: unref caller pool after socket release
  * fcgi-client: implemented response headers

 -- Max Kellermann <mk@cm4all.com>  Tue, 29 Sep 2009 14:07:13 +0200

cm4all-beng-proxy (0.6.19) unstable; urgency=low

  * http-client: release caller pool after socket release
  * memcached-client: release socket on marshalling error
  * stock: unref caller pool in abort handler
  * stock: lazy cleanup
  * http-cache: copy caller_pool to local variable

 -- Max Kellermann <mk@cm4all.com>  Thu, 24 Sep 2009 16:02:17 +0200

cm4all-beng-proxy (0.6.18) unstable; urgency=low

  * delegate-handler: support conditional GET and ranges
  * file-handler: fix suffix-byte-range-spec parser
  * delegate-helper: call open() with O_CLOEXEC|O_NOCTTY
  * istream-file: don't set FD_CLOEXEC if O_CLOEXEC is available
  * stock: hold caller pool during "get" operation
  * main: free balancer object during shutdown
  * memcached-client: enable socket timeout
  * delegate-stock: set FD_CLOEXEC on socket

 -- Max Kellermann <mk@cm4all.com>  Thu, 24 Sep 2009 10:50:53 +0200

cm4all-beng-proxy (0.6.17) unstable; urgency=low

  * tcp-stock: implemented a load balancer
  * python: accept address list in the ajp() method
  * http-server: added timeout for the HTTP request headers
  * response: close template when the content type is wrong
  * delegate-get: implemented response headers
  * delegate-get: provide status codes and error messages

 -- Max Kellermann <mk@cm4all.com>  Fri, 18 Sep 2009 15:36:57 +0200

cm4all-beng-proxy (0.6.16) unstable; urgency=low

  * tcp-stock: added support for bulldog-tyke
  * sink-buffer: close input if it's not used in the constructor
  * http-cache-memcached: close response body when deserialization fails
  * serialize: fix regression in serialize_uint64()

 -- Max Kellermann <mk@cm4all.com>  Tue, 15 Sep 2009 19:26:07 +0200

cm4all-beng-proxy (0.6.15) unstable; urgency=low

  * http-cache-choice: find more duplicates during cleanup
  * handler: added AJP handler
  * ajp-request: unref pool only on tcp_stock failure
  * ajp-client: prevent parser recursion
  * ajp-client: free request body when response is closed
  * ajp-client: reuse connection after END_RESPONSE packet
  * ajp-client: enable TCP_CORK while sending
  * istream-ajp-body: added a second "length" header field
  * ajp-client: auto-send empty request body chunk
  * ajp-client: register "write" event after GET_BODY_CHUNK packet
  * ajp-client: implemented request and response headers
  * http-cache-rfc: don't rewind tpool if called recursively

 -- Max Kellermann <mk@cm4all.com>  Fri, 11 Sep 2009 16:04:06 +0200

cm4all-beng-proxy (0.6.14) unstable; urgency=low

  * istream-tee: don't restart reading if already in progress

 -- Max Kellermann <mk@cm4all.com>  Thu, 03 Sep 2009 13:21:06 +0200

cm4all-beng-proxy (0.6.13) unstable; urgency=low

  * cookie-server: fix parsing multiple cookies
  * http-cache-memcached: clean up expired "choice" items
  * sink-gstring: use callback instead of public struct
  * istream-tee: restart reading when one output is closed

 -- Max Kellermann <mk@cm4all.com>  Wed, 02 Sep 2009 17:02:53 +0200

cm4all-beng-proxy (0.6.12) unstable; urgency=low

  * http-cache: don't attempt to remove cache items when the cache is disabled

 -- Max Kellermann <mk@cm4all.com>  Fri, 28 Aug 2009 15:40:48 +0200

cm4all-beng-proxy (0.6.11) unstable; urgency=low

  * http-cache-memcached: store HTTP status and response headers
  * http-cache-memcached: implemented flush (SIGHUP)
  * http-cache-memcached: support "Vary"
  * http-client: work around assertion failure in response_stream_close()

 -- Max Kellermann <mk@cm4all.com>  Thu, 27 Aug 2009 12:33:17 +0200

cm4all-beng-proxy (0.6.10) unstable; urgency=low

  * parser: finish tag before bailing out
  * http-request: allow URLs without path component
  * fork: clear event in read() method
  * istream-file: pass options O_CLOEXEC|O_NOCTTY to open()
  * response: check if the "Host" request header is valid

 -- Max Kellermann <mk@cm4all.com>  Tue, 18 Aug 2009 16:37:19 +0200

cm4all-beng-proxy (0.6.9) unstable; urgency=low

  * direct: disable SPLICE_F_NONBLOCK (temporary NFS EAGAIN workaround)

 -- Max Kellermann <mk@cm4all.com>  Mon, 17 Aug 2009 13:52:49 +0200

cm4all-beng-proxy (0.6.8) unstable; urgency=low

  * widget-http: close response body in error code path
  * http-cache: implemented memcached backend (--memcached-server)
  * processor: &c:base; returns the URI without scheme and host

 -- Max Kellermann <mk@cm4all.com>  Mon, 17 Aug 2009 12:29:19 +0200

cm4all-beng-proxy (0.6.7) unstable; urgency=low

  * file-handler: generate Expires from xattr user.MaxAge
  * cmdline: added option --set to configure:
    - max_connections
    - http_cache_size
    - filter_cache_size
    - translate_cache_size
  * flush caches on SIGHUP

 -- Max Kellermann <mk@cm4all.com>  Fri, 07 Aug 2009 11:41:10 +0200

cm4all-beng-proxy (0.6.6) unstable; urgency=low

  * added missing GLib build dependency
  * cgi-handler: set the "body_consumed" flag

 -- Max Kellermann <mk@cm4all.com>  Tue, 04 Aug 2009 09:53:01 +0200

cm4all-beng-proxy (0.6.5) unstable; urgency=low

  * shm: pass MAP_NORESERVE to mmap()
  * proxy-handler: support cookies
  * translation: added DISCARD_SESSION packet

 -- Max Kellermann <mk@cm4all.com>  Wed, 15 Jul 2009 18:00:33 +0200

cm4all-beng-proxy (0.6.4) unstable; urgency=low

  * http-client: don't read response body in HEAD requests
  * ajp-client: invoke the "abort" handler on error
  * filter-cache: lock cache items while they are served

 -- Max Kellermann <mk@cm4all.com>  Thu, 09 Jul 2009 14:36:14 +0200

cm4all-beng-proxy (0.6.3) unstable; urgency=low

  * http-server: implemented the DELETE method
  * http-server: refuse HTTP/0.9 requests
  * proxy-handler: send request body to template when no widget is focused
  * widget-request: pass original HTTP method to widget
  * session: automatically defragment sessions

 -- Max Kellermann <mk@cm4all.com>  Tue, 07 Jul 2009 16:57:22 +0200

cm4all-beng-proxy (0.6.2) unstable; urgency=low

  * lock: fixed race condition in debug flag updates
  * session: use rwlock for the session manager
  * proxy-handler: pass request headers to the remote HTTP server
  * proxy-handler: forward original Accept-Charset if processor is disabled
  * pipe: don't filter resources without a body
  * fcache: forward original HTTP status over "pipe" filter
  * cgi: support the "Status" line

 -- Max Kellermann <mk@cm4all.com>  Mon, 06 Jul 2009 16:38:26 +0200

cm4all-beng-proxy (0.6.1) unstable; urgency=low

  * session: consistently lock all session objects
  * rewrite-uri: check if widget_external_uri() returns NULL
  * widget-uri: don't generate the "path" argument when it's NULL
  * widget-uri: strip superfluous question mark from widget_base_address()
  * widget-uri: append parameters from the template first
  * widget-uri: re-add configured query string in widget_absolute_uri()
  * widget-uri: eliminate configured query string in widget_external_uri()
  * processor: don't consider session data for base=child and base=parent

 -- Max Kellermann <mk@cm4all.com>  Fri, 03 Jul 2009 15:52:01 +0200

cm4all-beng-proxy (0.6) unstable; urgency=low

  * inline-widget: check the widget HTTP response status
  * response: don't apply transformation on failed response
  * resource-address: include pipe arguments in filter cache key
  * handler: removed session redirect on the first request
  * http-cache: accept ETag response header instead of Last-Modified
  * filter-cache: don't require Last-Modified or Expires
  * file-handler: disable ETag only when processor comes first
  * file-handler: read ETag from xattr
  * pipe: generate new ETag for piped resource
  * session: purge sessions when shared memory is full
  * handler: don't enforce sessions for filtered responses

 -- Max Kellermann <mk@cm4all.com>  Tue, 30 Jun 2009 17:48:20 +0200

cm4all-beng-proxy (0.5.14) unstable; urgency=low

  * ajp-client: implemented request body
  * cookie-client: obey "max-age=0" properly
  * processor: forward the original HTTP status
  * response, widget-http: don't allow processing resource without body
  * widget-http: check the Content-Type before invoking processor
  * response: pass the "Location" response header
  * debian: added a separate -optimized-dbg package
  * added init script support for multiple ports (--port) and multiple listen
    (--listen) command line argumnents
  * translation: added the "APPEND" packet for command line arguments
  * pipe: support command line arguments

 -- Max Kellermann <mk@cm4all.com>  Mon, 29 Jun 2009 16:51:16 +0200

cm4all-beng-proxy (0.5.13) unstable; urgency=low

  * widget-registry: clear local_address in translate request
  * cmdline: added the "--listen" option

 -- Max Kellermann <mk@cm4all.com>  Wed, 24 Jun 2009 12:27:17 +0200

cm4all-beng-proxy (0.5.12) unstable; urgency=low

  * response: pass the "Location" response handler
  * added support for multiple listener ports

 -- Max Kellermann <mk@cm4all.com>  Tue, 23 Jun 2009 23:34:55 +0200

cm4all-beng-proxy (0.5.11) unstable; urgency=low

  * build with autotools
  * use libcm4all-socket, GLib
  * Makefile.am: support out-of-tree builds
  * added optimized Debian package
  * tcache: fixed wrong assignment in VARY=HOST
  * translation: added request packet LOCAL_ADDRESS

 -- Max Kellermann <mk@cm4all.com>  Tue, 23 Jun 2009 15:42:12 +0200

cm4all-beng-proxy (0.5.10) unstable; urgency=low

  * widget-http: assign the "address" variable

 -- Max Kellermann <mk@cm4all.com>  Mon, 15 Jun 2009 18:38:58 +0200

cm4all-beng-proxy (0.5.9) unstable; urgency=low

  * tcache: fixed typo in tcache_string_match()
  * tcache: support VARY=SESSION
  * translate: added the INVALIDATE response packet
  * cache, session: higher size limits
  * widget-uri: separate query_string from path_info
  * widget-uri: ignore widget parameters in widget_external_uri()

 -- Max Kellermann <mk@cm4all.com>  Mon, 15 Jun 2009 17:06:11 +0200

cm4all-beng-proxy (0.5.8) unstable; urgency=low

  * handler: fixed double free bug in translate_callback()

 -- Max Kellermann <mk@cm4all.com>  Sun, 14 Jun 2009 19:05:09 +0200

cm4all-beng-proxy (0.5.7) unstable; urgency=low

  * forward the Content-Disposition header
  * handler: assign new session to local variable, fix segfault
  * handler: don't dereference the NULL session

 -- Max Kellermann <mk@cm4all.com>  Sun, 14 Jun 2009 13:01:52 +0200

cm4all-beng-proxy (0.5.6) unstable; urgency=low

  * widget-http: send the "Via" request header instead of "X-Forwarded-For"
  * proxy-handler: send the "Via" request header
  * widget-request: check the "path" argument before calling uri_compress()

 -- Max Kellermann <mk@cm4all.com>  Tue, 09 Jun 2009 12:21:00 +0200

cm4all-beng-proxy (0.5.5) unstable; urgency=low

  * processor: allow specifying relative URI in c:base=child
  * widget-request: verify the "path" argument
  * widget: allocate address from widget's pool
  * widget-http: support multiple Set-Cookie response headers

 -- Max Kellermann <mk@cm4all.com>  Thu, 04 Jun 2009 15:10:15 +0200

cm4all-beng-proxy (0.5.4) unstable; urgency=low

  * implemented delegation of open() to a helper program
  * added the BASE translation packet, supported by the translation cache
  * deprecated c:mode=proxy
  * rewrite-uri: always enable focus in mode=partial
  * http-cache: don't cache resources with query string (RFC 2616 13.9)
  * http-cache: lock cache items while they are served

 -- Max Kellermann <mk@cm4all.com>  Thu, 28 May 2009 11:44:01 +0200

cm4all-beng-proxy (0.5.3) unstable; urgency=low

  * cgi: close request body on fork() failure
  * fork: added workaround for pipe-to-pipe splice()
  * http-cache: use cache entry when response ETag matches
  * cgi: loop in istream_cgi_read() to prevent blocking
  * cache: check for expired items once a minute
  * cache: optimize search for oldest item

 -- Max Kellermann <mk@cm4all.com>  Wed, 06 May 2009 13:23:46 +0200

cm4all-beng-proxy (0.5.2) unstable; urgency=low

  * added filter cache
  * header-parser: added missing range check in header_parse_line()
  * fork: added event for writing to the child process
  * fork: don't splice() from a pipe
  * response: don't pass request body to unfocused processor
  * added filter type "pipe"

 -- Max Kellermann <mk@cm4all.com>  Wed, 29 Apr 2009 13:24:26 +0200

cm4all-beng-proxy (0.5.1) unstable; urgency=low

  * processor: fixed base=child assertion failure
  * handler: close request body if it was not consumed
  * static-file: generate Last-Modified and ETag response headers
  * static-file: obey the Content-Type provided by the translation server
  * static-file: get Content-Type from extended attribute
  * http-cache: use istream_null when cached resource is empty

 -- Max Kellermann <mk@cm4all.com>  Mon, 27 Apr 2009 10:00:20 +0200

cm4all-beng-proxy (0.5) unstable; urgency=low

  * processor: accept c:mode/c:base attributes in any order
  * processor: removed alternative (anchor) rewrite syntax

 -- Max Kellermann <mk@cm4all.com>  Mon, 20 Apr 2009 22:04:19 +0200

cm4all-beng-proxy (0.4.10) unstable; urgency=low

  * processor: lift length limitation for widget parameters
  * translate: abort if a packet is too large
  * translate: support MAX_AGE for the whole response
  * hashmap: fix corruption of slot chain in hashmap_remove_value()

 -- Max Kellermann <mk@cm4all.com>  Fri, 17 Apr 2009 13:02:50 +0200

cm4all-beng-proxy (0.4.9) unstable; urgency=low

  * http-cache: explicitly start reading into cache
  * cgi: clear "headers" variable before publishing the response
  * translate: use DOCUMENT_ROOT as CGI parameter

 -- Max Kellermann <mk@cm4all.com>  Mon, 06 Apr 2009 16:21:57 +0200

cm4all-beng-proxy (0.4.8) unstable; urgency=low

  * translate: allow ADDRESS packets in AJP addresses
  * translate: initialize all fields of a FastCGI address
  * http-cache: close all caching connections on exit
  * processor: don't rewrite SCRIPT SRC attribute when proxying

 -- Max Kellermann <mk@cm4all.com>  Thu, 02 Apr 2009 15:45:46 +0200

cm4all-beng-proxy (0.4.7) unstable; urgency=low

  * http-server: use istream_null for empty request body
  * parser: check for trailing slash only in TAG_OPEN tags
  * parser: added support for XML Processing Instructions
  * processor: implemented XML Processing Instruction "cm4all-rewrite-uri"
  * uri-escape: escape the slash character
  * cache: remove all matching items in cache_remove()
  * http-cache: lock cache items while holding a reference

 -- Max Kellermann <mk@cm4all.com>  Thu, 02 Apr 2009 12:02:53 +0200

cm4all-beng-proxy (0.4.6) unstable; urgency=low

  * file_handler: fixed logic error in If-Modified-Since check
  * date: return UTC time stamp in http_date_parse()
  * cache: continue search after item was invalidated
  * cache: remove the correct cache item
  * istream-chunked: work around invalid assertion failure
  * istream-subst: fixed corruption after partial match

 -- Max Kellermann <mk@cm4all.com>  Wed, 25 Mar 2009 15:03:10 +0100

cm4all-beng-proxy (0.4.5) unstable; urgency=low

  * http-server: assume keep-alive is enabled on HTTP 1.1
  * http-client: unregister EV_READ when the buffer is full
  * translation: added QUERY_STRING packet
  * processor: optionally parse base/mode from URI

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Mar 2009 13:04:25 +0100

cm4all-beng-proxy (0.4.4) unstable; urgency=low

  * forward Accept-Language request header to the translation server
  * translate: added the USER_AGENT request packet
  * session: obey the USER/MAX_AGE setting
  * use libcm4all-inline-dev in libcm4all-beng-proxy-dev
  * added pkg-config file for libcm4all-beng-proxy-dev
  * updated python-central dependencies
  * processor: parse c:base/c:mode attributes in PARAM tags

 -- Max Kellermann <mk@cm4all.com>  Wed, 11 Mar 2009 09:43:48 +0100

cm4all-beng-proxy (0.4.3) unstable; urgency=low

  * processor: rewrite URI in LINK tags
  * processor: rewrite URI in PARAM tags
  * use splice() from glibc 2.7
  * translate: added VARY response packet
  * build documentation with texlive

 -- Max Kellermann <mk@cm4all.com>  Wed, 04 Mar 2009 09:53:56 +0100

cm4all-beng-proxy (0.4.2) unstable; urgency=low

  * hashmap: fix corruption in slot chain
  * use monotonic clock to calculate expiry times
  * processor: rewrite URIs in the EMBED, VIDEO, AUDIO tags

 -- Max Kellermann <mk@cm4all.com>  Tue, 17 Feb 2009 17:14:48 +0100

cm4all-beng-proxy (0.4.1) unstable; urgency=low

  * translate: clear client->transformation
  * handler: check for translation errors
  * http-server: fixed assertion failure during shutdown
  * http-server: send "Keep-Alive" response header
  * worker: after fork(), call event_reinit() in the parent process
  * added valgrind build dependency
  * build with Debian's libevent-1.4 package

 -- Max Kellermann <mk@cm4all.com>  Tue, 10 Feb 2009 11:48:53 +0100

cm4all-beng-proxy (0.4) unstable; urgency=low

  * added support for transformation views
    - in the JavaScript API, mode=proxy is now deprecated
  * http-cache: fix segfault when request_headers==NULL
  * http-cache: store multiple (varying) versions of a resource
  * http-cache: use the "max-age" cache-control response

 -- Max Kellermann <mk@cm4all.com>  Fri, 30 Jan 2009 13:29:43 +0100

cm4all-beng-proxy (0.3.9) unstable; urgency=low

  * http-client: assume keep-alive is enabled on HTTP 1.1
  * processor: use configured/session path-info for mode=child URIs

 -- Max Kellermann <mk@cm4all.com>  Tue, 27 Jan 2009 13:07:51 +0100

cm4all-beng-proxy (0.3.8) unstable; urgency=low

  * processor: pass Content-Type and Content-Language headers from
    template
  * http-client: allow chunked response body without keep-alive

 -- Max Kellermann <mk@cm4all.com>  Fri, 23 Jan 2009 13:02:42 +0100

cm4all-beng-proxy (0.3.7) unstable; urgency=low

  * istream_subst: exit the loop if state==INSERT
  * istream_iconv: check if the full buffer could be flushed
  * worker: don't reinitialize session manager during shutdown

 -- Max Kellermann <mk@cm4all.com>  Thu, 15 Jan 2009 10:39:47 +0100

cm4all-beng-proxy (0.3.6) unstable; urgency=low

  * processor: ignore closing </header>
  * widget-http: now really don't check content-type in frame parents
  * parser: skip comments
  * processor: implemented c:base="parent"
  * processor: added "c:" prefix to c:widget child elements
  * processor: renamed the "c:param" element to "c:parameter"

 -- Max Kellermann <mk@cm4all.com>  Thu, 08 Jan 2009 11:17:29 +0100

cm4all-beng-proxy (0.3.5) unstable; urgency=low

  * widget-http: don't check content-type in frame parents
  * istream-subst: allow null bytes in the input stream
  * js: added the "translate" parameter for passing values to the
    translation server
  * rewrite-uri: refuse to rewrite a frame URI without widget id

 -- Max Kellermann <mk@cm4all.com>  Mon, 05 Jan 2009 16:46:32 +0100

cm4all-beng-proxy (0.3.4) unstable; urgency=low

  * processor: added support for custom widget request headers
  * http-cache: obey the "Vary" response header
  * http-cache: pass the new http_cache_info object when testing a cache
    item

 -- Max Kellermann <mk@cm4all.com>  Tue, 30 Dec 2008 15:46:44 +0100

cm4all-beng-proxy (0.3.3) unstable; urgency=low

  * processor: grew widget parameter buffer to 512 bytes
  * widget-resolver: clear widget->resolver on abort
  * cgi: clear the input's handler in cgi_async_abort()
  * widget-stream: use istream_hold (reverts r4171)

 -- Max Kellermann <mk@cm4all.com>  Fri, 05 Dec 2008 14:43:05 +0100

cm4all-beng-proxy (0.3.2) unstable; urgency=low

  * processor: free memory before calling embed_frame_widget()
  * processor: allocate query string from the widget pool
  * processor: removed the obsolete widget attributes "tag" and "style"
  * parser: hold a reference to the pool

 -- Max Kellermann <mk@cm4all.com>  Mon, 01 Dec 2008 14:15:38 +0100

cm4all-beng-proxy (0.3.1) unstable; urgency=low

  * http-client: remove Transfer-Encoding and Content-Length from response
    headers
  * http-client: don't read body after invoke_response()
  * fork: retry splice() after EAGAIN
  * fork: don't close input when splice() fails
  * cgi: abort the response handler when the stdin stream fails
  * istream_file, istream_pipe, fork, client_socket, listener: fixed file
    descriptor leaks
  * processor: hold a reference to the caller's pool
  * debian/rules: enabled test suite

 -- Max Kellermann <mk@cm4all.com>  Thu, 27 Nov 2008 16:01:16 +0100

cm4all-beng-proxy (0.3) unstable; urgency=low

  * implemented widget filters
  * translate: initialize all fields of a CGI address
  * fork: read request body on EAGAIN
  * fork: implemented the direct() method with splice()
  * python: added class Response
  * prototypes/translate.py:
    - support "filter"
    - support "content_type"
  * demo: added widget filter demo

 -- Max Kellermann <mk@cm4all.com>  Wed, 26 Nov 2008 16:27:29 +0100

cm4all-beng-proxy (0.2) unstable; urgency=low

  * don't quote text/xml widgets
  * widget-resolver: pass widget_pool to widget_class_lookup()
  * widget-registry: allocate widget_class from widget_pool
  * widget-stream: eliminated the async operation proxy, because the
    operation cannot be aborted before the constructor returns
  * widget-stream: don't clear the "delayed" stream in the response() callback
  * rewrite-uri: trigger istream_read(delayed) after istream_delayed_set()
  * doc: clarified XSLT integration

 -- Max Kellermann <mk@cm4all.com>  Tue, 25 Nov 2008 15:28:54 +0100

cm4all-beng-proxy (0.1) unstable; urgency=low

  * initial release

 -- Max Kellermann <mk@cm4all.com>  Mon, 17 Nov 2008 11:59:36 +0100
